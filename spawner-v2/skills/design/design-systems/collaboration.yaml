id: design-systems
skill: Design Systems
version: "1.0"

receives_from:
  - skill: ui-design
    receives:
      - Visual design specifications
      - Color palettes and typography choices
      - Component visual designs
      - Spacing and layout decisions
    provides:
      - Token architecture and naming
      - Component API contracts
      - Systematic constraints
      - Design-to-code specifications

  - skill: frontend
    receives:
      - Implementation feedback
      - Performance requirements
      - Technical constraints
      - Bundle size concerns
    provides:
      - Component specifications
      - Token values in multiple formats
      - Accessibility requirements
      - State and variant definitions

  - skill: accessibility-design
    receives:
      - WCAG compliance requirements
      - Screen reader behavior specs
      - Keyboard navigation patterns
      - Color contrast validations
    provides:
      - Component accessibility specs
      - ARIA pattern implementations
      - Focus management patterns
      - Color and contrast tokens

  - skill: ux-design
    receives:
      - User research insights
      - Interaction patterns
      - Usability requirements
      - User flow context
    provides:
      - Component documentation
      - Usage guidelines
      - Pattern recommendations
      - Constraint explanations

  - skill: branding
    receives:
      - Brand guidelines
      - Color specifications
      - Typography selections
      - Visual identity rules
    provides:
      - Tokenized brand values
      - Multi-brand architecture
      - Theme configuration
      - Brand application patterns

delegation_triggers:
  - pattern: "implement|code|build|react|vue|angular"
    delegate_to: frontend
    context: "Implement design system components in code"

  - pattern: "visual|aesthetic|color choice|typography choice"
    delegate_to: ui-design
    context: "Visual design decisions for components"

  - pattern: "wcag|screen reader|keyboard|accessibility audit"
    delegate_to: accessibility-design
    context: "Accessibility compliance and testing"

  - pattern: "user research|usability test|user feedback"
    delegate_to: ux-design
    context: "User research and usability validation"

  - pattern: "brand|logo|identity|brand guidelines"
    delegate_to: branding
    context: "Brand identity and guidelines"

  - pattern: "figma|sketch|design file|prototype"
    delegate_to: ui-design
    context: "Design tool work and prototyping"

common_combinations:
  - name: Component Development Workflow
    skills:
      - design-systems
      - ui-design
      - frontend
      - accessibility-design
    workflow: |
      1. Define component requirements (design-systems)
      2. Create visual design in Figma (ui-design)
      3. Specify tokens and API (design-systems)
      4. Implement in code (frontend)
      5. Audit accessibility (accessibility-design)
      6. Document and publish (design-systems)

  - name: Multi-Brand Theme System
    skills:
      - design-systems
      - branding
      - ui-design
    workflow: |
      1. Gather brand guidelines (branding)
      2. Create visual specifications (ui-design)
      3. Architect token layers (design-systems)
      4. Implement theme switching (design-systems)
      5. Validate brand compliance (branding)

  - name: Design System Audit
    skills:
      - design-systems
      - accessibility-design
      - ux-design
    workflow: |
      1. Inventory existing components (design-systems)
      2. Audit accessibility compliance (accessibility-design)
      3. Gather user feedback (ux-design)
      4. Prioritize improvements (design-systems)
      5. Create migration plan (design-systems)

  - name: Token Architecture Setup
    skills:
      - design-systems
      - ui-design
      - frontend
    workflow: |
      1. Define visual scales (ui-design)
      2. Architect token tiers (design-systems)
      3. Implement token build pipeline (design-systems)
      4. Integrate with frontend (frontend)
      5. Set up Figma sync (design-systems)

cross_domain_insights:
  - domain: Industrial Design
    insight: Design languages create product family coherence
    application: |
      Just as Braun's design language made all products feel related,
      design systems create visual and interaction coherence across
      digital products. The system is the language, components are vocabulary.

  - domain: Architecture
    insight: Pattern languages enable infinite combination from finite elements
    application: |
      Christopher Alexander's pattern language shows how combining
      simple, well-defined patterns creates complex, beautiful structures.
      Design systems work the same way - simple tokens and components
      combine into sophisticated interfaces.

  - domain: Typography
    insight: Type systems establish hierarchy through constraint
    application: |
      Traditional typography uses limited type sizes and weights to
      create clear hierarchy. Design systems should similarly constrain
      choices to create consistency while enabling expression.

  - domain: Music
    insight: Scales enable infinite composition through defined intervals
    application: |
      Musical scales don't limit creativity - they enable it by providing
      a framework. Design tokens work the same way: a spacing scale
      doesn't limit layouts, it enables consistent, harmonious composition.

  - domain: Language
    insight: Grammar provides structure without limiting expression
    application: |
      Natural languages have rules (grammar) but allow infinite expression.
      Design systems should provide structure (tokens, patterns) without
      being so rigid they prevent creative solutions.

  - domain: Biology
    insight: DNA encodes instructions that create infinite variety
    application: |
      A small set of base pairs creates all life's diversity. Similarly,
      a small set of well-designed tokens can create infinite UI variations
      while maintaining genetic consistency.

ecosystem_alternatives:
  token_tools:
    - name: Style Dictionary
      when: Multi-platform token delivery (web, iOS, Android)
      tradeoff: Configuration complexity
    - name: Tokens Studio
      when: Figma-first workflow with sync
      tradeoff: Figma dependency
    - name: Theo
      when: Simple token transformation
      tradeoff: Less maintained
    - name: Design Tokens Community Group format
      when: Standard interchange format
      tradeoff: Limited tooling

  component_libraries:
    - name: Radix UI
      when: Unstyled, accessible primitives
      tradeoff: Requires styling layer
    - name: Headless UI
      when: Tailwind-native, accessible
      tradeoff: Limited component set
    - name: shadcn/ui
      when: Copy-paste components, full control
      tradeoff: Not a npm package, manual updates
    - name: Chakra UI
      when: Styled, customizable, good DX
      tradeoff: Runtime CSS-in-JS
    - name: MUI
      when: Comprehensive, Material Design
      tradeoff: Heavy, opinionated

  documentation_tools:
    - name: Storybook
      when: Component development and documentation
      tradeoff: Configuration overhead
    - name: Docusaurus
      when: Documentation site with MDX
      tradeoff: Separate from component dev
    - name: Nextra
      when: Next.js native docs
      tradeoff: Next.js dependency
    - name: Supernova
      when: Design-to-docs automation
      tradeoff: Paid tool

  figma_sync:
    - name: Tokens Studio
      when: Real-time Figma token sync
      tradeoff: Plugin dependency
    - name: Figma REST API
      when: Custom sync pipeline
      tradeoff: Development effort
    - name: Specify
      when: Full design ops platform
      tradeoff: Enterprise pricing

feedback_loops:
  - from: frontend
    incorporates:
      - Implementation difficulties
      - Performance bottlenecks
      - Bundle size concerns
      - Developer experience friction
    into: Component API refinement and token optimization

  - from: ui-design
    incorporates:
      - New visual patterns
      - Brand evolution
      - Aesthetic trends
      - Tool capabilities
    into: Token additions and component visual updates

  - from: accessibility-design
    incorporates:
      - Accessibility audit results
      - Screen reader testing
      - Keyboard navigation issues
      - Color contrast failures
    into: Component accessibility improvements

  - from: ux-design
    incorporates:
      - User testing results
      - Usability issues
      - Adoption feedback
      - Documentation gaps
    into: Documentation improvements and component usability

  - from: branding
    incorporates:
      - Brand guideline updates
      - New brand assets
      - Sub-brand requirements
      - Brand compliance issues
    into: Token updates and theme additions

prerequisites:
  required_knowledge:
    - CSS fundamentals (specificity, cascade, custom properties)
    - Component architecture patterns (composition, slots)
    - Accessibility basics (WCAG, ARIA)
    - Version control and semver
    - Design tool basics (Figma preferred)

  recommended_tools:
    - Figma (design tool)
    - Storybook (component documentation)
    - Style Dictionary or Tokens Studio (token management)
    - axe or pa11y (accessibility testing)
    - Chromatic or Percy (visual regression)

  environment_setup: |
    # Token build setup
    npm install style-dictionary

    # Create Style Dictionary config
    cat > style-dictionary.config.json << 'EOF'
    {
      "source": ["tokens/**/*.json"],
      "platforms": {
        "css": {
          "transformGroup": "css",
          "buildPath": "dist/",
          "files": [{
            "destination": "tokens.css",
            "format": "css/variables",
            "options": {
              "outputReferences": true
            }
          }]
        },
        "js": {
          "transformGroup": "js",
          "buildPath": "dist/",
          "files": [{
            "destination": "tokens.js",
            "format": "javascript/es6"
          }]
        }
      }
    }
    EOF

    # Token structure
    mkdir -p tokens
    cat > tokens/colors.json << 'EOF'
    {
      "color": {
        "primitive": {
          "blue": {
            "500": { "value": "#3B82F6" },
            "600": { "value": "#2563EB" }
          }
        },
        "semantic": {
          "primary": { "value": "{color.primitive.blue.600}" },
          "primaryHover": { "value": "{color.primitive.blue.500}" }
        }
      }
    }
    EOF

    # Build tokens
    npx style-dictionary build

    # Storybook setup
    npx storybook@latest init

    # Accessibility testing
    npm install -D @axe-core/react jest-axe

    # Visual regression (Chromatic example)
    npm install -D chromatic
    npx chromatic --project-token=<token>

integration_points:
  figma:
    description: Design file synchronization
    setup: |
      1. Install Tokens Studio plugin in Figma
      2. Connect to GitHub repository
      3. Configure token structure in plugin
      4. Set up sync workflow (push/pull)

  storybook:
    description: Component documentation and development
    setup: |
      1. Initialize Storybook: npx storybook@latest init
      2. Configure token CSS import in preview.js
      3. Add accessibility addon: npx storybook@latest add @storybook/addon-a11y
      4. Configure autodocs for all components

  ci_cd:
    description: Automated quality checks
    setup: |
      1. Visual regression: Chromatic or Percy
      2. Accessibility: axe-core in CI
      3. Bundle size: size-limit
      4. Token drift: custom script comparing Figma export to code

handoff_protocols:
  to_frontend:
    provides:
      - Token CSS/JS files
      - Component specifications (props, states, variants)
      - Accessibility requirements (ARIA, keyboard)
      - Storybook stories as reference
    format: |
      ## Component Handoff: {ComponentName}

      ### Tokens Used
      - Background: var(--color-button-background)
      - Text: var(--color-button-text)
      - Padding: var(--spacing-sm) var(--spacing-md)

      ### Props
      | Prop | Type | Default | Description |
      |------|------|---------|-------------|
      | variant | 'primary' | 'secondary' | 'primary' | Visual style |

      ### States
      - Default, Hover, Focus, Active, Disabled, Loading

      ### Accessibility
      - Uses native <button>
      - Focus ring: 2px var(--color-focus-ring)
      - Loading announces via aria-busy

      ### Storybook
      Link: /storybook/?path=/docs/components-button

  from_ui_design:
    expects:
      - Figma component with all states
      - Color specs in token-compatible format
      - Spacing measurements on 8px grid
      - Typography specs matching type scale
    validation: |
      Before accepting design:
      - [ ] All states designed (hover, focus, disabled, etc.)
      - [ ] Colors exist in token system or need to be added
      - [ ] Spacing uses 8px increments
      - [ ] Typography uses existing scale
      - [ ] Accessibility considered (contrast, focus)
