id: monte-carlo-collaboration
skill: monte-carlo
version: 1.0.0

receives_from:
  - skill: physics-simulation
    context: "Monte Carlo for physics model uncertainty"
    receives:
      - "Physics model to sample"
      - "Parameter distributions"
    provides: "Uncertainty bounds on simulation outputs"

  - skill: digital-twin
    context: "Probabilistic twin predictions"
    receives:
      - "Twin model with uncertain parameters"
      - "Sensor data distributions"
    provides: "Confidence intervals on predictions"

  - skill: statistical-analysis
    context: "Bayesian inference"
    receives:
      - "Likelihood functions"
      - "Prior distributions"
    provides: "Posterior samples via MCMC"

delegation_triggers:
  - trigger: "physics|dynamics|FEM"
    delegate_to: physics-simulation
    context: "Physical model to run through MC"

  - trigger: "digital twin|sensor data|real-time"
    delegate_to: digital-twin
    context: "Twin uncertainty quantification"

  - trigger: "Bayesian|posterior|inference"
    delegate_to: statistical-analysis
    context: "Statistical inference from MC samples"

  - trigger: "agent|population|behavior"
    delegate_to: agent-based-modeling
    context: "Stochastic agent simulation"

  - trigger: "option|pricing|finance"
    delegate_to: quantitative-finance
    context: "Financial Monte Carlo"

feedback_loops:
  receives_feedback_from:
    - skill: physics-simulation
      signal: "Single model run is expensive"
      action: "Use variance reduction, surrogate models, or fewer samples"

    - skill: statistical-analysis
      signal: "Posterior is multimodal"
      action: "Use parallel tempering or multiple chains from different starts"

  sends_feedback_to:
    - skill: physics-simulation
      signal: "Sensitivity analysis results"
      action: "Focus modeling effort on high-sensitivity parameters"

    - skill: digital-twin
      signal: "Prediction uncertainty bounds"
      action: "Use for decision-making and risk assessment"

common_combinations:
  - name: Uncertainty Quantification
    skills:
      - monte-carlo
      - physics-simulation
    workflow: |
      1. Define input parameter distributions
      2. Generate samples (Latin Hypercube or Sobol)
      3. Run physics model for each sample
      4. Compute output statistics
      5. Global sensitivity analysis (Sobol indices)
      6. Report uncertainty bounds

  - name: Bayesian Calibration
    skills:
      - monte-carlo
      - physics-simulation
      - statistical-analysis
    workflow: |
      1. Define prior on model parameters
      2. Define likelihood (model vs data)
      3. Run MCMC to sample posterior
      4. Check convergence (R-hat, ESS)
      5. Compute posterior predictive
      6. Validate against held-out data

  - name: Reliability Analysis
    skills:
      - monte-carlo
      - physics-simulation
    workflow: |
      1. Define failure criterion
      2. Identify uncertain inputs
      3. Use importance sampling or subset simulation
      4. Estimate failure probability
      5. Sensitivity analysis on failure
      6. Report with confidence bounds

  - name: Financial Risk Assessment
    skills:
      - monte-carlo
      - quantitative-finance
    workflow: |
      1. Model asset price dynamics
      2. Calibrate to market data
      3. Simulate price paths
      4. Compute VaR and CVaR
      5. Stress testing scenarios
      6. Risk aggregation

  - name: Stochastic Optimization
    skills:
      - monte-carlo
      - agent-based-modeling
    workflow: |
      1. Define objective with uncertainty
      2. Sample uncertain parameters
      3. Optimize expected value or risk measure
      4. Sample average approximation
      5. Validate solution robustness
      6. Sensitivity to assumptions

ecosystem:
  sampling_methods:
    - "Simple Random - Baseline, O(1/sqrt(N))"
    - "Latin Hypercube - Better coverage"
    - "Sobol/Halton - QMC, O(1/N) for smooth functions"
    - "Importance - Focus on important regions"
    - "MCMC - Arbitrary distributions"

  convergence_diagnostics:
    - "Gelman-Rubin R-hat - Multi-chain convergence"
    - "Effective Sample Size - Autocorrelation correction"
    - "Trace plots - Visual convergence check"
    - "Geweke test - Stationarity test"

  variance_reduction:
    - "Antithetic variates - Negative correlation"
    - "Control variates - Known-mean auxiliary"
    - "Stratified sampling - Partition domain"
    - "Importance sampling - Non-uniform sampling"

  parallel_computing:
    - "Embarrassingly parallel - Independent samples"
    - "Parallel chains - Multiple MCMC chains"
    - "Parallel tempering - Exchange between temperatures"
    - "GPU sampling - Vectorized random numbers"

references:
  implementations:
    - "PyMC - Probabilistic programming"
    - "Stan - High-performance MCMC"
    - "emcee - Ensemble sampler"
    - "SALib - Sensitivity analysis"

  tutorials:
    - "Bayesian Methods for Hackers"
    - "Think Bayes - Allen Downey"
    - "Stan User Guide"

  papers:
    - "MCMC Using Hamiltonian Dynamics - Neal"
    - "No-U-Turn Sampler - Hoffman & Gelman"
    - "Adaptive MCMC - Andrieu & Thoms"
