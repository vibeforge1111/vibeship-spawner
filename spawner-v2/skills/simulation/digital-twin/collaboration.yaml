id: digital-twin-collaboration
skill: digital-twin
version: 1.0.0

receives_from:
  - skill: physics-simulation
    context: "Physics engine for twin simulation"
    receives:
      - "Calibrated physics models"
      - "Numerical integration methods"
    provides: "Real-time state prediction and validation"

  - skill: sensor-fusion
    context: "Multi-sensor state estimation"
    receives:
      - "Kalman filter implementations"
      - "Sensor fusion algorithms"
    provides: "Twin state from fused sensor data"

  - skill: embedded-systems
    context: "Edge device deployment"
    receives:
      - "Microcontroller platforms"
      - "Real-time constraints"
    provides: "Edge twin components with local processing"

delegation_triggers:
  - trigger: "physics model|simulation|dynamics"
    delegate_to: physics-simulation
    context: "Need physics-based prediction model"

  - trigger: "kalman|sensor fusion|EKF|UKF"
    delegate_to: sensor-fusion
    context: "Need sensor fusion for state estimation"

  - trigger: "edge|embedded|MCU|real-time"
    delegate_to: embedded-systems
    context: "Need edge deployment"

  - trigger: "control|MPC|PID|setpoint"
    delegate_to: control-systems
    context: "Twin-based control optimization"

  - trigger: "uncertainty|confidence|probabilistic"
    delegate_to: monte-carlo
    context: "Need uncertainty quantification"

  - trigger: "MQTT|OPC UA|Modbus|protocol"
    delegate_to: backend
    context: "Industrial protocol integration"

feedback_loops:
  receives_feedback_from:
    - skill: physics-simulation
      signal: "Model predictions diverge from sensor data"
      action: "Trigger model recalibration, adjust parameters"

    - skill: sensor-fusion
      signal: "Sensor quality degraded"
      action: "Reduce state confidence, use model prediction more"

    - skill: embedded-systems
      signal: "Edge compute insufficient"
      action: "Move processing to fog/cloud, reduce local fidelity"

  sends_feedback_to:
    - skill: physics-simulation
      signal: "Real sensor data available"
      action: "Use for model validation and calibration"

    - skill: control-systems
      signal: "Predicted future state"
      action: "Use for predictive control, MPC optimization"

    - skill: sensor-fusion
      signal: "Sensor anomaly detected"
      action: "Cross-validate with physics model predictions"

common_combinations:
  - name: Smart Factory Twin
    skills:
      - digital-twin
      - sensor-fusion
      - control-systems
      - backend
    workflow: |
      1. Deploy sensors on factory equipment
      2. Build physics models for each asset type
      3. Implement sensor fusion for state estimation
      4. Create fleet-wide twin registry
      5. Add predictive maintenance algorithms
      6. Integrate with MES/ERP systems

  - name: Building Energy Twin
    skills:
      - digital-twin
      - physics-simulation
      - control-systems
    workflow: |
      1. Model building thermal dynamics
      2. Integrate HVAC sensor network
      3. Create room-by-room twins
      4. Implement comfort vs energy optimization
      5. Add weather prediction integration
      6. Deploy predictive control

  - name: Vehicle Fleet Twin
    skills:
      - digital-twin
      - sensor-fusion
      - monte-carlo
    workflow: |
      1. Create vehicle dynamics model
      2. Integrate telematics data
      3. Build individual vehicle twins
      4. Implement battery/engine health prediction
      5. Fleet-wide analytics and optimization
      6. Predictive maintenance scheduling

  - name: Process Industry Twin
    skills:
      - digital-twin
      - physics-simulation
      - control-systems
      - agent-based-modeling
    workflow: |
      1. Model process thermodynamics
      2. Integrate DCS/SCADA data
      3. Build unit operation twins
      4. Connect in process flow graph
      5. Implement soft sensors
      6. Add optimization layer

ecosystem:
  deployment_patterns:
    - "Edge-only - Low latency, offline capable"
    - "Cloud-only - Central analytics, easy updates"
    - "Hybrid - Edge for control, cloud for analytics"
    - "Federated - Distributed twins with sync"

  data_architectures:
    - "Time-series DB (InfluxDB, TimescaleDB)"
    - "Event sourcing (Kafka, Pulsar)"
    - "Graph DB for relationships (Neo4j)"
    - "Object storage for models (S3, MinIO)"

  visualization:
    - "Grafana - Time-series dashboards"
    - "Unity/Unreal - 3D visualization"
    - "NVIDIA Omniverse - Photorealistic twins"
    - "Three.js - Web-based 3D"

  integration_standards:
    - "FMI/FMU - Model exchange"
    - "OPC UA - Industrial communication"
    - "DTDL - Digital Twin Definition Language"
    - "WoT - Web of Things"

references:
  implementations:
    - "Azure Digital Twins SDK"
    - "Eclipse Ditto"
    - "Siemens Industrial Edge"
    - "AWS IoT Greengrass"

  papers:
    - "Digital Twin in Industry - Tao et al."
    - "A Review of Digital Twin - Jones et al."
    - "Physics-Informed Machine Learning for Digital Twins"

  courses:
    - "Coursera: IoT and Digital Twins"
    - "edX: Industry 4.0 Digital Twin"
    - "NVIDIA: Omniverse for Digital Twins"
