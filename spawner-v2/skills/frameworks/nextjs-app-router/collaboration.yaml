id: nextjs-app-router-collaboration
skill: nextjs-app-router
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: frontend
    context: "Frontend needs Next.js implementation"
    receives:
      - "Feature requirements"
      - "Component designs"
      - "Interaction patterns"
    provides: "Next.js pages and components"

  - skill: product-strategy
    context: "Product needs Next.js app"
    receives:
      - "Product requirements"
      - "Feature specs"
      - "User flows"
    provides: "Next.js application"

  - skill: ui-design
    context: "Design needs Next.js execution"
    receives:
      - "Design specs"
      - "Component library"
      - "Responsive layouts"
    provides: "Implemented UI"

  - skill: react-patterns
    context: "React patterns need Next.js context"
    receives:
      - "Component patterns"
      - "State management"
      - "Performance needs"
    provides: "Next.js-specific implementations"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "database|supabase|prisma|data"
    delegate_to: supabase-backend
    pattern: sequential
    context: "Next.js needs database"
    handoff_data:
      - "Data requirements"
      - "Schema needs"
      - "Server actions"
    receive: "Database layer"

  - trigger: "auth|login|session|authentication"
    delegate_to: nextjs-supabase-auth
    pattern: sequential
    context: "Next.js needs auth"
    handoff_data:
      - "Auth requirements"
      - "Session needs"
      - "Protected routes"
    receive: "Auth implementation"

  - trigger: "style|css|tailwind|design"
    delegate_to: tailwind-ui
    pattern: parallel
    context: "Next.js needs styling"
    handoff_data:
      - "Component styles"
      - "Theme requirements"
      - "Dark mode"
    receive: "Tailwind styles"

  - trigger: "deploy|vercel|production"
    delegate_to: vercel-deployment
    pattern: sequential
    context: "Next.js needs deployment"
    handoff_data:
      - "Environment config"
      - "Build settings"
      - "Preview deployments"
    receive: "Deployment config"

  - trigger: "type|typescript|types"
    delegate_to: typescript-strict
    pattern: parallel
    context: "Next.js needs types"
    handoff_data:
      - "Component types"
      - "API types"
      - "Server action types"
    receive: "Type definitions"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: supabase-backend
      signal: "Database constraints"
      action: "Adjust server components"

    - skill: vercel-deployment
      signal: "Build constraints"
      action: "Optimize for Vercel"

    - skill: react-patterns
      signal: "Component patterns"
      action: "Apply in Next.js context"

  sends_feedback_to:
    - skill: frontend
      signal: "Next.js patterns"
      action: "Inform architecture"

    - skill: react-patterns
      signal: "Server component patterns"
      action: "Extend patterns"

    - skill: product-strategy
      signal: "Implementation reality"
      action: "Scope features"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Edge Computing
    insight: |
      Edge experts know latency:
      - Compute close to users
      - Cache aggressively
      - Stream responses
      - Minimize round trips
      Next.js leverages edge principles.
    applies_when: "Optimizing for performance"

  - domain: Progressive Enhancement
    insight: |
      PE experts know resilience:
      - Works without JavaScript
      - Enhances with JavaScript
      - Server renders first
      - Client hydrates selectively
      Server components follow PE principles.
    applies_when: "Building robust applications"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Next.js Full Stack
    skills:
      - nextjs-app-router
      - supabase-backend
      - nextjs-supabase-auth
      - tailwind-ui
    workflow: |
      1. Auth setup (nextjs-supabase-auth)
      2. Database design (supabase-backend)
      3. Page implementation (nextjs-app-router)
      4. Styling (tailwind-ui)

  - name: Next.js Deploy
    skills:
      - nextjs-app-router
      - vercel-deployment
      - devops
    workflow: |
      1. Build optimization (nextjs-app-router)
      2. Deploy config (vercel-deployment)
      3. Monitoring setup (devops)
