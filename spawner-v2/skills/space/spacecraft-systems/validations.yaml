validations:

  - id: no-wheel-redundancy
    name: Reaction Wheels Without Redundancy
    severity: error
    type: regex
    pattern:
      - "wheels\\s*=\\s*3(?!.*redundan)"
      - "n_wheels.*=.*3[^0-9]"
      - "ReactionWheel.*\\[.*\\].*len.*==.*3"
    message: "Only 3 reaction wheels - no redundancy for 3-axis control"
    fix_action: "Use 4 wheels minimum for 3-axis control with redundancy"
    applies_to:
      - "**/*.py"

  - id: no-momentum-dumping
    name: Missing Momentum Dumping Strategy
    severity: warning
    type: regex
    pattern:
      - "reaction_wheel(?!.*desaturat|dump|unload)"
      - "wheel_momentum(?!.*limit|max)"
      - "adcs_design(?!.*magnetorquer|thruster)"
    message: "ADCS design may lack momentum dumping capability"
    fix_action: "Plan magnetorquer or thruster desaturation"
    applies_to:
      - "**/*.py"

  - id: high-dod-battery
    name: Battery DOD Too High
    severity: error
    type: regex
    pattern:
      - "dod.*=.*0\\.[7-9]"
      - "depth_of_discharge.*>.*0\\.5"
      - "battery.*80.*percent"
    message: "Battery DOD > 50% significantly reduces cycle life"
    fix_action: "Design for 30% DOD for long mission life"
    applies_to:
      - "**/*.py"

  - id: no-eol-degradation
    name: Power Sizing Without EOL Degradation
    severity: warning
    type: regex
    pattern:
      - "solar.*power(?!.*degradation|eol)"
      - "array.*output(?!.*years)"
      - "panel_power.*=(?!.*\\*.*0\\.[89])"
    message: "Solar array sizing may not account for EOL degradation"
    fix_action: "Apply 2-3%/year degradation for mission lifetime"
    applies_to:
      - "**/*.py"

  - id: no-safe-mode
    name: Missing Safe Mode Definition
    severity: error
    type: regex
    pattern:
      - "adcs.*mode(?!.*safe)"
      - "spacecraft.*state(?!.*safe)"
      - "fault.*response(?!.*safe)"
    message: "Spacecraft design may lack autonomous safe mode"
    fix_action: "Define safe mode for sun-pointing and minimum power"
    applies_to:
      - "**/*.py"
      - "**/*.yaml"

  - id: no-thermal-limits
    name: Components Without Thermal Limits
    severity: warning
    type: regex
    pattern:
      - "ThermalNode\\((?!.*temp_min)"
      - "component(?!.*temperature.*limit)"
      - "thermal.*model(?!.*min|max)"
    message: "Thermal model may not define component temperature limits"
    fix_action: "Define allowable temperature range for all components"
    applies_to:
      - "**/*.py"

  - id: no-link-margin
    name: Link Budget Without Margin Check
    severity: error
    type: regex
    pattern:
      - "link_budget(?!.*margin)"
      - "eb_n0(?!.*required)"
      - "snr(?!.*threshold)"
    message: "Link budget may not verify adequate margin"
    fix_action: "Require 3+ dB margin over required Eb/N0"
    applies_to:
      - "**/*.py"

  - id: single-star-tracker
    name: Single Star Tracker Design
    severity: warning
    type: regex
    pattern:
      - "star_tracker.*=.*1"
      - "n_trackers.*=.*1"
      - "single.*star.*tracker"
    message: "Single star tracker provides no redundancy"
    fix_action: "Use 2+ star trackers with different boresights"
    applies_to:
      - "**/*.py"
