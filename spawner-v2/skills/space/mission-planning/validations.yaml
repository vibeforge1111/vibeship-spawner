validations:

  - id: no-backup-launch-window
    name: Single Launch Window Defined
    severity: error
    type: regex
    pattern:
      - "launch_window\\s*=(?!.*backup)"
      - "single.*launch.*opportunity"
      - "window.*=.*\\[.*\\](?!.*,.*,)"
    message: "Only one launch window defined - identify backup opportunities"
    fix_action: "Calculate and document backup launch windows"
    applies_to:
      - "**/*.py"
      - "**/*.yaml"

  - id: no-mass-margin
    name: Mass Budget Without Margin
    severity: error
    type: regex
    pattern:
      - "mass_budget(?!.*margin)"
      - "total_mass.*=.*(?!.*contingency)"
      - "dry_mass\\s*\\+\\s*propellant(?!.*reserve)"
    message: "Mass budget may lack contingency margin"
    fix_action: "Add 20%+ mass margin for early phase, 10% for CDR"
    applies_to:
      - "**/*.py"

  - id: no-delta-v-margin
    name: Delta-V Budget Without Margin
    severity: error
    type: regex
    pattern:
      - "delta_v.*total(?!.*margin)"
      - "propellant.*=.*calculate(?!.*reserve)"
      - "maneuver_budget(?!.*contingency)"
    message: "Delta-v budget may lack margin for errors and contingencies"
    fix_action: "Add 10-20% delta-v margin to budget"
    applies_to:
      - "**/*.py"

  - id: no-disposal-plan
    name: Missing Disposal Planning
    severity: warning
    type: regex
    pattern:
      - "mission.*timeline(?!.*disposal)"
      - "phases.*=.*\\[(?!.*disposal|deorbit)"
      - "end_of_life(?!.*deorbit|graveyard)"
    message: "Mission may lack end-of-life disposal planning"
    fix_action: "Plan deorbit (LEO) or graveyard orbit (GEO) disposal"
    applies_to:
      - "**/*.py"
      - "**/*.yaml"

  - id: optimistic-isp
    name: Possibly Optimistic Isp Value
    severity: warning
    type: regex
    pattern:
      - "isp.*=.*[4-9][0-9][0-9](?!.*electric|ion|hall)"
      - "specific_impulse.*>.*400"
    message: "High Isp value - verify propulsion type supports this"
    fix_action: "Verify Isp matches propulsion type (chemical ~300s, electric ~3000s)"
    applies_to:
      - "**/*.py"

  - id: missing-phase-definition
    name: Incomplete Mission Phase Definition
    severity: warning
    type: regex
    pattern:
      - "phases.*=.*\\[(?!.*launch)"
      - "timeline(?!.*commission|checkout)"
      - "mission.*plan(?!.*contingency)"
    message: "Mission phases may be incomplete"
    fix_action: "Define all phases: launch, commissioning, ops, disposal"
    applies_to:
      - "**/*.py"
      - "**/*.yaml"

  - id: no-redundancy-check
    name: Critical System Without Redundancy Analysis
    severity: info
    type: regex
    pattern:
      - "critical.*system(?!.*redundan)"
      - "single.*point(?!.*failure)"
      - "FMECA(?!.*complete)"
    message: "Critical systems should have redundancy analysis"
    fix_action: "Perform FMECA and add redundancy for critical functions"
    applies_to:
      - "**/*.py"
      - "**/*.md"
