# GraphQL Architect Collaboration Model
# How this skill works with other specialists

prerequisites:
  skills: []
  knowledge:
    - "API design fundamentals"
    - "Understanding of client-server architecture"
    - "Basic database concepts"
    - "JavaScript/TypeScript familiarity"

complementary_skills:
  - skill: api-designer
    relationship: "API strategy"
    brings: "REST patterns, API versioning, documentation"

  - skill: backend
    relationship: "Server implementation"
    brings: "Framework setup, middleware, authentication"

  - skill: frontend
    relationship: "Client consumption"
    brings: "Apollo Client, React Query, caching strategies"

  - skill: database-design
    relationship: "Data layer"
    brings: "Schema design, query optimization, indexes"

  - skill: performance-hunter
    relationship: "Query performance"
    brings: "Profiling, caching, optimization"

  - skill: security-analyst
    relationship: "API security"
    brings: "Authorization, rate limiting, vulnerability analysis"

delegation:
  - trigger: "REST API needed"
    delegate_to: api-designer
    pattern: parallel
    context: "Endpoints that work better as REST"
    receive: "REST endpoint design"

  - trigger: "server setup"
    delegate_to: backend
    pattern: sequential
    context: "GraphQL server requirements"
    receive: "Framework configuration, middleware"

  - trigger: "client integration"
    delegate_to: frontend
    pattern: parallel
    context: "GraphQL schema, query patterns"
    receive: "Client implementation, caching setup"

  - trigger: "database design"
    delegate_to: database-design
    pattern: sequential
    context: "Data requirements from schema"
    receive: "Database schema, indexes, migrations"

  - trigger: "performance issues"
    delegate_to: performance-hunter
    pattern: parallel
    context: "Slow queries, resolver bottlenecks"
    receive: "Optimization recommendations"

  - trigger: "security review"
    delegate_to: security-analyst
    pattern: sequential
    context: "Query limits, authorization rules"
    receive: "Security configuration, audit results"

collaboration_patterns:
  sequential:
    - "I design schema, then database-design creates tables"
    - "I define types, then frontend generates TypeScript"
    - "I implement resolvers, then security-analyst reviews"

  parallel:
    - "I design schema while backend sets up server"
    - "I write resolvers while frontend builds components"
    - "I optimize queries while performance-hunter profiles"

  review:
    - "Review database-design's schema for query efficiency"
    - "Review frontend's client queries for patterns"
    - "Review security-analyst's authorization rules"

cross_domain_insights:
  - domain: distributed-systems
    insight: "Federation trades simplicity for team independence"
    applies_when: "Deciding monolith vs federated graph"

  - domain: caching
    insight: "GraphQL caching is hard - normalize or bust"
    applies_when: "Designing client caching strategy"

  - domain: security
    insight: "GraphQL's flexibility is also its attack surface"
    applies_when: "Designing public APIs"

  - domain: domain-driven-design
    insight: "Schema should model domain, not database"
    applies_when: "Designing types and relationships"

  - domain: api-design
    insight: "Breaking changes in GraphQL are harder to version than REST"
    applies_when: "Evolving schema over time"

ecosystem:
  primary_tools:
    - "Apollo Server - Production GraphQL server"
    - "GraphQL Codegen - Type generation"
    - "DataLoader - N+1 prevention"
    - "graphql-shield - Authorization"
    - "Apollo Federation - Microservices"
    - "Pothos - TypeScript-first schema builder"

  alternatives:
    - name: GraphQL Yoga
      use_when: "Want simpler, framework-agnostic server"
      avoid_when: "Need Apollo ecosystem integrations"

    - name: Nexus
      use_when: "Code-first schema with plugins"
      avoid_when: "Prefer schema-first approach"

    - name: Hasura
      use_when: "Want instant GraphQL from database"
      avoid_when: "Need custom business logic in resolvers"

    - name: Relay
      use_when: "Facebook-style apps with complex caching"
      avoid_when: "Simpler apps (use Apollo Client)"

    - name: URQL
      use_when: "Lightweight alternative to Apollo Client"
      avoid_when: "Need full Apollo ecosystem"

  deprecated:
    - "graphql-tools v7 and below (use v8+)"
    - "Apollo Server v3 (use v4)"
    - "Manual type definitions (use codegen)"
    - "No DataLoader (always use batching)"
    - "Exposing database schema directly"
