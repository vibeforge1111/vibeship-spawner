id: code-architecture-review-collaboration
skill: code-architecture-review
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: backend
    context: "Backend needs architecture review"
    receives:
      - "Service design"
      - "Data models"
      - "API structure"
    provides: "Architecture feedback"

  - skill: frontend
    context: "Frontend needs architecture review"
    receives:
      - "Component structure"
      - "State management"
      - "Module organization"
    provides: "Architecture recommendations"

  - skill: technical-debt-strategy
    context: "Debt needs assessment"
    receives:
      - "Codebase structure"
      - "Problem areas"
      - "Refactoring candidates"
    provides: "Architecture analysis"

  - skill: code-review
    context: "PR needs architectural review"
    receives:
      - "Code changes"
      - "Design decisions"
      - "Impact scope"
    provides: "Architectural feedback"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "refactor|cleanup|organize"
    delegate_to: code-cleanup
    pattern: sequential
    context: "Architecture needs cleanup"
    handoff_data:
      - "Problem areas"
      - "Target structure"
      - "Priority modules"
    receive: "Clean code"

  - trigger: "test|coverage|quality"
    delegate_to: qa-engineering
    pattern: parallel
    context: "Architecture needs testing"
    handoff_data:
      - "Test boundaries"
      - "Integration points"
      - "Mock requirements"
    receive: "Test strategy"

  - trigger: "implement|build|code"
    delegate_to: backend
    pattern: sequential
    context: "Architecture needs implementation"
    handoff_data:
      - "Design patterns"
      - "Module boundaries"
      - "Interface contracts"
    receive: "Implementation"

  - trigger: "type|typescript|safety"
    delegate_to: typescript-strict
    pattern: parallel
    context: "Architecture needs types"
    handoff_data:
      - "Type requirements"
      - "Interface definitions"
      - "Generic patterns"
    receive: "Type system"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: code-cleanup
      signal: "Cleanup discoveries"
      action: "Update recommendations"

    - skill: backend
      signal: "Implementation constraints"
      action: "Adjust architecture"

    - skill: qa-engineering
      signal: "Testing challenges"
      action: "Improve testability"

  sends_feedback_to:
    - skill: technical-debt-strategy
      signal: "Debt assessment"
      action: "Prioritize fixes"

    - skill: code-review
      signal: "Architectural patterns"
      action: "Guide reviews"

    - skill: backend
      signal: "Design improvements"
      action: "Refactor approach"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Building Architecture
    insight: |
      Architects know structure:
      - Foundations support everything
      - Load-bearing walls can't move
      - Modularity enables renovation
      - Plans before construction
      Code architecture follows building principles.
    applies_when: "Designing system structure"

  - domain: City Planning
    insight: |
      Planners know growth:
      - Zoning prevents chaos
      - Infrastructure enables growth
      - Paths shape behavior
      - Flexibility for change
      Codebase growth follows urban patterns.
    applies_when: "Planning for scale"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Architecture Overhaul
    skills:
      - code-architecture-review
      - technical-debt-strategy
      - code-cleanup
      - backend
    workflow: |
      1. Assessment (code-architecture-review)
      2. Debt prioritization (technical-debt-strategy)
      3. Cleanup execution (code-cleanup)
      4. Implementation (backend)

  - name: PR Architecture Review
    skills:
      - code-architecture-review
      - code-review
      - typescript-strict
    workflow: |
      1. Architecture check (code-architecture-review)
      2. Type review (typescript-strict)
      3. Code review (code-review)
