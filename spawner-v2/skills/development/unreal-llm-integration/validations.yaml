# Unreal Engine LLM Integration Validations

validations:
  - id: ue-sync-http
    name: Synchronous HTTP Request
    severity: critical
    type: regex
    pattern: 'BlockingRequest|WaitForCompletion|GetContent.*while'
    message: "Synchronous HTTP detected. Will block game thread and cause hitching."
    fix_action: "Use FHttpModule async with OnProcessRequestComplete delegate"
    applies_to:
      - "*.cpp"
      - "*.h"

  - id: ue-gamethread-json
    name: JSON Parsing on Game Thread
    severity: high
    type: regex
    pattern: 'TJsonReader|FJsonSerializer::Deserialize'
    negative_pattern: 'AsyncTask|BackgroundTask|FRunnable'
    message: "JSON parsing may block game thread. Consider async parsing for large responses."
    fix_action: "Parse JSON in async task, return result to game thread"
    applies_to:
      - "*.cpp"

  - id: ue-no-network-check
    name: No Network Availability Check
    severity: high
    type: regex
    pattern: 'ProcessRequest|HttpRequest'
    negative_pattern: 'IsNetworkAvailable|IsConnected|HasNetworkConnection'
    message: "HTTP request without network check. Will fail on offline consoles."
    fix_action: "Check network availability, provide offline fallback"
    applies_to:
      - "*.cpp"

  - id: ue-no-timeout
    name: HTTP Request Without Timeout
    severity: high
    type: regex
    pattern: 'CreateRequest|ProcessRequest'
    negative_pattern: 'SetTimeout|Timeout'
    message: "HTTP request without timeout. May hang indefinitely."
    fix_action: "Set request timeout: Request->SetTimeout(5.0f)"
    applies_to:
      - "*.cpp"

  - id: ue-hardcoded-api-key
    name: Hardcoded API Key
    severity: critical
    type: regex
    pattern: 'sk-[a-zA-Z0-9]{20,}|api[_-]?key.*=.*"[a-zA-Z0-9]+'
    message: "Hardcoded API key. Will be exposed in packaged game."
    fix_action: "Use runtime configuration or secure key management"
    applies_to:
      - "*.cpp"
      - "*.h"

  - id: ue-no-error-handling
    name: No HTTP Error Handling
    severity: warning
    type: regex
    pattern: 'OnProcessRequestComplete'
    negative_pattern: 'bWasSuccessful|IsValid|GetResponseCode'
    message: "HTTP callback without error checking. Failed requests not handled."
    fix_action: "Check bWasSuccessful and response code before processing"
    applies_to:
      - "*.cpp"
