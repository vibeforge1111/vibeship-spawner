# Rust Craftsman Collaboration Model
# How this skill works with other specialists

prerequisites:
  skills: []
  knowledge:
    - "Basic programming concepts (variables, functions, control flow)"
    - "Understanding of memory management concepts"
    - "Familiarity with command line tools"
    - "Basic understanding of types and generics"

complementary_skills:
  - skill: backend
    relationship: "Web framework and HTTP services"
    brings: "Actix, Axum, Rocket framework patterns"

  - skill: performance-hunter
    relationship: "Performance optimization and profiling"
    brings: "Profiling tools, optimization strategies, benchmarks"

  - skill: api-designer
    relationship: "API design and documentation"
    brings: "OpenAPI specs, API patterns, versioning"

  - skill: devops
    relationship: "Deployment and infrastructure"
    brings: "Docker configs, CI/CD pipelines, release automation"

  - skill: test-architect
    relationship: "Testing strategies"
    brings: "Test patterns, property testing, integration tests"

  - skill: security-analyst
    relationship: "Security auditing"
    brings: "Dependency audits, unsafe code review, CVE tracking"

delegation:
  - trigger: "need web server"
    delegate_to: backend
    pattern: sequential
    context: "Rust project structure, async runtime choice"
    receive: "Framework setup, routing, middleware patterns"

  - trigger: "performance bottleneck"
    delegate_to: performance-hunter
    pattern: parallel
    context: "Code sections to profile, expected throughput"
    receive: "Flame graphs, optimization recommendations"

  - trigger: "API design"
    delegate_to: api-designer
    pattern: sequential
    context: "Service domain, data models"
    receive: "OpenAPI spec, endpoint design, error schemas"

  - trigger: "deployment setup"
    delegate_to: devops
    pattern: sequential
    context: "Binary size constraints, runtime requirements"
    receive: "Dockerfile, CI pipeline, release process"

  - trigger: "testing strategy"
    delegate_to: test-architect
    pattern: parallel
    context: "Async code, property testing needs"
    receive: "Test structure, proptest patterns, mock strategies"

  - trigger: "security review"
    delegate_to: security-analyst
    pattern: sequential
    context: "Unsafe blocks, FFI boundaries, dependencies"
    receive: "Security audit, CVE analysis, remediation"

collaboration_patterns:
  sequential:
    - "I design data structures, then api-designer designs the API surface"
    - "I implement core logic, then test-architect designs test strategy"
    - "I write unsafe code, then security-analyst reviews invariants"

  parallel:
    - "I implement features while devops sets up CI"
    - "I optimize hot paths while performance-hunter profiles"
    - "I write code while test-architect writes tests"

  review:
    - "Review security-analyst findings for unsafe blocks"
    - "Review performance-hunter recommendations for async patterns"
    - "Review api-designer specs for serialization alignment"

cross_domain_insights:
  - domain: compiler-theory
    insight: "The borrow checker is a simplified region-based type system"
    applies_when: "Understanding why certain patterns work or don't"

  - domain: systems-design
    insight: "Ownership maps to resource management patterns (RAII)"
    applies_when: "Designing resource cleanup and lifecycle"

  - domain: concurrency-theory
    insight: "Send+Sync is a capability system for thread safety"
    applies_when: "Understanding async and thread safety"

  - domain: performance-engineering
    insight: "Zero-cost abstractions enable high-level code with low-level speed"
    applies_when: "Choosing between abstraction and performance"

  - domain: formal-methods
    insight: "Rust's type system proves absence of data races at compile time"
    applies_when: "Justifying Rust for safety-critical systems"

ecosystem:
  primary_tools:
    - "cargo - Build system and package manager"
    - "rustfmt - Code formatter"
    - "clippy - Linter with advanced warnings"
    - "rust-analyzer - Language server for IDEs"
    - "miri - Undefined behavior detector"
    - "cargo-audit - Security vulnerability scanner"

  alternatives:
    - name: tokio
      use_when: "High-performance async runtime with full ecosystem"
      avoid_when: "Single-threaded or simple CLI tools"

    - name: async-std
      use_when: "Simpler async runtime with std-like API"
      avoid_when: "Need advanced features like spawn_blocking"

    - name: rayon
      use_when: "Parallel iterators for CPU-bound work"
      avoid_when: "I/O-bound work (use async instead)"

    - name: crossbeam
      use_when: "Advanced concurrent data structures"
      avoid_when: "Simple channel needs (use std::sync::mpsc)"

    - name: serde
      use_when: "Serialization/deserialization (always)"
      avoid_when: "Almost never - serde is the standard"

  deprecated:
    - "failure crate - use thiserror + anyhow instead"
    - "tokio 0.1/0.2 - use tokio 1.x"
    - "actix-web 2.x - use actix-web 4.x"
    - "hyper 0.13 - use hyper 1.x"
    - "futures 0.1 - use futures 0.3/std::future"
