# Cursor AI Validations

validations:
  - id: cursorrules-in-wrong-location
    name: Cursorrules File in Wrong Location
    severity: high
    type: filepath
    pattern: 'src/\.cursorrules|\.cursor/rules\.mdc|cursorrules\.md'
    message: ".cursorrules must be in project root, or use .cursor/rules/*.mdc"
    fix_action: "Move to project root or .cursor/rules/ directory"
    applies_to:
      - "**/.cursorrules"
      - "**/*.mdc"

  - id: mdc-missing-frontmatter
    name: MDC File Without Frontmatter
    severity: high
    type: regex
    pattern: '^[^-]|^-[^-]'
    message: ".mdc files require YAML frontmatter with description and globs"
    fix_action: "Add frontmatter: ---\ndescription: ...\nglobs: [...]\n---"
    applies_to:
      - ".cursor/rules/*.mdc"

  - id: overly-broad-glob
    name: Glob Pattern Too Broad
    severity: medium
    type: regex
    pattern: 'globs:\s*\[\s*"\*\*\/\*"\s*\]'
    message: "Glob matches all files. Consider more specific patterns to reduce token usage."
    fix_action: "Use specific globs like [\"src/**/*.ts\"] or split into multiple files"
    applies_to:
      - ".cursor/rules/*.mdc"

  - id: cursorrules-too-large
    name: Rules File Exceeds Recommended Size
    severity: medium
    type: line_count
    threshold: 200
    message: "Rules file is very large. Consider splitting into .cursor/rules/*.mdc files."
    fix_action: "Split by concern: core.mdc, testing.mdc, api.mdc"
    applies_to:
      - ".cursorrules"

  - id: dangerous-command-allowed
    name: Dangerous Command Not Blocked in Rules
    severity: medium
    type: regex
    pattern: 'rm -rf|git push.*force|git reset.*hard|DROP TABLE'
    negative_pattern: 'never|forbidden|do not|dont|NEVER'
    message: "Dangerous commands mentioned without explicit prohibition."
    fix_action: "Add to FORBIDDEN or NEVER sections in rules"
    applies_to:
      - ".cursorrules"
      - ".cursor/rules/*.mdc"

  - id: no-tech-stack-defined
    name: Rules Without Tech Stack Context
    severity: low
    type: regex
    pattern: '---\ndescription'
    negative_pattern: 'stack|framework|language|typescript|react|next'
    message: "Rules file doesn't specify tech stack. AI may make wrong assumptions."
    fix_action: "Add Tech Stack section listing frameworks and languages"
    applies_to:
      - ".cursor/rules/core.mdc"
      - ".cursorrules"

  - id: vague-instructions
    name: Vague Instructions in Rules
    severity: low
    type: regex
    pattern: 'write good code|be careful|use best practices|follow standards'
    message: "Vague instructions are ignored. Be specific about what you want."
    fix_action: "Replace with specific, actionable instructions"
    applies_to:
      - ".cursorrules"
      - ".cursor/rules/*.mdc"

  - id: conflicting-rules
    name: Potentially Conflicting Rules
    severity: low
    type: regex
    pattern: '(always|never).*\n.*(always|never)'
    message: "Multiple always/never rules may conflict. Review for consistency."
    fix_action: "Ensure rules don't contradict each other"
    applies_to:
      - ".cursorrules"
      - ".cursor/rules/*.mdc"
