# RAG Implementation Validations

validations:
  - id: rag-no-overlap
    name: Chunks Without Overlap
    severity: warning
    type: regex
    pattern: 'split|chunk'
    negative_pattern: 'overlap|Overlap|sliding'
    message: "Chunking without overlap. Context at boundaries may be lost."
    fix_action: "Add 10-20% overlap between chunks"
    applies_to:
      - "*.ts"
      - "*.js"
      - "*.py"

  - id: rag-fixed-chunk-size
    name: Fixed Chunk Size
    severity: info
    type: regex
    pattern: 'chunk.*size\s*=\s*\d{3,}|split.*\d{3,}'
    negative_pattern: 'semantic|recursive|paragraph'
    message: "Fixed-size chunking may break context. Consider semantic chunking."
    fix_action: "Use semantic or recursive chunking that respects document structure"
    applies_to:
      - "*.ts"
      - "*.js"
      - "*.py"

  - id: rag-no-reranking
    name: No Reranking
    severity: info
    type: regex
    pattern: 'search|retrieve|query'
    negative_pattern: 'rerank|Rerank|score|sort.*relevance'
    message: "Retrieval without reranking. Top-k may not be most relevant."
    fix_action: "Add reranking step to improve retrieval precision"
    applies_to:
      - "*.ts"
      - "*.js"
      - "*.py"

  - id: rag-single-retrieval
    name: Single Retrieval Strategy
    severity: info
    type: regex
    pattern: 'vectorStore\.search|similarity_search'
    negative_pattern: 'hybrid|bm25|keyword|sparse'
    message: "Only using vector search. Hybrid search often performs better."
    fix_action: "Combine dense (vector) and sparse (keyword) retrieval"
    applies_to:
      - "*.ts"
      - "*.js"
      - "*.py"
