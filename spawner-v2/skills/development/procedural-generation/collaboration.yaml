id: procedural-generation-collaboration
skill: procedural-generation
version: 1.0.0

receives_from:
  - skill: game-development
    context: "Game needs procedurally generated content"
    receives:
      - "Content type requirements"
      - "Performance constraints"
      - "Variety expectations"
    provides: "PCG system design and implementation"

  - skill: llm-npc-dialogue
    context: "Dialogue system needs procedural quest generation"
    receives:
      - "Character data"
      - "World context"
      - "Narrative constraints"
    provides: "Generated quests and story hooks"

  - skill: game-ai-behavior-trees
    context: "AI needs procedural scenario generation"
    receives:
      - "AI capability specifications"
      - "Challenge requirements"
    provides: "Procedural encounter design"

delegation_triggers:
  - trigger: "npc|dialogue|conversation"
    delegate_to: llm-npc-dialogue
    pattern: sequential
    context: "Need dialogue content, not content generation"

  - trigger: "behavior tree|ai behavior"
    delegate_to: game-ai-behavior-trees
    pattern: sequential
    context: "Need AI behavior, not content generation"

  - trigger: "unity|c#"
    delegate_to: unity-llm-integration
    pattern: sequential
    context: "Need Unity-specific implementation"

  - trigger: "godot|gdscript"
    delegate_to: godot-llm-integration
    pattern: sequential
    context: "Need Godot-specific implementation"

  - trigger: "unreal|blueprint|ue5"
    delegate_to: unreal-llm-integration
    pattern: sequential
    context: "Need Unreal-specific implementation"

feedback_loops:
  receives_feedback_from:
    - skill: codebase-optimization
      signal: "Generation taking too long"
      action: "Optimize algorithms, add caching, reduce complexity"

    - skill: qa-engineering
      signal: "Unplayable content generated"
      action: "Strengthen validation, add edge case handling"

  sends_feedback_to:
    - skill: game-development
      signal: "PCG constraints and capabilities"
      action: "Inform game design about generation limitations"

    - skill: llm-npc-dialogue
      signal: "Quest structure requirements"
      action: "Define expected LLM output format for quests"

cross_domain_insights:
  - domain: Urban Planning
    insight: |
      Urban planners use procedural modeling for cities:
      - L-systems for road networks
      - Grammar-based building generation
      - Zoning constraints before detail
      City generation can borrow these validated techniques.
    applies_when: "Generating cities, towns, or settlements"

  - domain: Music Composition
    insight: |
      Algorithmic composition uses:
      - Markov chains for melody
      - Constraint satisfaction for harmony
      - Layered generation (structure → phrases → notes)
      Game music and level generation share similar layered approaches.
    applies_when: "Designing multi-layer generation systems"

  - domain: Biology/Evolution
    insight: |
      Genetic algorithms for content evolution:
      - Fitness functions as playability metrics
      - Mutation for variety
      - Selection pressure for quality
      Can evolve levels toward optimal difficulty curves.
    applies_when: "Need adaptive difficulty or content optimization"

  - domain: Architecture
    insight: |
      Architects use parametric design:
      - Strong constraints = coherent output
      - Variation within rules, not random chaos
      - Human judgment for final selection
      Same applies to PCG: constrain first, vary second.
    applies_when: "Designing constraint systems"

common_combinations:
  - name: LLM-Enhanced Level Generation
    skills:
      - procedural-generation
      - llm-npc-dialogue
      - game-development
    workflow: |
      1. LLM generates level theme/concept (procedural-generation + llm integration)
      2. Classical algorithms generate geometry (procedural-generation)
      3. LLM populates narrative elements (llm-npc-dialogue)
      4. Validate and integrate with game (game-development)

  - name: Roguelike Content Pipeline
    skills:
      - procedural-generation
      - game-ai-behavior-trees
      - game-development
    workflow: |
      1. Generate dungeon layout (procedural-generation)
      2. Place enemies with behavior trees (game-ai-behavior-trees)
      3. Balance difficulty (game-development)
      4. Add procedural loot (procedural-generation)

  - name: Open World Generation
    skills:
      - procedural-generation
      - llm-npc-dialogue
      - unity-llm-integration
    workflow: |
      1. Generate terrain and biomes (procedural-generation)
      2. Place points of interest with LLM (llm-npc-dialogue)
      3. Create quest network (procedural-generation + llm)
      4. Implement in Unity (unity-llm-integration)
