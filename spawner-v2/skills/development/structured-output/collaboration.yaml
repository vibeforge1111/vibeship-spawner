id: structured-output-collaboration
skill: structured-output
version: 1.0.0

receives_from:
  - skill: langgraph
    context: "Agent needs structured tool responses"
    receives:
      - "Tool definitions"
      - "Expected output format"
    provides: "Pydantic models for tool outputs"

  - skill: crewai
    context: "Agent tasks need structured outputs"
    receives:
      - "Task expected_output requirements"
      - "Agent tool needs"
    provides: "Structured output configuration"

  - skill: autonomous-agents
    context: "Agent needs reliable outputs"
    receives:
      - "Output requirements"
      - "Parsing needs"
    provides: "Extraction patterns with validation"

delegation_triggers:
  - trigger: "agent|workflow|graph"
    delegate_to: langgraph
    pattern: sequential
    context: "Need agent orchestration"

  - trigger: "crew|team|multi-agent"
    delegate_to: crewai
    pattern: sequential
    context: "Need role-based agents"

  - trigger: "observability|tracing|monitoring"
    delegate_to: langfuse
    pattern: sequential
    context: "Need to monitor extraction quality"

feedback_loops:
  receives_feedback_from:
    - skill: langfuse
      signal: "Extraction success rates"
      action: "Adjust schemas or retry strategy"

    - skill: agent-evaluation
      signal: "Output quality metrics"
      action: "Improve extraction patterns"

  sends_feedback_to:
    - skill: langgraph
      signal: "Pydantic patterns for tools"
      action: "Inform tool schema design"

    - skill: crewai
      signal: "Expected output patterns"
      action: "Improve task definitions"

cross_domain_insights:
  from_domains:
    - domain: api-design
      insight: "Strong typing prevents bugs"
      application: "Use Pydantic for all LLM outputs"

    - domain: data-validation
      insight: "Validate at boundaries"
      application: "Always validate LLM responses before use"

    - domain: compiler-design
      insight: "Constrained grammars are powerful"
      application: "Outlines uses CFG for guaranteed format"

common_combinations:
  - name: Agent with Structured Tools
    skills:
      - structured-output
      - langgraph
    workflow: |
      1. Define Pydantic models for tool outputs
      2. Use instructor in tool implementations
      3. LangGraph agent calls tools with typed responses
      4. Compile and test extraction reliability

  - name: Observable Extraction
    skills:
      - structured-output
      - langfuse
    workflow: |
      1. Set up Instructor with callbacks
      2. Log extraction attempts to Langfuse
      3. Track success rates and retry counts
      4. Optimize schemas based on metrics

  - name: CrewAI with Typed Outputs
    skills:
      - structured-output
      - crewai
    workflow: |
      1. Define Pydantic models for task outputs
      2. Use expected_output with schema descriptions
      3. Post-process crew results with validation
      4. Handle extraction failures gracefully
