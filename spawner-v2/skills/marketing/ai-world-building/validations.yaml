id: ai-world-building-validations
skill: ai-world-building
version: 1.0.0

validations:
  # Critical: Consistency
  - id: world-bible-exists
    name: World building should have documented world bible
    severity: critical
    description: Systematic world building requires documentation
    pattern:
      file_glob: "**/*.{ts,js,py,yaml}"
      match: "world.*build|brand.*universe|character.*system"
      exclude: "bible|document|rules|system"
    message: "World building without world bible. Create systematic documentation first."
    autofix: false

  - id: character-has-reference
    name: Recurring characters should have reference sheets
    severity: high
    description: Characters need visual documentation for consistency
    pattern:
      file_glob: "**/*.{ts,js,py,yaml}"
      match: "character.*generat|create.*character|protagonist|main.*character"
      exclude: "reference|sheet|model|documentation"
    message: "Creating character without reference sheet. Document before generating."
    autofix: false

  # High: Process
  - id: exclusions-defined
    name: World rules should include exclusions
    severity: high
    description: What's NOT in the world is as important as what IS
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "world.*rules|style.*guide|brand.*guidelines"
      exclude: "never|exclude|forbidden|not.*allowed"
    message: "World rules without exclusions. Define what NEVER appears."
    autofix: false

  - id: visual-documentation
    name: World documentation should be visual-first
    severity: high
    description: Visual consistency requires visual documentation
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "world.*bible|style.*guide|brand.*universe"
      exclude: "image|visual|reference|example|screenshot"
    message: "World documentation may lack visuals. Add reference images."
    autofix: false

  - id: tool-agnostic-definition
    name: World should be defined tool-agnostically
    severity: medium
    description: Tool-specific worlds break when tools change
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "(world|universe|brand).*definition"
      exclude: "universal|agnostic|translation|adapter"
    message: "World definition may be tool-specific. Create universal rules with tool translations."
    autofix: false

  # Medium: Quality
  - id: environment-documentation
    name: Key environments should have documentation
    severity: medium
    description: Environments need the same rigor as characters
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "environment|location|setting|scene"
      exclude: "sheet|reference|documentation|rules"
    message: "Environment without documentation. Create environment sheets."
    autofix: false

  - id: prompt-library-exists
    name: World should have prompt library
    severity: medium
    description: Prompts enable consistent generation at scale
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "world.*bible|brand.*system|generation.*rules"
      exclude: "prompt.*library|template|formula"
    message: "World system without prompt library. Create reusable prompts."
    autofix: false

  - id: complexity-tiered
    name: World elements should be tiered by importance
    severity: medium
    description: Flat worlds become too complex to maintain
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "world.*elements|character.*list|asset.*types"
      exclude: "tier|priority|core|extended"
    message: "World elements not tiered. Define core vs extended vs temporary."
    autofix: false

  - id: consistency-testing
    name: World rules should be tested
    severity: medium
    description: Rules need validation before production use
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "world.*rule|style.*guide.*apply"
      exclude: "test|verify|validate|check"
    message: "Applying world rules without testing. Generate test batch first."
    autofix: false

  # Low: Optimization
  - id: version-control
    name: World bible should have version control
    severity: low
    description: Living documents need version tracking
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "world.*bible|brand.*guide"
      exclude: "version|v\\d|date|changelog"
    message: "World bible without versioning. Add version tracking."
    autofix: false

  - id: generation-documentation
    name: Successful generations should be documented
    severity: low
    description: Learning from successes improves future generation
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "generate.*asset|create.*content"
      exclude: "log|document|record|save.*settings"
    message: "Generation without documentation. Log successful approaches."
    autofix: false

  - id: seed-tracking
    name: AI generation should track seeds for reproducibility
    severity: low
    description: Seed tracking enables consistency and iteration
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "midjourney|stable.*diffusion|generate.*image"
      exclude: "seed|reproducible"
    message: "AI generation without seed tracking. Save seeds for consistent results."
    autofix: false

# Pre-commit checks
pre_commit:
  - id: world-bible-exists
  - id: character-has-reference
  - id: exclusions-defined

# CI/CD checks
ci_checks:
  - id: world-bible-exists
  - id: visual-documentation
  - id: tool-agnostic-definition

# Quality gates for world building
world_building_quality_gates:
  - id: character-has-reference
  - id: exclusions-defined
  - id: environment-documentation
  - id: prompt-library-exists
  - id: consistency-testing
