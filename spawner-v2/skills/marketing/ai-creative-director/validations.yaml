id: ai-creative-director-validations
skill: ai-creative-director
version: 1.0.0

validations:
  # Critical: Process
  - id: brief-exists-before-generation
    name: Brief document exists before AI generation starts
    severity: critical
    description: AI generation without brief leads to rework and misalignment
    pattern:
      file_glob: "**/*.{ts,js,py,yaml,md}"
      match: "(generate|create).*(image|video|audio|avatar)"
      exclude: "brief|requirements|spec|direction"
    message: "AI generation code without brief reference. Ensure brief approval process exists."
    autofix: false

  - id: hero-before-batch
    name: Hero asset approval before batch generation
    severity: critical
    description: Batch generation without approved hero amplifies mistakes
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "(Promise\\.all|batch|forEach|map).*generate"
      exclude: "hero|approved|template|single.*first"
    message: "Batch generation without hero-first workflow. Add hero approval checkpoint."
    autofix: false

  - id: qa-checkpoints-exist
    name: QA checkpoints defined in workflow
    severity: high
    description: Production without QA checkpoints catches problems too late
    pattern:
      file_glob: "**/*.{yaml,md}"
      match: "workflow|pipeline|process"
      exclude: "QA|quality|review|approval|checkpoint"
    message: "Workflow definition without QA checkpoints. Add review gates."
    autofix: false

  # High: Consistency
  - id: style-lock-defined
    name: Brand style lock exists for multi-asset production
    severity: high
    description: Multi-asset production needs consistent style enforcement
    pattern:
      file_glob: "**/*.{ts,js,py,yaml}"
      match: "batch|multiple|campaign|variation"
      exclude: "style|brand|prefix|template|consistent"
    message: "Multi-asset workflow without style lock. Define brand consistency rules."
    autofix: false

  - id: reference-comparison
    name: Generated assets should be compared to reference
    severity: medium
    description: Without reference comparison, drift goes unnoticed
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "generate.*save|export.*generated"
      exclude: "compare|reference|hero|approved|check"
    message: "Saving generated assets without reference comparison. Add consistency check."
    autofix: false

  # Medium: Cost & Tracking
  - id: cost-tracking-exists
    name: AI generation costs are tracked
    severity: medium
    description: Untracked costs lead to budget surprises
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "(generate|create).*(image|video|audio)"
      exclude: "cost|budget|track|log.*price|estimate"
    message: "AI generation without cost tracking. Add budget monitoring."
    autofix: false

  - id: asset-versioning
    name: Assets should have version tracking
    severity: medium
    description: Without versioning, you lose history and use wrong assets
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "save.*asset|export.*final"
      exclude: "version|v\\d|timestamp|increment"
    message: "Saving assets without versioning. Add version tracking."
    autofix: false

  - id: workflow-documentation
    name: Successful workflows should be documented
    severity: low
    description: Undocumented workflows can't be replicated
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "workflow|pipeline|production"
      exclude: "document|log|record|save.*workflow"
    message: "Workflow without documentation step. Add workflow recording."
    autofix: false

  # Medium: Organization
  - id: asset-naming-convention
    name: Assets should follow naming convention
    severity: medium
    description: Inconsistent naming makes assets hard to find
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "filename.*=|name.*asset"
      exclude: "convention|format|project.*type|template"
    message: "Asset naming without convention. Implement standard naming."
    autofix: false

  - id: folder-structure-exists
    name: Production should use organized folder structure
    severity: low
    description: Scattered assets cause confusion and wasted time
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "output.*path|save.*dir"
      exclude: "structure|organize|folder|brief|working|approved|final"
    message: "File output without folder structure. Organize by project phase."
    autofix: false

  # Low: Handoffs
  - id: handoff-format-preserved
    name: Asset quality preserved in tool handoffs
    severity: medium
    description: Quality loss during handoffs degrades final output
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "export|output.*format"
      exclude: "PNG|TIFF|lossless|maximum.*quality|high.*quality"
    message: "Asset export may lose quality. Use lossless formats for handoffs."
    autofix: false

  - id: context-transfer
    name: Context should transfer between pipeline stages
    severity: low
    description: Without context, downstream tools don't understand intent
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "handoff|transfer|next.*stage|downstream"
      exclude: "context|brief|requirements|metadata"
    message: "Pipeline handoff without context transfer. Pass requirements downstream."
    autofix: false

# Pre-commit checks
pre_commit:
  - id: brief-exists-before-generation
  - id: hero-before-batch
  - id: cost-tracking-exists

# CI/CD checks
ci_checks:
  - id: brief-exists-before-generation
  - id: hero-before-batch
  - id: qa-checkpoints-exist
  - id: style-lock-defined

# Quality gates for productions
production_quality_gates:
  - id: qa-checkpoints-exist
  - id: style-lock-defined
  - id: reference-comparison
  - id: asset-versioning
  - id: workflow-documentation
