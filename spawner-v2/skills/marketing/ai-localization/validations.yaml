id: ai-localization-validations
skill: ai-localization
version: 1.0.0

validations:
  # Critical: Quality & Compliance
  - id: native-review-required
    name: Customer-facing translations must have native review
    severity: critical
    description: AI translations need human validation before publishing
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "(translate|localize).*publish|deploy.*translation"
      exclude: "review|approve|validate|native|human"
    message: "Publishing translation without review step. Add native speaker review."
    autofix: false

  - id: legal-compliance-check
    name: Localized content should have compliance check
    severity: critical
    description: Different markets have different legal requirements
    pattern:
      file_glob: "**/*.{ts,js,py,yaml}"
      match: "market|region.*publish|launch.*locale"
      exclude: "legal|compliance|regulatory|disclaimer"
    message: "Market launch without compliance check. Verify local legal requirements."
    autofix: false

  - id: rtl-support-check
    name: RTL languages need proper layout support
    severity: high
    description: Arabic, Hebrew, Farsi need RTL layout handling
    pattern:
      file_glob: "**/*.{ts,js,py,css}"
      match: "(ar|he|fa|ur).*locale|language.*(arabic|hebrew)"
      exclude: "rtl|direction|dir=|logical|start|end"
    message: "RTL language without RTL handling. Implement RTL layout support."
    autofix: false

  # High: Content Quality
  - id: text-expansion-buffer
    name: UI elements should handle text expansion
    severity: high
    description: German text is 30% longer; layouts must accommodate
    pattern:
      file_glob: "**/*.{ts,js,tsx,jsx,css}"
      match: "width.*fixed|max-width.*px.*text|button.*width"
      exclude: "flex|auto|%|min-content|fit-content"
    message: "Fixed-width text element may truncate in longer languages. Use flexible sizing."
    autofix: false

  - id: character-set-support
    name: Fonts must support target language characters
    severity: high
    description: CJK, Arabic, Cyrillic need appropriate font support
    pattern:
      file_glob: "**/*.{css,scss}"
      match: "font-family"
      exclude: "Noto|sans-serif|system-ui|unicode|fallback"
    message: "Font may not support all target languages. Include Unicode-complete fallback."
    autofix: false

  - id: terminology-consistency
    name: Product/brand terms should use consistent translations
    severity: medium
    description: Same terms translated differently causes confusion
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "translate.*product|brand|name"
      exclude: "terminology|glossary|dictionary|do.not.translate"
    message: "Translating brand/product terms. Verify against terminology database."
    autofix: false

  # Medium: Process Quality
  - id: translation-memory-usage
    name: Translations should use translation memory
    severity: medium
    description: Reusing approved translations ensures consistency
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "translate|localize"
      exclude: "memory|tm|cache|stored|approved"
    message: "Translation without memory lookup. Consider using translation memory."
    autofix: false

  - id: context-provided
    name: Translations should include context
    severity: medium
    description: Context improves translation quality significantly
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "(ai|gpt|claude|deepl).*translate"
      exclude: "context|description|where|usage"
    message: "Translation without context. Provide usage context for better results."
    autofix: false

  - id: source-quality-check
    name: Source content should be translation-ready
    severity: low
    description: Clear source produces better translations
    pattern:
      file_glob: "**/*.{md,yaml}"
      match: "translate|localize"
      exclude: "reviewed|simplified|clear|i18n"
    message: "Consider reviewing source content clarity before translation."
    autofix: false

  # Medium: Voice/Audio
  - id: voice-matching
    name: Localized voice should match original speaker characteristics
    severity: medium
    description: Voice mismatch is jarring to viewers
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "voice.*translate|dub|localize.*audio"
      exclude: "match|similar|characteristic|gender|age"
    message: "Voice localization without matching. Verify voice characteristics match speaker."
    autofix: false

  - id: audio-sync-check
    name: Dubbed audio must sync with video
    severity: medium
    description: Lip sync and timing must be considered
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "dub|voice.*video|audio.*localize"
      exclude: "sync|timing|duration|lip|align"
    message: "Audio localization without sync consideration. Verify timing alignment."
    autofix: false

  # Low: Optimization
  - id: batch-localization
    name: Multiple items should be batch translated
    severity: low
    description: Batching is more efficient and consistent
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "for.*translate|forEach.*localize"
      exclude: "batch|parallel|bulk|all"
    message: "Sequential translation could be batched for efficiency."
    autofix: false

  - id: fallback-language
    name: Specify fallback for missing translations
    severity: low
    description: Missing translations should fall back gracefully
    pattern:
      file_glob: "**/*.{ts,js,py}"
      match: "getTranslation|i18n|t\\("
      exclude: "fallback|default|en|english"
    message: "Translation lookup without fallback. Add fallback language handling."
    autofix: false

# Pre-commit checks
pre_commit:
  - id: native-review-required
  - id: legal-compliance-check
  - id: rtl-support-check

# CI/CD checks
ci_checks:
  - id: native-review-required
  - id: rtl-support-check
  - id: character-set-support
  - id: text-expansion-buffer

# Quality gates for localization projects
localization_quality_gates:
  - id: native-review-required
  - id: terminology-consistency
  - id: translation-memory-usage
  - id: context-provided
  - id: voice-matching
