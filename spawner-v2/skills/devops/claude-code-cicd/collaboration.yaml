id: claude-code-cicd-collaboration
skill: claude-code-cicd
version: 1.0.0

receives_from:
  - skill: claude-code-hooks
    context: "Local hooks inform CI requirements"
    receives:
      - "Local enforcement patterns"
      - "Quality gates"
    provides: "CI pipeline that mirrors local enforcement"

  - skill: claude-code-commands
    context: "Commands run in CI"
    receives:
      - "Command definitions"
      - "Workflow templates"
    provides: "Headless-compatible command execution"

  - skill: github-actions
    context: "Need Actions expertise"
    receives:
      - "Workflow syntax"
      - "Action patterns"
    provides: "Claude-integrated workflows"

  - skill: testing-patterns
    context: "Tests inform CI gates"
    receives:
      - "Test requirements"
      - "Coverage thresholds"
    provides: "AI-assisted test analysis in CI"

delegation_triggers:
  - trigger: "local hook|pre-commit"
    delegate_to: claude-code-hooks
    pattern: sequential
    context: "Need local hook configuration"

  - trigger: "slash command|custom command"
    delegate_to: claude-code-commands
    pattern: sequential
    context: "Need command for CI workflow"

  - trigger: "Actions workflow|GitHub workflow"
    delegate_to: github-actions
    pattern: sequential
    context: "Need GitHub Actions expertise"

  - trigger: "test strategy|coverage"
    delegate_to: testing-patterns
    pattern: sequential
    context: "Need testing patterns for CI"

feedback_loops:
  receives_feedback_from:
    - skill: claude-code-hooks
      signal: "Local enforcement patterns"
      action: "Mirror in CI for consistency"

    - skill: testing-patterns
      signal: "Test execution results"
      action: "Use in Claude's CI analysis"

  sends_feedback_to:
    - skill: claude-code-hooks
      signal: "CI enforcement results"
      action: "Inform local hook needs"

    - skill: claude-code-commands
      signal: "Headless execution feedback"
      action: "Commands may need adjustment for CI"

cross_domain_insights:
  from_domains:
    - domain: devops
      insight: "Infrastructure as code principles"
      application: "CI config is code, version and review it"

    - domain: security
      insight: "Least privilege principle"
      application: "Restrict Claude's tools in CI to minimum needed"

    - domain: cost-management
      insight: "Resource optimization"
      application: "Use appropriate model tiers, cache results"

common_combinations:
  - name: Complete PR Automation
    skills:
      - claude-code-cicd
      - claude-code-commands
      - github-actions
    workflow: |
      1. Issue labeled 'auto-implement'
      2. Claude implements via headless mode
      3. PR created with Claude's changes
      4. Claude reviews the PR
      5. Human makes final approval

  - name: Enterprise CI/CD Integration
    skills:
      - claude-code-cicd
      - claude-code-hooks
      - testing-patterns
    workflow: |
      1. Local hooks enforce standards
      2. CI validates same standards
      3. Claude assists with review
      4. Tests must pass for merge
      5. Deployment automated after merge

  - name: Multi-Stage Review Pipeline
    skills:
      - claude-code-cicd
      - ai-code-security
      - testing-patterns
    workflow: |
      1. Haiku triages and labels PR
      2. Sonnet performs security review
      3. Sonnet performs code quality review
      4. Results posted as PR comments
      5. Human reviews AI findings
