id: risk-modeling-collaboration
skill: risk-modeling
version: 1.0.0

receives_from:
  - skill: algorithmic-trading
    context: "Trade execution data"
    receives:
      - "Position changes"
      - "Fill prices and sizes"
    provides: "Updated risk calculations"

  - skill: portfolio-optimization
    context: "Portfolio weights"
    receives:
      - "Current allocations"
      - "Target weights"
    provides: "Risk constraints and limits"

delegation_triggers:
  - trigger: "option|greeks|derivative"
    delegate_to: derivatives-pricing
    context: "Options risk calculation"

  - trigger: "allocat|weight|portfolio.*optim"
    delegate_to: portfolio-optimization
    context: "Risk-adjusted allocation"

  - trigger: "backtest|strategy|signal"
    delegate_to: algorithmic-trading
    context: "Trading strategy risk"

  - trigger: "blockchain|defi|smart.?contract"
    delegate_to: blockchain-defi
    context: "DeFi protocol risk"

feedback_loops:
  receives_feedback_from:
    - skill: algorithmic-trading
      signal: "Trade execution data"
      action: "Update risk calculations"

    - skill: portfolio-optimization
      signal: "Rebalancing complete"
      action: "Recalculate portfolio VaR"

  sends_feedback_to:
    - skill: algorithmic-trading
      signal: "Risk limits exceeded"
      action: "Reduce position sizes"

    - skill: portfolio-optimization
      signal: "VaR/ES metrics"
      action: "Adjust optimization constraints"

common_combinations:
  - name: Enterprise Risk Management
    skills:
      - risk-modeling
      - portfolio-optimization
    workflow: |
      1. Calculate component VaR
      2. Aggregate with correlations
      3. Run stress scenarios
      4. Set risk limits
      5. Monitor breaches

  - name: Trading Risk System
    skills:
      - risk-modeling
      - algorithmic-trading
    workflow: |
      1. Pre-trade risk check
      2. Position sizing from VaR
      3. Real-time P&L monitoring
      4. Stop-loss triggers
      5. End-of-day reporting

  - name: Options Risk Management
    skills:
      - risk-modeling
      - derivatives-pricing
    workflow: |
      1. Calculate Greeks portfolio
      2. Scenario analysis (vol, spot)
      3. Tail risk from jumps
      4. Gamma scalping limits
      5. Greeks hedging plan

ecosystem:
  var_calculation:
    - "numpy - Simulation"
    - "scipy.stats - Distributions"
    - "arch - GARCH volatility"

  stress_testing:
    - "pandas - Data manipulation"
    - "Custom scenario engine"

  credit_risk:
    - "sklearn - PD models"
    - "XGBoost - Advanced PD"

  visualization:
    - "matplotlib - Static plots"
    - "plotly - Interactive dashboards"

references:
  books:
    - "Value at Risk - Philippe Jorion"
    - "Financial Risk Management - Christoffersen"
    - "Monte Carlo Methods in Finance - Glasserman"

  tutorials:
    - "QuantLib Risk Modeling"
    - "ARCH Package Documentation"

  regulatory:
    - "Basel III Framework"
    - "FRTB Guidelines"
