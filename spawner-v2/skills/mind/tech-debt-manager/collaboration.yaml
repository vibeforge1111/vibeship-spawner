# Tech Debt Manager Collaboration Patterns
# How debt management integrates with other foundational skills

collaboration:
  # Lead role - Tech Debt Manager drives these workflows
  leads:
    - workflow: debt-assessment
      description: Evaluating and quantifying technical debt across the codebase
      involves:
        - code-quality: Identifying code smells
        - test-strategist: Assessing test coverage gaps
        - performance-thinker: Performance-related debt
      handoff_points:
        - to: code-quality
          when: Need to identify specific quality issues
          context_to_share: Areas of concern, symptoms observed
        - to: refactoring-guide
          when: Debt prioritized and ready to address
          context_to_share: Debt context, constraints, priorities

    - workflow: debt-prioritization
      description: Deciding which debt to address and when
      involves:
        - decision-maker: Strategic trade-off decisions
        - refactoring-guide: Effort estimation
      handoff_points:
        - to: decision-maker
          when: Debt decision has significant business impact
          context_to_share: Options, costs, risks, trade-offs
        - to: refactoring-guide
          when: Specific debt needs effort estimate
          context_to_share: Scope, constraints, expected outcome

    - workflow: debt-communication
      description: Explaining debt to stakeholders and securing resources
      involves:
        - decision-maker: Business justification
        - technical-writer: Documentation
      handoff_points:
        - to: decision-maker
          when: Need help framing business case
          context_to_share: Technical costs, business impact
        - to: technical-writer
          when: Debt needs documentation for handoff
          context_to_share: Context, risks, recommended actions

  # Support role - Tech Debt Manager assists these workflows
  supports:
    - workflow: sprint-planning
      led_by: decision-maker
      contribution: Identifying debt affecting planned work
      when_called: Planning work in debt-heavy areas

    - workflow: architecture-review
      led_by: system-designer
      contribution: Debt implications of architecture decisions
      when_called: Evaluating design options

    - workflow: refactoring
      led_by: refactoring-guide
      contribution: Strategic context for refactoring decisions
      when_called: Prioritizing refactoring scope

    - workflow: incident-response
      led_by: incident-responder
      contribution: Identifying if debt contributed to incident
      when_called: Post-incident analysis

  # Escalation patterns
  escalations:
    - situation: Debt is blocking critical feature work
      escalate_to: decision-maker
      with_context: Blocking debt, business impact, options
      reason: Need business decision on priority

    - situation: Debt requires architectural changes
      escalate_to: system-designer
      with_context: Current constraints, desired state
      reason: Beyond code-level debt management

    - situation: Debt paydown requires significant refactoring
      escalate_to: refactoring-guide
      with_context: Debt scope, constraints, timeline
      reason: Need refactoring expertise

    - situation: Security-related debt discovered
      escalate_to: incident-responder + decision-maker
      with_context: Vulnerability, risk, remediation options
      reason: Security debt requires immediate attention

  # Integration contracts
  contracts:
    with_refactoring_guide:
      tech_debt_manager_provides:
        - Prioritized debt items
        - Business context and constraints
        - Timeline and resource availability
      refactoring_guide_provides:
        - Effort estimates for paydown
        - Refactoring strategy and approach
        - Risk assessment for changes
      interface_example: |
        # Tech debt manager provides context:
        """
        DEBT ITEM: Order Processing Legacy Code

        PRIORITY: High (blocking feature work)
        CONSTRAINT: Cannot pause order processing
        TIMELINE: Need improvement in 6 weeks
        RESOURCES: 1 developer, partial time

        CONTEXT:
        - Every feature in this area takes 3x
        - 2 bugs/month from this code
        - New team member struggled for weeks

        EXPECTED OUTCOME:
        - Features at normal speed
        - Bug rate normalized
        - Reasonable onboarding
        """

        # Refactoring guide responds:
        """
        PAYDOWN PLAN:

        EFFORT: 4 weeks (with constraints)

        APPROACH: Incremental strangler
        1. Week 1: Characterization tests
        2. Week 2: Extract validation
        3. Week 3: Extract calculation
        4. Week 4: Extract persistence

        RISK: Low (tests before changes)

        OUTCOME: Code split into testable modules
        """

    with_decision_maker:
      tech_debt_manager_provides:
        - Debt inventory and assessment
        - Interest calculations
        - Paydown options with costs
      decision_maker_provides:
        - Business priority context
        - Resource allocation decisions
        - Trade-off resolution
      interface_example: |
        # Tech debt manager presents decision:
        """
        DEBT DECISION REQUIRED:

        ITEM: Authentication System Modernization

        CURRENT INTEREST:
        - 2 days/week maintenance
        - Security audit findings (3 medium)
        - Cannot add new auth methods easily

        OPTIONS:
        A. Accept debt, continue paying interest
           - Cost: ~100 days/year
           - Risk: Security findings, compliance

        B. Partial paydown (2 weeks)
           - Address security findings
           - Basic refactoring
           - Continue with some interest

        C. Full modernization (6 weeks)
           - Modern auth system
           - Near-zero interest going forward
           - Enables new capabilities

        RECOMMENDATION: B (balance of risk and investment)
        """

    with_code_quality:
      tech_debt_manager_provides:
        - Strategic context for quality work
        - Priority guidance for improvements
        - Resource constraints
      code_quality_provides:
        - Code smell identification
        - Quality assessment and metrics
        - Improvement recommendations
      interface_example: |
        # Tech debt manager requests assessment:
        """
        ASSESSMENT REQUEST:

        TARGET: Payment module
        REASON: Frequent bugs, slow development

        QUESTIONS:
        1. What quality issues exist?
        2. Which are causing the problems?
        3. What would improvement cost?
        """

        # Code quality responds:
        """
        QUALITY ASSESSMENT: Payment Module

        ISSUES FOUND:
        1. God class PaymentProcessor (500 lines) - HIGH
        2. No input validation - MEDIUM
        3. Inconsistent error handling - MEDIUM
        4. Poor naming - LOW

        CAUSING PROBLEMS:
        - God class: Main source of bugs and slow work
        - No validation: Edge case failures

        IMPROVEMENT COST:
        - Address #1 and #2: ~2 weeks
        - Full cleanup: ~4 weeks
        """

    with_test_strategist:
      tech_debt_manager_provides:
        - Test coverage gaps as debt items
        - Priority areas for testing
        - Resource constraints
      test_strategist_provides:
        - Coverage assessment
        - Testing effort estimates
        - Test debt recommendations
      interface_example: |
        # Tech debt manager asks about test debt:
        """
        TEST DEBT ASSESSMENT:

        AREA: Core business logic
        CONCERN: High bug rate despite "passing tests"
        QUESTION: Is test quality debt contributing?
        """

        # Test strategist responds:
        """
        TEST QUALITY ASSESSMENT:

        FINDING: Coverage theater
        - 85% line coverage
        - < 20% meaningful assertions
        - Tests run code but don't verify behavior

        IMPACT:
        - Bugs slip through despite "passing" tests
        - False confidence in code quality
        - Refactoring fear (tests don't catch breaks)

        RECOMMENDATION:
        - Add real assertions to critical paths (1 week)
        - Add edge case tests for bug-prone areas (1 week)
        - Expected: 50% bug rate reduction
        """

    with_system_designer:
      tech_debt_manager_provides:
        - Architectural debt inventory
        - Legacy system constraints
        - Migration challenges
      system_designer_provides:
        - Target architecture vision
        - Migration strategies
        - Architectural risk assessment
      interface_example: |
        # Tech debt manager identifies architectural debt:
        """
        ARCHITECTURAL DEBT:

        CURRENT: Monolith handling orders, payments, users
        SYMPTOM: Any change affects everything
        IMPACT: Slow deploys, coordination overhead

        QUESTION: Is architectural change worth the investment?
        """

        # System designer evaluates:
        """
        ARCHITECTURAL ASSESSMENT:

        CURRENT PAIN:
        - Deploy coordination: 4 hours/week
        - Cross-team blocking: Frequent
        - Scaling: Entire system for any peak

        OPTIONS:
        A. Modularize monolith (4 weeks)
           - Clear boundaries in code
           - Prep for future split
           - 50% pain reduction

        B. Extract payments service (12 weeks)
           - Independent deployment
           - Full isolation
           - 75% pain reduction for payments

        RECOMMENDATION: A now, B when resources available
        """

# Prerequisites for using this skill effectively
prerequisites:
  skills: []  # Foundational skill, no prerequisites
  knowledge:
    - Basic software development concepts
    - Understanding of business priorities
    - Communication skills
  tools:
    - Issue tracking system
    - Code quality metrics (optional)
    - Time tracking (for interest calculation)

# When to delegate to this skill
delegation_triggers:
  - phrase: "tech debt"
    confidence: high
  - phrase: "technical debt"
    confidence: high
  - phrase: "legacy code"
    confidence: high
  - phrase: "should we fix"
    confidence: medium
  - phrase: "cleanup backlog"
    confidence: high
  - phrase: "when to refactor"
    confidence: high
  - phrase: "debt prioritization"
    confidence: high
  - phrase: "shortcuts"
    confidence: medium
  - phrase: "code quality issues"
    confidence: medium
  - phrase: "maintenance burden"
    confidence: high

# Skill maturity indicators
maturity_levels:
  beginner:
    characteristics:
      - Recognizes debt exists
      - Tracks some debt items
      - Understands debt metaphor
    common_mistakes:
      - Calling all old code "debt"
      - Not quantifying interest
      - Infinite backlog

  intermediate:
    characteristics:
      - Quantifies debt impact
      - Prioritizes strategically
      - Communicates with stakeholders
    common_mistakes:
      - Over-prioritizing debt over features
      - Not connecting to business value
      - Scope creep in paydown

  advanced:
    characteristics:
      - Strategic debt decisions
      - Opportunistic paydown
      - Prevents debt accumulation
    common_mistakes:
      - Assuming team has same judgment
      - Under-documenting decisions
      - Not teaching others the approach
