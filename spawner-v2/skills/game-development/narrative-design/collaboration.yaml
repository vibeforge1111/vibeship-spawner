id: narrative-design-collaboration
skill: narrative-design
version: 1.0.0

# ============================================================================
# PREREQUISITES
# ============================================================================
prerequisites:
  required:
    - name: Narrative Authoring Tool
      description: Where dialogue and story scripts are written
      options:
        - tool: Ink (inkle)
          best_for: Complex branching, quality-based narrative
          cost: Free, open source
          integration: Unity, Unreal, custom
        - tool: Yarn Spinner
          best_for: Unity dialogue, simpler branching
          cost: Free, open source
          integration: Unity native
        - tool: Twine
          best_for: Prototyping, interactive fiction, web export
          cost: Free, open source
          integration: Web, custom export
        - tool: Articy Draft
          best_for: Visual flowcharting, team collaboration
          cost: Paid license
          integration: Unity, Unreal, export

    - name: Game Engine
      description: Where narrative integrates with gameplay
      options:
        - Unity (C#, Yarn Spinner, Ink integration)
        - Unreal Engine (Blueprints, Dialogue System)
        - Godot (GDScript, Dialogic addon)
        - Ren'Py (Python, visual novels)
        - Custom engine

    - name: Writing/Documentation Tool
      description: For narrative design documents and story bibles
      options:
        - Notion (collaborative, structured)
        - Google Docs (simple collaboration)
        - Scrivener (long-form organization)
        - Obsidian (linked notes, world building)

  recommended:
    - name: Voice Recording/Direction Tools
      options:
        - Source-Connect (remote direction)
        - REAPER (editing, organization)
        - Pro Tools (industry standard)
        - Audition (Adobe ecosystem)
      reason: Voice direction is narrative design responsibility

    - name: Localization Management
      options:
        - Lokalise (translation management)
        - Crowdin (community translation)
        - POEditor (simple projects)
        - Custom spreadsheets
      reason: Narrative must plan for localization from start

    - name: Flowchart/Visualization Tools
      options:
        - Miro (collaborative boards)
        - Draw.io (free flowcharts)
        - Lucidchart (professional)
        - Chat Mapper (dialogue specific)
      reason: Visualizing branching narrative structure

# ============================================================================
# MCP TOOL CONFIGURATIONS
# ============================================================================
mcp_tools:
  # Claude for Narrative Development
  - name: narrative-development
    description: AI-assisted dialogue and story writing
    install: Built into Claude Code
    capabilities:
      - dialogue-drafting
      - bark-variation-generation
      - story-structure-analysis
      - localization-context-generation
    example_usage: |
      Use Claude for narrative work:
      - Generate dialogue variations for different player approaches
      - Create bark variants from base line
      - Analyze story structure for pacing issues
      - Generate localization context notes

  # MCP Filesystem for Script Management
  - name: mcp-filesystem
    description: Read/write narrative scripts and design docs
    install: "@modelcontextprotocol/server-filesystem"
    allowed_directories:
      - "./narrative"
      - "./scripts"
      - "./dialogue"
      - "./localization"
    example_usage: |
      # Read dialogue file
      const dialogue = await mcp.fs.readFile("./dialogue/chapter_1.ink");

      # Write updated script
      await mcp.fs.writeFile(
        "./dialogue/chapter_1_revised.ink",
        revisedDialogue
      );

      # Read story bible
      const bible = await mcp.fs.readFile("./narrative/story_bible.md");

  # MCP Memory for Narrative Continuity
  - name: mcp-memory
    description: Track story decisions, character arcs, world state
    install: "@modelcontextprotocol/server-memory"
    config:
      namespace: "narrative-design"
    example_usage: |
      # Store character arc decision
      await mcp.memory.store({
        key: "character-marcus-arc",
        value: {
          current_state: "disillusioned",
          major_beats: ["betrayal", "discovery", "choice"],
          player_relationship: "variable"
        }
      });

      # Check for continuity
      const marcus = await mcp.memory.retrieve("character-marcus-arc");
      if (newScene.contradicts(marcus.current_state)) {
        warn("Scene contradicts character arc state");
      }

  # MCP Git for Version Control
  - name: mcp-git
    description: Track narrative script versions and changes
    install: "@modelcontextprotocol/server-git"
    example_usage: |
      # Track dialogue changes
      await mcp.git.commit({
        files: ["dialogue/chapter_1.ink"],
        message: "Revised Marcus confrontation - added third option"
      });

      # Review narrative changes
      const diff = await mcp.git.diff("dialogue/");

# ============================================================================
# API INTEGRATIONS
# ============================================================================
api_integrations:
  claude_narrative:
    usage: Built-in
    example: |
      # Dialogue Drafting
      DIALOGUE PROMPT:
      "Write 3 variants of this exchange where player confronts
       the merchant about stealing:

       Context: Player discovered merchant took family heirloom.
       Merchant's motivation: Needed money for sick child.
       Tone options: Aggressive, Sympathetic, Investigative

       For each variant, include:
       - Player dialogue (2-3 options per beat)
       - NPC responses
       - Branching outcomes
       - Stage directions for VO"

      # Bark Variation Generation
      BARK PROMPT:
      "Generate 12 combat hit bark variants for a veteran soldier.
       Personality: Gruff, experienced, dark humor.
       Context: Taking damage in melee combat.
       Include: 4 light damage, 4 heavy damage, 4 near-death.
       Voice direction notes for each.
       Max 8 words per line."

      # Localization Context
      LOCALIZATION PROMPT:
      "Generate localization context notes for this dialogue:
       [dialogue lines]

       For each line include:
       - Speaker and their current emotion
       - What they're trying to achieve
       - Any subtext or sarcasm
       - Any wordplay that needs adaptation
       - Technical constraints (lip sync, timing)"

  ink_integration:
    note: Ink is the industry standard for branching narrative
    example: |
      // Basic Ink structure
      === merchant_confrontation ===
      You approach the merchant's stall.

      * [Aggressive] "I know what you did."
          ~ relationship_merchant = "hostile"
          -> aggressive_path
      * [Sympathetic] "I heard about your situation..."
          ~ relationship_merchant = "complicated"
          -> sympathetic_path
      * [Investigative] "Interesting items you have here."
          ~ relationship_merchant = "suspicious"
          -> investigative_path

      === aggressive_path ===
      The merchant's face hardens.
      "You don't know anything about what I've been through."
      * "Tell me, then."
          -> reveal_backstory
      * "I don't care. Give it back."
          -> forced_return

  yarn_spinner_integration:
    note: Popular Unity dialogue system
    example: |
      title: MerchantConfrontation
      tags:
      ---
      Player: You have something that belongs to my family.
      <<set $merchant_aware to true>>

      -> Aggressive
      -> Sympathetic
      -> Investigative

      === Aggressive ===
      Player: I know what you did. Don't play dumb.
      <<set $relationship_merchant to "hostile">>
      Merchant: You think you understand? You know nothing.
      -> Merchant_Response

      === Sympathetic ===
      Player: I heard about your child. But that doesn't make this right.
      <<set $relationship_merchant to "complicated">>
      Merchant: (softening) You... you know about my daughter?
      -> Merchant_Response
      ===

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "world building|lore|history|cosmology|mythology|faction"
    delegate_to: worldbuilding
    pattern: sequential
    context: "Narrative needs established world foundation"
    handoff_data:
      - "Story context and themes"
      - "Time period and setting requirements"
      - "Factions or cultures involved"
      - "Historical events referenced"
    receive:
      - "World bible and history"
      - "Faction relationships and motivations"
      - "Cultural details and naming conventions"
      - "Lore that can be referenced"

  - trigger: "level design|environment|space|map|layout|flow"
    delegate_to: level-design
    pattern: parallel
    context: "Narrative space needs environmental design"
    handoff_data:
      - "Story beats that occur in space"
      - "Environmental storytelling requirements"
      - "Pacing requirements (exploration vs action)"
      - "Key discovery moments and reveals"
    receive:
      - "Level layout supporting narrative beats"
      - "Environmental storytelling placement"
      - "Flow that supports narrative pacing"
      - "Sight lines for reveals"

  - trigger: "mechanics|game design|systems|balance|gameplay|rules"
    delegate_to: game-design-core
    pattern: sequential
    context: "Narrative needs mechanical support"
    handoff_data:
      - "Themes that need mechanical reinforcement"
      - "Player choices that need consequences"
      - "Narrative pacing requirements"
      - "Ludonarrative alignment goals"
    receive:
      - "Mechanics that reinforce theme"
      - "Systems for choice consequences"
      - "Gameplay pacing integration"
      - "Mechanical language that fits narrative"

  - trigger: "character art|concept art|visual design|character design"
    delegate_to: character-art
    pattern: parallel
    context: "Characters need visual representation"
    handoff_data:
      - "Character personality and arc"
      - "Relationship to other characters"
      - "Key emotional moments to support"
      - "Costume requirements for story"
    receive:
      - "Character visual design"
      - "Expression sheets for dialogue"
      - "Costume variants for story beats"
      - "Silhouette for recognition"

  - trigger: "audio|music|sound|soundtrack|ambient"
    delegate_to: audio-design
    pattern: parallel
    context: "Narrative needs audio support"
    handoff_data:
      - "Emotional arc and pacing"
      - "Key moments needing musical support"
      - "Ambient storytelling requirements"
      - "Voice acting direction needs"
    receive:
      - "Music that supports emotional beats"
      - "Ambient audio for environments"
      - "Sound design for narrative moments"
      - "VO recording specifications"

  - trigger: "ui|hud|interface|menu|dialogue ui"
    delegate_to: ui-design
    pattern: parallel
    context: "Narrative needs interface design"
    handoff_data:
      - "Dialogue presentation requirements"
      - "Quest/objective display needs"
      - "Codex/journal design requirements"
      - "Diegetic vs non-diegetic preferences"
    receive:
      - "Dialogue box design"
      - "Choice presentation UI"
      - "Quest log and journal UI"
      - "Lore delivery interface"

  - trigger: "voice acting|recording|casting|VO"
    delegate_to: audio-design
    pattern: sequential
    context: "Dialogue ready for voice production"
    handoff_data:
      - "Final dialogue scripts"
      - "Character voice direction notes"
      - "Performance context for each line"
      - "Alt take requirements"
    receive:
      - "Recorded voice files"
      - "Performance notes from sessions"
      - "Any script adjustment recommendations"

  - trigger: "localization|translation|i18n"
    delegate_to: localization
    pattern: parallel
    context: "Narrative ready for translation"
    handoff_data:
      - "Complete dialogue with context notes"
      - "Character personality guides"
      - "Wordplay/pun adaptation needs"
      - "Text expansion considerations"
    receive:
      - "Localized dialogue files"
      - "Questions about ambiguous content"
      - "Cultural adaptation recommendations"

# ============================================================================
# RECEIVES FROM (Inbound Handoffs)
# ============================================================================
receives_from:
  - skill: worldbuilding
    receives:
      - "World bible and history"
      - "Faction relationships"
      - "Cultural details"
      - "Naming conventions"
    uses_for: "Grounding narrative in established world"
    expects_format: "Structured documentation with examples"

  - skill: level-design
    receives:
      - "Level layouts"
      - "Environmental storytelling opportunities"
      - "Player flow paths"
      - "Point of interest locations"
    uses_for: "Placing narrative beats in physical space"
    expects_format: "Maps with annotation, design docs"

  - skill: game-design-core
    receives:
      - "Core mechanics documentation"
      - "Player progression systems"
      - "Win/fail conditions"
      - "Systemic interactions"
    uses_for: "Ensuring ludonarrative harmony"
    expects_format: "Game design documents, flowcharts"

  - skill: character-art
    receives:
      - "Character visual designs"
      - "Expression sheets"
      - "Costume concepts"
    uses_for: "Visual character reference for dialogue writing"
    expects_format: "Concept art, model sheets"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Screenwriting
    insight: |
      Screenwriters understand visual storytelling:
      - "Show don't tell" as religion
      - Scene goals and obstacles
      - Subtext and what's unsaid
      - Economy of dialogue

      BUT games differ: player is camera, not director.
      Adapt: reveal through player exploration, not cuts.
    applies_when: "Writing any narrative scene"

  - domain: Theater
    insight: |
      Theater knows live performance:
      - Dialogue must work when spoken
      - Blocking reveals relationship
      - Audience imagination fills gaps
      - The fourth wall is fragile

      Apply: Write for actors. Test by reading aloud.
      Game characters are performed, not read.
    applies_when: "Writing dialogue for voice acting"

  - domain: Interactive Fiction History
    insight: |
      Text adventures pioneered player agency:
      - Parser games: player as creative partner
      - Choice-based: player as curator of story
      - CYOA: branching as budget challenge

      Ink (inkle) descends from this tradition.
      Twine made interactive fiction accessible.
      Learn from: 80 Choices to choose quality over quantity.
    applies_when: "Designing branching structures"

  - domain: Improv Comedy
    insight: |
      Improvisers master "yes, and":
      - Accept what's given
      - Build on contributions
      - Make your partner look good
      - Failure is data, not disaster

      Apply: Game narrative must "yes, and" player actions.
      If player does something, narrative should acknowledge.
    applies_when: "Designing player agency responses"

  - domain: Psychology of Choice
    insight: |
      Choice psychology research shows:
      - Too many options cause paralysis
      - Meaningful choices need cost
      - Illusion of control satisfies (somewhat)
      - Regret is stronger than satisfaction

      Apply: Fewer meaningful choices > many trivial ones.
      Cost creates meaning. Ambiguity invites engagement.
    applies_when: "Designing player choices"

  - domain: Oral Tradition
    insight: |
      Oral storytelling preceded writing:
      - Repetition as memory aid
      - Rhythm and breath matter
      - Stories adapt to audience
      - Participation is expected

      Apply: Game dialogue is spoken tradition.
      Write for mouth and ear, not page and eye.
    applies_when: "Writing any dialogue"

  - domain: Documentary Film
    insight: |
      Documentarians find truth in footage:
      - 100 hours becomes 90 minutes
      - Best moments often unscripted
      - Edit for emotion, not chronology
      - B-roll shows what words can't

      Apply: Environmental storytelling is B-roll.
      Show the world; let dialogue be minimal.
    applies_when: "Balancing dialogue with environmental storytelling"

  - domain: Theme Park Design
    insight: |
      Theme parks master spatial narrative:
      - Every detail reinforces theme
      - "Weenies" draw attention forward
      - Transitions smooth world changes
      - Guest is protagonist of their day

      Apply: Level design is theme park design.
      Environment tells story through consistency.
    applies_when: "Collaborating with level design"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Complete Narrative Production
    skills:
      - narrative-design
      - worldbuilding
      - level-design
      - game-design-core
    workflow: |
      1. Worldbuilding establishes foundation
      2. Game design defines mechanics and themes
      3. Narrative design writes story that fits both
      4. Level design creates spaces for narrative
      5. Iterate: narrative adjusts to level realities
      6. Polish: ensure ludonarrative harmony

  - name: Dialogue Production Pipeline
    skills:
      - narrative-design
      - character-art
      - audio-design
    workflow: |
      1. Write dialogue with character personality
      2. Character art provides visual reference
      3. Narrative adds VO direction notes
      4. Audio handles recording and implementation
      5. Iterate: adjust based on performance
      6. Localization extends to other languages

  - name: Environmental Storytelling
    skills:
      - narrative-design
      - level-design
      - character-art
      - audio-design
    workflow: |
      1. Narrative defines story to tell through space
      2. Level design creates environmental layout
      3. Character art provides prop concepts
      4. Audio adds ambient storytelling
      5. Narrative verifies story is readable
      6. Iterate: player testing reveals comprehension

  - name: Quest Design Pipeline
    skills:
      - narrative-design
      - game-design-core
      - level-design
    workflow: |
      1. Narrative defines quest story and motivation
      2. Game design defines mechanics and rewards
      3. Level design creates quest spaces
      4. Narrative writes dialogue and objectives
      5. Integration testing for pacing
      6. Polish: ensure quest feels meaningful

# ============================================================================
# NARRATIVE TOOLS AND FORMATS
# ============================================================================
narrative_tools:
  ink:
    description: Inkle's industry-standard narrative scripting
    documentation: https://github.com/inkle/ink
    features:
      - Quality-based narrative (QBN)
      - Variables and state
      - Tunnels and threads
      - Integration with Unity/Unreal
    example: |
      === scene_start ===
      The merchant eyes you nervously.
      { know_secret: "You can see him sweating." }

      * [Confront directly] -> confront
      * [Play innocent] -> innocent
      * { charisma > 5 } [Charm information] -> charm

  yarn_spinner:
    description: Unity-native dialogue system
    documentation: https://docs.yarnspinner.dev/
    features:
      - Node-based structure
      - Unity integration
      - Variable system
      - Localization support

  twine:
    description: Hypertext interactive fiction tool
    documentation: https://twinery.org/
    features:
      - Visual passage editor
      - Multiple story formats (Harlowe, SugarCube)
      - Web export
      - Prototyping friendly

  articy_draft:
    description: Professional narrative design tool
    documentation: https://www.articy.com/
    features:
      - Visual flowcharting
      - Asset management
      - Team collaboration
      - Unity/Unreal export

# ============================================================================
# WORKFLOW EXAMPLES
# ============================================================================
workflow_examples:
  dialogue_writing:
    steps:
      - "Get character brief from character-art/worldbuilding"
      - "Understand scene context from game-design-core"
      - "Draft dialogue in ink/yarn format"
      - "Test by reading aloud (voice test)"
      - "Add VO direction notes"
      - "Add localization context"
      - "Integrate with game engine"
      - "Playtest for pacing and clarity"
      - "Revise based on testing"

  quest_design:
    steps:
      - "Define narrative motivation (why does this matter?)"
      - "Work with game-design-core on mechanical integration"
      - "Design with level-design for space requirements"
      - "Write objectives in active, motivated voice"
      - "Create dialogue for quest NPCs"
      - "Define branching points and consequences"
      - "Implement and test player experience"
      - "Iterate based on playtest feedback"

  environmental_story:
    steps:
      - "Define story to tell through environment"
      - "Collaborate with level-design on layout"
      - "Identify key props and their placement"
      - "Work with character-art on prop concepts"
      - "Test: can playtesters reconstruct story?"
      - "Add optional text elements (notes, signs)"
      - "Iterate: reduce text, increase environmental"

# ============================================================================
# VERSION COMPATIBILITY
# ============================================================================
version_compatibility:
  ink:
    version: "1.1+"
    unity_integration: "ink-unity-integration 1.0+"
    unreal_integration: "inkcpp plugin"

  yarn_spinner:
    version: "2.0+"
    unity_version: "2019.4+"

  twine:
    version: "2.0+"
    formats: ["Harlowe 3.x", "SugarCube 2.x"]

  articy_draft:
    version: "3.x"
    unity_plugin: "Current"
    unreal_plugin: "Current"

  notes: |
    Narrative design tools evolve constantly.
    Core principles remain:
    - Write for speaking, not reading
    - Player agency is sacred
    - Show, don't tell
    - Earn emotional moments
    - Ludonarrative harmony always

    Tools change. Craft persists.

    Current as of December 2024.
