id: worldbuilding
skill: Worldbuilding
version: "1.0"

validations:
  - id: check-magic-limits
    name: Magic System Limits
    description: Magic systems should have clear costs and limits
    pattern: "magic|spell|ability|power"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "cost|limit|restriction|weakness"
    message: "Define clear costs and limits for magic systems"
    severity: warning
    autofix: false

  - id: check-cultural-diversity
    name: Internal Cultural Diversity
    description: Cultures should have internal diversity and subgroups
    pattern: "culture|civilization|people|race"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "faction|subgroup|division|internal"
    message: "Add internal diversity to avoid monoculture stereotypes"
    severity: info
    autofix: false

  - id: check-conflict-motivation
    name: Conflict Motivation
    description: Conflicts should have clear resource/motivation basis
    pattern: "conflict|war|enemy|battle"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "resource|stake|motivation|reason"
    message: "Define clear motivations for all conflict parties"
    severity: warning
    autofix: false

  - id: check-timeline-logic
    name: Timeline Logical Consistency
    description: Historical events should follow cause-and-effect
    pattern: "timeline|history|age|era"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "because|result|consequence|led to"
    message: "Ensure historical events have logical cause-and-effect"
    severity: info
    autofix: false

  - id: check-economic-logic
    name: Economic Consistency
    description: World economics should account for magic/technology
    pattern: "economy|trade|currency|market"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "magic|technology|impact|change"
    message: "Consider how magic/technology affects economics"
    severity: info
    autofix: false

  - id: check-naming-consistency
    name: Naming Convention Consistency
    description: Names within a culture should follow consistent patterns
    pattern: "name.*generator|naming.*convention"
    file_glob: "**/*.{js,ts,yaml,json}"
    match: present
    context_pattern: "phoneme|syllable|pattern|structure"
    message: "Define consistent naming conventions per culture"
    severity: info
    autofix: false

  - id: check-implication-exploration
    name: Implication Exploration
    description: Magic/technology implications should be explored
    pattern: "magic|technology|power|ability"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "implication|society|affect|change"
    message: "Explore societal implications of magic/technology"
    severity: info
    autofix: false

  - id: check-both-sides
    name: Multiple Perspectives
    description: Conflicts should show multiple valid perspectives
    pattern: "conflict|war|dispute|feud"
    file_glob: "**/*.{md,yaml,json,txt}"
    match: present
    context_pattern: "perspective|view|believe|justify"
    message: "Present multiple perspectives in conflicts"
    severity: info
    autofix: false

pre_commit:
  - id: lore-consistency
    name: Lore Consistency Check
    command: "npm run validate:lore"
    description: Check lore documents for internal consistency

  - id: name-check
    name: Naming Consistency Check
    command: "npm run validate:names"
    description: Verify names follow cultural conventions

ci_checks:
  - id: timeline-check
    name: Timeline Validation
    command: "npm run validate:timeline"
    description: Check timeline for contradictions
    required: false

  - id: balance-check
    name: Magic/Economy Balance
    command: "npm run validate:balance"
    description: Check for magic system exploits
    required: false
