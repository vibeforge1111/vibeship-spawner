# Real-Time VFX Collaboration
# How this skill works with other specialists

id: vfx-realtime-collaboration
skill: vfx-realtime
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: game-design
    context: "Game needs visual feedback for gameplay events"
    receives:
      - "Gameplay event description (hit, collect, ability)"
      - "Desired player feedback/feeling"
      - "Timing requirements (instant, wind-up, cooldown)"
      - "Importance tier (hero moment vs ambient)"
      - "Reference from other games or media"
    provides: "VFX that communicates gameplay clearly and feels satisfying"

  - skill: unity-development
    context: "Unity project needs particle effects"
    receives:
      - "Render pipeline (URP, HDRP, Built-in)"
      - "Target platforms and performance constraints"
      - "Integration requirements (scripts, events)"
      - "Existing VFX style/reference"
    provides: "VFX Graph or Particle System implementations"

  - skill: unreal-engine
    context: "Unreal project needs Niagara effects"
    receives:
      - "Effect requirements and reference"
      - "Blueprint integration needs"
      - "Performance targets"
      - "Platform requirements"
    provides: "Niagara systems with proper module setup"

  - skill: godot-development
    context: "Godot project needs particle effects"
    receives:
      - "Effect requirements"
      - "GPUParticles3D vs CPUParticles3D preference"
      - "Shader requirements"
      - "Performance constraints"
    provides: "Particle system scenes and shader implementations"

  - skill: combat-design
    context: "Combat system needs hit feedback and ability effects"
    receives:
      - "Attack types and damage levels"
      - "Hitstop/freeze frame requirements"
      - "Element types (fire, ice, lightning)"
      - "Player vs enemy distinction needs"
      - "Combo system visual requirements"
    provides: "Combat VFX that sells impact and communicates damage"

  - skill: animation-systems
    context: "Animations need accompanying effects"
    receives:
      - "Animation timing and keyframes"
      - "Animation events/triggers"
      - "Character rig attachment points"
      - "Motion blur/speed considerations"
    provides: "Effects synchronized to animation timing"

  - skill: shader-programming
    context: "VFX needs custom shader effects"
    receives:
      - "Effect visual requirements"
      - "Performance budget"
      - "Platform targets"
      - "Integration method (particle material, screen effect)"
    provides: "Shader specifications and requirements"

  - skill: lighting-design
    context: "VFX needs to interact with scene lighting"
    receives:
      - "Light color temperature and intensity"
      - "Shadow casting requirements"
      - "Global illumination interaction"
      - "Time of day variations"
    provides: "Effects that complement rather than fight lighting"

  - skill: ui-design
    context: "UI needs flashy feedback effects"
    receives:
      - "UI element to enhance"
      - "Screen-space requirements"
      - "Resolution independence needs"
      - "Accessibility considerations"
    provides: "Screen-space effects for UI feedback"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "shader code|HLSL|GLSL|custom material|shader graph"
    delegate_to: shader-programming
    pattern: sequential
    context: "VFX requires custom shader implementation"
    handoff_data:
      - "Effect visual specification"
      - "Performance requirements"
      - "Blending mode needs"
      - "Input parameters required"
    receive: "Working shader code or shader graph"

  - trigger: "game design|player feedback|juice|game feel"
    delegate_to: game-design
    pattern: parallel
    context: "VFX needs game design context"
    handoff_data:
      - "Effect capabilities and limitations"
      - "Performance cost"
      - "Alternative visual approaches"
    receive: "Gameplay requirements and feedback priorities"

  - trigger: "sound|audio|sfx|audio sync|sound effect"
    delegate_to: game-audio
    pattern: parallel
    context: "VFX needs audio synchronization"
    handoff_data:
      - "Effect timing breakdown (anticipation, action, follow-through)"
      - "Key sync points (impact frame, peak, fadeout)"
      - "Looping information"
      - "Spatial audio requirements"
    receive: "Audio cues synchronized to visual timing"

  - trigger: "combat|hit effect|damage|attack|ability"
    delegate_to: combat-design
    pattern: parallel
    context: "VFX for combat system"
    handoff_data:
      - "Available effect types"
      - "Performance budget per effect"
      - "Timing constraints"
    receive: "Combat feedback requirements and priorities"

  - trigger: "animation|rig|skeleton|motion"
    delegate_to: animation-systems
    pattern: sequential
    context: "VFX needs animation synchronization"
    handoff_data:
      - "Effect timing requirements"
      - "Socket/attachment needs"
      - "World vs local space requirements"
    receive: "Animation events and attachment points"

  - trigger: "Unity|URP|HDRP|Unity particles|VFX Graph"
    delegate_to: unity-development
    pattern: sequential
    context: "VFX needs Unity-specific implementation"
    handoff_data:
      - "Effect specifications"
      - "Prefab structure recommendations"
      - "Script integration requirements"
    receive: "Unity project integration"

  - trigger: "Unreal|UE5|Niagara|Cascade"
    delegate_to: unreal-engine
    pattern: sequential
    context: "VFX needs Unreal implementation"
    handoff_data:
      - "Niagara module requirements"
      - "Blueprint event needs"
      - "Effect specifications"
    receive: "Unreal project integration"

  - trigger: "Godot|GPUParticles|CPUParticles"
    delegate_to: godot-development
    pattern: sequential
    context: "VFX needs Godot implementation"
    handoff_data:
      - "Particle system specifications"
      - "GDScript integration needs"
      - "Shader requirements"
    receive: "Godot project integration"

  - trigger: "performance|optimization|frame rate|profiling|GPU"
    delegate_to: performance-hunter
    pattern: parallel
    context: "VFX causing performance issues"
    handoff_data:
      - "Current particle counts and settings"
      - "Overdraw estimates"
      - "Shader complexity"
      - "Known expensive operations"
    receive: "Performance analysis and recommendations"

  - trigger: "lighting|GI|global illumination|light interaction"
    delegate_to: lighting-design
    pattern: parallel
    context: "VFX needs lighting integration"
    handoff_data:
      - "Effect emission values"
      - "HDR requirements"
      - "Shadow casting needs"
    receive: "Lighting context and requirements"

  - trigger: "mobile|iOS|Android|phone|tablet"
    delegate_to: mobile-game-dev
    pattern: sequential
    context: "VFX needs mobile optimization"
    handoff_data:
      - "Current effect specifications"
      - "Desktop performance baseline"
      - "Visual priorities (what to keep vs cut)"
    receive: "Mobile-specific constraints and requirements"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: performance-hunter
      signal: "VFX is performance bottleneck"
      action: "Reduce particle counts, simplify shaders, implement LOD"

    - skill: game-design
      signal: "Effect not communicating gameplay clearly"
      action: "Increase value contrast, adjust timing, add anticipation"

    - skill: combat-design
      signal: "Hits don't feel impactful"
      action: "Add anticipation frames, increase core brightness, add screenshake"

    - skill: game-audio
      signal: "Audio and visual timing mismatch"
      action: "Adjust effect keyframes to match audio cues"

    - skill: animation-systems
      signal: "Effect desynced from animation"
      action: "Rebind to animation events, adjust timing curves"

    - skill: qa-engineering
      signal: "Effects causing visual bugs on certain hardware"
      action: "Add fallbacks, adjust precision, test on affected hardware"

    - skill: lighting-design
      signal: "Effects fighting with scene lighting"
      action: "Adjust emission values, color grade to match scene"

  sends_feedback_to:
    - skill: game-design
      signal: "Requested effect not achievable within performance budget"
      action: "Propose alternative visual approaches or budget increase"

    - skill: combat-design
      signal: "Too many concurrent effects causing readability issues"
      action: "Prioritize which effects should dominate, which to reduce"

    - skill: animation-systems
      signal: "Animation timing needs adjustment for better VFX sync"
      action: "Request keyframe timing changes"

    - skill: performance-hunter
      signal: "VFX optimized but other systems now bottleneck"
      action: "Investigate broader performance issues"

    - skill: mobile-game-dev
      signal: "Effect cannot be scaled to mobile without complete redesign"
      action: "Request mobile-specific art direction"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Film VFX
    insight: |
      Film VFX supervisors know composition:
      - Effects serve the story, not showcase tech
      - Integration with plate is everything
      - Eye trace guides viewer attention
      - Less is often more
      - "Invisible" effects are the best effects
      Real-time VFX must be even more restrained with limited budget.
    applies_when: "Creating cinematic or narrative effects"

  - domain: Stage Magic and Illusion
    insight: |
      Magicians know misdirection:
      - Flash draws attention AWAY from the trick
      - Anticipation creates expectation
      - The reveal is nothing without the setup
      - Timing is everything
      Game VFX should direct attention, not just decorate.
    applies_when: "Creating effects that need to guide player attention"

  - domain: Traditional Animation
    insight: |
      Disney animators codified motion:
      - Squash and stretch for impact
      - Anticipation before action
      - Follow-through after action
      - Slow in, slow out for natural motion
      - Secondary action adds life
      Particles should follow the 12 principles.
    applies_when: "Designing effect timing and motion"

  - domain: Fireworks Pyrotechnics
    insight: |
      Pyrotechnicians know spectacle:
      - Sound and light are synchronized
      - Buildup creates anticipation
      - Variety in timing prevents monotony
      - The finale is earned, not given
      - Safety margins are mandatory
      Game effects should have similar pacing and hierarchy.
    applies_when: "Creating explosive or celebratory effects"

  - domain: Photography and Cinematography
    insight: |
      Photographers know exposure:
      - Dynamic range matters
      - Blow-out is intentional or disaster
      - Contrast creates drama
      - Lens effects are part of the image
      Effects should work WITH the camera, not against it.
    applies_when: "Integrating effects with post-processing"

  - domain: Particle Physics Visualization
    insight: |
      Physicists visualize the invisible:
      - Field lines show force direction
      - Color encodes properties
      - Motion reveals underlying rules
      - Abstraction can be clearer than realism
      Game effects can communicate abstract concepts visually.
    applies_when: "Creating abstract or magical effects"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Combat VFX Pipeline
    skills:
      - vfx-realtime
      - combat-design
      - game-audio
      - animation-systems
    workflow: |
      1. Combat design defines hit types and feedback needs
      2. Animation provides timing and attachment points
      3. VFX creates effects synchronized to animation
      4. Audio creates sounds matched to VFX timing
      5. Iterate on impact feel together
      6. Optimize for target platform

  - name: Unity VFX Production
    skills:
      - vfx-realtime
      - unity-development
      - shader-programming
      - performance-hunter
    workflow: |
      1. Design effect in VFX Graph or Particle System
      2. Create custom shaders for special effects
      3. Integrate with Unity events and pooling
      4. Profile and optimize
      5. Create quality tiers

  - name: Unreal VFX Production
    skills:
      - vfx-realtime
      - unreal-engine
      - shader-programming
      - performance-hunter
    workflow: |
      1. Build Niagara systems with modular design
      2. Create material functions for reuse
      3. Set up Blueprint communication
      4. Configure scalability settings
      5. Test on target platforms

  - name: Mobile VFX Optimization
    skills:
      - vfx-realtime
      - mobile-game-dev
      - shader-programming
      - performance-hunter
    workflow: |
      1. Audit desktop effects for mobile viability
      2. Create mobile-specific variants
      3. Simplify shaders (remove distortion, soft particles)
      4. Reduce particle counts by 50-75%
      5. Test on min-spec device

  - name: Stylized VFX for Indie Games
    skills:
      - vfx-realtime
      - ui-design
      - shader-programming
      - game-design
    workflow: |
      1. Establish art style with UI/design
      2. Design effect shapes that match style
      3. Create stylized shaders (toon, flat, SDF)
      4. Prioritize readability over realism
      5. Optimize for indie budget (time and performance)

# ============================================================================
# HANDOFF PROTOCOLS
# ============================================================================
handoff_protocols:
  to_shader_programming:
    required_context:
      - "Effect visual description and reference"
      - "Blending requirements (additive, alpha, multiply)"
      - "Input parameters needed (color, intensity, UV animation)"
      - "Target platforms (desktop, mobile, console)"
      - "Performance budget (texture samples, ALU complexity)"
    deliverables:
      - "Shader requirements document"
      - "Test scene or prefab for validation"
      - "Fallback requirements for low-end"

  to_game_audio:
    required_context:
      - "Effect timing breakdown with frame numbers"
      - "Key moments: anticipation start, impact peak, fadeout"
      - "Looping information and loop points"
      - "Spatial audio needs (3D, 2D, hybrid)"
      - "Layering (how many sounds can play)"
    deliverables:
      - "Timing diagram or animatic"
      - "Reference video of effect in motion"
      - "Priority tier (hero sound vs ambient)"

  to_combat_design:
    required_context:
      - "Current effect capabilities"
      - "Performance budget per effect tier"
      - "What's achievable vs aspirational"
      - "Reference of similar effects"
    deliverables:
      - "Effect prototype or mockup"
      - "Alternative approaches at different costs"
      - "Scalability options"

  from_game_design:
    expected_data:
      - "What gameplay event triggers the effect"
      - "What the player should feel (satisfaction, warning, reward)"
      - "Importance tier (how much budget to spend)"
      - "Reference from other games or media"
      - "Duration and any timing constraints"
    response:
      - "Effect design proposal"
      - "Alternative approaches"
      - "Performance cost estimate"
      - "Timeline estimate"

  from_animation_systems:
    expected_data:
      - "Animation clip and keyframe data"
      - "Animation events/notify points"
      - "Socket/attachment point names"
      - "Character rig reference"
      - "Motion blur/speed scale"
    response:
      - "Effect synchronized to animation"
      - "Required event bindings"
      - "Any timing adjustment requests"

  from_performance_hunter:
    expected_data:
      - "Profiler output showing VFX cost"
      - "Target performance metrics"
      - "Specific effects identified as problems"
      - "Platform constraints"
    response:
      - "Optimized effect variants"
      - "Before/after performance comparison"
      - "Trade-off documentation (what was cut)"
