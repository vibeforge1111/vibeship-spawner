# Level Design Sharp Edges
# Real-world gotchas that even experienced level designers hit

sharp_edges:
  - id: metrics-controller-mismatch
    summary: Level metrics don't match character controller capabilities
    severity: critical
    situation: |
      You've blocked out a level with specific jump distances, corridor widths,
      and platform heights. Then the programmer tweaks the character controller
      (maybe adjusts gravity, speed, or jump height) and suddenly half your
      jumps are impossible and the other half are trivial.
    why: |
      Level design metrics are derived from character controller properties.
      If the controller changes, every metric in the game is potentially wrong.
      This is why AAA studios lock controllers early and guard them fiercely.
    symptoms:
      - Players can't make jumps that look possible
      - Jumps feel too easy or floaty
      - Corridors feel cramped after controller change
      - Combat arenas feel too large or small
      - Speed runner exploits appear unexpectedly
    solution: |
      1. LOCK CHARACTER CONTROLLER EARLY
         - Finalize movement values before level production
         - Document all metrics derived from controller

      2. CREATE A METRICS BIBLE
         ```
         CONTROLLER VALUES
         - Walk speed: 3.5 m/s
         - Run speed: 6.0 m/s
         - Jump height: 1.2m
         - Jump distance: 3.0m at run speed
         - Character height: 1.8m
         - Character width: 0.6m

         DERIVED LEVEL METRICS
         - Min corridor width: 1.5m (2.5x character)
         - Combat corridor: 2.4m (4x character)
         - Comfortable jump: 2.4m (0.8x max)
         - Challenging jump: 2.85m (0.95x max)
         - Min door height: 2.34m (1.3x character)
         ```

      3. VERSION YOUR METRICS
         - If controller changes, document which level version
         - Track which levels need metric updates

      4. BUILD A TEST LEVEL
         - Gym level with all jump distances, heights, gaps
         - Test controller changes here FIRST

  - id: playtesting-with-experts
    summary: Only testing with team members or experienced gamers
    severity: critical
    situation: |
      Your team plays the level constantly. Everyone knows exactly where to go,
      what every button does, and every shortcut. The level ships and average
      players are completely lost, frustrated, and confused.
    why: |
      Your team has "expert blindness." They learned through hundreds of hours
      of exposure. Fresh players only get one first impression. The experience
      of a new player is unknowable to someone who's seen the level 1000 times.
    symptoms:
      - Team thinks level is "too easy" but players struggle
      - "Obvious" paths aren't followed
      - Players miss critical items that seem visible to team
      - Tutorial moments are skipped or misunderstood
      - Playtest feedback contradicts team expectations
    solution: |
      1. RECRUIT EXTERNAL PLAYTESTERS EARLY
         - Friends who don't work in games
         - Target demographic representatives
         - Different skill levels

      2. SILENT OBSERVATION PROTOCOL
         - Never help or hint during first playthrough
         - Record gameplay and facial reactions
         - Note where they pause, backtrack, or look confused
         - Track deaths and failure points

      3. ASK OPEN QUESTIONS
         Bad: "Did you see the key on the desk?"
         Good: "What were you trying to do here?"
         Bad: "The jump was obvious, right?"
         Good: "Walk me through your thought process."

      4. HEATMAP YOUR LEVELS
         - Track player position over time
         - Identify confusion zones (circling, backtracking)
         - Spot death hotspots
         - Compare intended path to actual paths

      5. FIRST PLAYTEST RULE
         "If it didn't work for the first tester, it won't
         magically work for players. Your level is wrong."

  - id: lighting-before-geometry
    summary: Finalizing lighting on geometry that will change
    severity: high
    situation: |
      You've created beautiful lighting for your blockout level. Then feedback
      comes in that a room needs to be bigger, a corridor needs to move, or a
      combat arena needs more cover. Now all that lighting work is wasted.
    why: |
      Lighting is intimately tied to geometry. Move a wall and light bounces
      differently. Change a ceiling height and the mood shifts. Lighting should
      be the polish pass, not the foundation.
    symptoms:
      - Lighting needs complete redo after level changes
      - Sunk cost fallacy prevents necessary geometry changes
      - "We can't change that, the lighting is done"
      - Beautiful areas that don't play well
    solution: |
      1. PRODUCTION ORDER
         ```
         Blockout → Playtest → Iterate → GEOMETRY LOCK
                                              ↓
         Art Pass → Lighting Pass → Polish → Ship
         ```

      2. LIGHTING PHASES
         - PLACEHOLDER: Basic light to test visibility
         - FUNCTIONAL: Guides player, supports gameplay
         - FINAL: Beauty, mood, polish

      3. GEOMETRY LOCK CRITERIA
         - Level plays well with placeholder art
         - No major layout feedback from playtests
         - All metrics validated against controller
         - Combat encounter timing feels right

      4. NEVER SAY
         "Don't worry, lighting will fix it."
         If the space doesn't work in graybox, lighting won't save it.

  - id: one-way-softlock
    summary: Creating situations where players can't progress or return
    severity: critical
    situation: |
      Player drops into an area they can't escape from without a required item.
      Or they use a one-way door and can't return for an item they missed.
      The only option is reload or restart.
    why: |
      Softlocks destroy player trust and waste their time. One bad softlock can
      result in a refund or negative review. Players expect to never be fully
      stuck without a way forward or backward.
    symptoms:
      - Bug reports about being stuck
      - Players asking "is this a bug?"
      - Reload/restart to recover
      - Negative reviews mentioning getting stuck
    solution: |
      1. EVERY ONE-WAY TRANSITION NEEDS AUDIT
         - Can player return if needed?
         - Are all required items already collected?
         - Is there a way forward from this point?

      2. SOFTLOCK TESTING CHECKLIST
         ```
         [ ] Enter area without required key - can escape?
         [ ] Fall into pit - can climb out or die to respawn?
         [ ] One-way door - anything critical behind you?
         [ ] Consumable used - alternative exists?
         [ ] Sequence break - does story still work?
         ```

      3. ESCAPE HATCHES
         - Suicide option (lava pit, respawn trigger)
         - Hidden return route
         - Checkpoint just before commitment
         - Fast travel after point of no return

      4. ITEM PLACEMENT RULE
         Required items NEVER placed after one-way transitions
         that occur before their use location.

  - id: the-rule-of-three-violation
    summary: Breaking player expectations after establishing a pattern
    severity: high
    situation: |
      The first three switches opened doors. The fourth switch triggers a trap
      that kills the player. Or the first three red barrels exploded, the fourth
      is just decoration.
    why: |
      Players learn through patterns. Violating established patterns without
      warning feels unfair, not clever. The "gotcha" moment punishes players
      for learning what you taught them.
    symptoms:
      - "That's unfair!" player reactions
      - Memorization-based gameplay (die to learn)
      - Players become paranoid, test everything
      - Pacing slows as trust erodes
    solution: |
      1. IF YOU BREAK A PATTERN, TELEGRAPH IT
         - Visual difference (different color, damage, glow)
         - Audio cue (different sound, music shift)
         - Environmental context (trap mechanisms visible)

      2. THE FAIR WARNING TEST
         "Would a first-time player have any reason to
         expect this would be different?"
         If no, either telegraph or don't break the pattern.

      3. CONSISTENCY TRUMPS CLEVERNESS
         A predictable game is learnable.
         An unpredictable game is frustrating.

      4. SUBVERSION vs BETRAYAL
         SUBVERSION: Pattern broken with clear signals
         BETRAYAL: Pattern broken with no warning
         One creates memorable moments, the other creates rage.

  - id: door-problem
    summary: Players don't realize something is a door or how to open it
    severity: medium
    situation: |
      Players stand in front of an exit for minutes, not realizing it's a door.
      Or they find the door but can't figure out how to open it. "I thought
      this was a wall," "I didn't know I could interact with that."
    why: |
      Doors are so fundamental that designers forget to teach them. But your
      door might work differently than the last game player played. Every
      interactive element needs visual language.
    symptoms:
      - Players running past exits
      - "How do I open this?" questions
      - Wandering in completed rooms
      - Prompt spam near doors
    solution: |
      1. DOOR VISUAL LANGUAGE
         - Distinct from walls (frame, color, material)
         - Handles, hinges, or clear interaction point
         - Light seeping through edges
         - Sound from beyond

      2. INTERACTION FEEDBACK
         - Highlight on approach (subtle glow, outline)
         - Prompt when in range
         - Audio cue when interactable
         - Physical response to failed attempt

      3. LOCKED DOOR COMMUNICATION
         - Different visual state
         - Specific feedback on attempt
         - Hint toward solution
         - "This door requires a keycard" not just "locked"

      4. THE STREAM TEST
         Watch someone play your level for the first time.
         How long do they spend on doors? If more than
         2 seconds to understand, improve the signaling.

  - id: combat-arena-camping-spot
    summary: Unintended defensive positions that trivialize encounters
    severity: high
    situation: |
      Players discover a corner, doorway, or platform where enemies can't
      effectively attack them. They camp there, picking off enemies safely.
      Your carefully designed combat becomes a boring shooting gallery.
    why: |
      Players will always find the path of least resistance. Cheese spots that
      trivialize combat make the game less fun but players can't help using them.
      It's your job to prevent unfun optimal strategies.
    symptoms:
      - All playtesters end up in same spot
      - Players say combat is "too easy"
      - Enemies can't reach player position
      - Combat duration much shorter than intended
    solution: |
      1. ELIMINATE INVINCIBLE POSITIONS
         - No corners where only one enemy can attack at once
         - No doorways where enemies line up to die
         - No ledges enemies can't reach at all

      2. FORCE MOVEMENT
         - Grenades or explosives flush camping
         - Flanking enemies from multiple routes
         - Objectives that require leaving cover
         - Environmental hazards in static positions

      3. ARENA DESIGN RULES
         ```
         For every defensive position:
         [ ] 2+ angles of attack are possible
         [ ] Cover is destructible or temporary
         [ ] Position has resource pressure (ammo, health)
         [ ] Something forces occasional repositioning
         ```

      4. TEST WITH OPTIMAL PLAYERS
         Ask playtesters: "Find the easiest way to win."
         If their method is boring, redesign the space.

  - id: open-world-icon-soup
    summary: Overwhelming players with map markers and collectibles
    severity: medium
    situation: |
      Open the map and there are 500 icons. Question marks, collectibles,
      towers, camps, treasures, races, side quests. Player closes map feeling
      overwhelmed rather than excited.
    why: |
      More content isn't always better. When everything is marked, nothing is
      discovered. The joy of exploration is replaced by checkbox completion.
      Players feel obligated rather than curious.
    symptoms:
      - Players avoiding the map
      - Ignoring side content entirely
      - "I'll do that later" (never returns)
      - Completionists burning out
      - "Too much content" criticism
    solution: |
      1. LAYER INFORMATION REVEAL
         - Only show nearby or discovered icons
         - Unlock map regions progressively
         - Let players filter icon types
         - Quest-relevant icons only when active

      2. DISCOVERY vs MARKING
         - Some content unmarked, found through exploration
         - Environmental hints instead of icons
         - NPC rumors point direction
         - Reward finding things yourself

      3. MEANINGFUL AGGREGATION
         Instead of: 50 individual "chest" icons
         Show: "Region: 5/12 Chests Found"

      4. UBISOFT FATIGUE AVOIDANCE
         "If your map looks like Ubisoft, you've lost the
         sense of adventure."

  - id: multiplayer-spawn-sightlines
    summary: Spawn points visible from enemy positions
    severity: critical
    situation: |
      Player spawns and immediately dies because an enemy has line-of-sight to
      their spawn. Spawn camping becomes possible, ruining the experience for
      new spawners.
    why: |
      Spawning should be a reset, not a continuation of dying. If spawns can
      be watched, skilled players will abuse this. Spawn protection is a
      band-aid; spawn design is the cure.
    symptoms:
      - "Spawn camping" complaints
      - Kill streaks immediately after enemy spawn
      - Players quitting after spawn deaths
      - Spawn protection band-aids added
    solution: |
      1. SPAWN REQUIREMENTS
         ```
         Every spawn point must have:
         [ ] No enemy sightlines within 3 seconds of spawn
         [ ] 3+ exit directions
         [ ] Immediate cover available
         [ ] No adjacent spawn in enemy sightline
         ```

      2. DYNAMIC SPAWNING
         - Spawn further from enemies
         - Flip spawns based on team positions
         - Avoid recently killed locations

      3. SPAWN PROTECTION IS FAILURE
         If you need invincibility on spawn, your spawns are bad.
         Players should survive through design, not god mode.

      4. TEST PROTOCOL
         Have skilled players try to spawn camp.
         If possible for more than 2 kills, redesign spawns.

  - id: platformer-coyote-time
    summary: Forgetting about coyote time in jump distance calculations
    severity: medium
    situation: |
      Your game has coyote time (can still jump briefly after leaving platform).
      You design jumps based on edge-to-edge distance. Players actually jump
      earlier than the edge. Your "tight" jumps are now impossible.
    why: |
      Players don't jump from the exact edge - they jump when it feels right.
      Coyote time and jump buffering change the effective jump window. Your
      metrics must account for how players actually play.
    symptoms:
      - "I pressed jump!" complaints
      - Deaths at platform edges
      - Jumps working sometimes and not others
      - Speedrunners jumping early consistently
    solution: |
      1. ADJUSTED METRICS
         ```
         Visual gap: 3.0m
         With coyote time (0.1s at 6m/s): +0.6m effective
         With jump buffer: Adds timing forgiveness

         True comfortable gap = Visual gap - coyote distance
         Design the visual gap LARGER than the actual
         challenge you want.
         ```

      2. PLATFORM EDGE DESIGN
         - Extend collision slightly beyond visual edge
         - Players forgive generous hitboxes
         - "I made that!" is better than "I didn't!?"

      3. TEST AT 30 FPS
         Coyote time feels different at different framerates.
         Test your margins at lowest supported framerate.

  - id: environmental-storytelling-obscurity
    summary: Critical story beats told only through easily-missed environment details
    severity: medium
    situation: |
      The game's plot twist is revealed through a diary on a desk in an optional
      room, newspaper clippings behind some crates, and audio logs players
      skip. Main-path players have no idea what's happening in the story.
    why: |
      Environmental storytelling is additive, not replacement. It rewards
      attentive players but shouldn't be the only source of story. Dark Souls
      works because systems tell the story, not just item descriptions.
    symptoms:
      - "What's the story?" player confusion
      - Main narrative unclear to most players
      - Rich lore that nobody finds
      - Critics praise story, players don't understand it
    solution: |
      1. STORY LAYERING
         ```
         LAYER 1 (Critical Path - Everyone sees):
         - Cutscenes, key dialogue, obvious events
         - Main story is completely clear

         LAYER 2 (Optional but Findable):
         - Environmental details on main path
         - Side conversations
         - Depth for those paying attention

         LAYER 3 (Hidden - Explorers Only):
         - Secret rooms, obscure audio logs
         - Lore for dedicated fans
         - Never required for main story
         ```

      2. THE SPEEDRUN TEST
         If someone runs straight through, skipping all
         optional content, do they understand the plot?
         If no, your critical path is failing.

      3. ENVIRONMENT SUPPORTS, NOT REPLACES
         Environmental storytelling works best when it
         adds depth to story you already know, not when
         it IS the story.
