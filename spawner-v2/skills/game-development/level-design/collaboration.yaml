id: level-design-collaboration
skill: level-design
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: game-design
    context: "Core mechanics ready, need level layouts"
    receives:
      - "Character controller metrics"
      - "Core mechanic definitions"
      - "Ability set and timing data"
      - "Enemy behavior specifications"
      - "Progression system design"
      - "Game pacing guidelines"
    provides: "Levels that showcase and teach mechanics organically"

  - skill: narrative-design
    context: "Story needs physical spaces"
    receives:
      - "Story beats and pacing"
      - "Key narrative moments"
      - "Environmental storytelling needs"
      - "Character movement through world"
      - "World lore and history"
    provides: "Spaces that support and enhance narrative"

  - skill: product-management
    context: "Feature requirements for playable content"
    receives:
      - "Player experience goals"
      - "Level count and scope"
      - "Target playtime per level"
      - "Replayability requirements"
      - "Multiplayer map requirements"
    provides: "Playable content meeting requirements"

  - skill: ui-design
    context: "Navigation and map UI integration"
    receives:
      - "Minimap requirements"
      - "Waypoint system design"
      - "HUD real estate constraints"
      - "Accessibility requirements"
    provides: "Level design that works with or without UI assistance"

# ============================================================================
# DELEGATION TRIGGERS (When to hand off to other skills)
# ============================================================================
delegation_triggers:
  - trigger: "art assets|textures|materials|final visuals|environment art"
    delegate_to: environment-art
    pattern: sequential
    context: "Blockout complete and playtested, ready for art pass"
    handoff_data:
      - "Locked geometry and layout"
      - "Material and texture requirements"
      - "Asset list with priority"
      - "Reference images and mood boards"
      - "Technical constraints (poly budget, texture sizes)"
    receive: "Final art assets for level"

  - trigger: "lighting|mood lighting|time of day|atmosphere"
    delegate_to: lighting-design
    pattern: sequential
    context: "Geometry locked, needs lighting pass"
    handoff_data:
      - "Locked geometry layout"
      - "Player flow and focal points"
      - "Mood and atmosphere requirements"
      - "Gameplay lighting needs (guide player, hide/reveal)"
      - "Time of day if applicable"
    receive: "Lighting setup supporting gameplay and mood"

  - trigger: "mechanics|abilities|controller|movement systems|combat systems"
    delegate_to: game-design
    pattern: sequential
    context: "Level design needs core mechanics finalized"
    handoff_data:
      - "Current level concepts and goals"
      - "Mechanic requirements for layouts"
      - "Pacing needs"
      - "Player ability requests"
    receive: "Finalized mechanics and controller values"

  - trigger: "story|narrative|dialogue|lore|plot|characters"
    delegate_to: narrative-design
    pattern: parallel
    context: "Level needs story integration"
    handoff_data:
      - "Current level layout"
      - "Potential story beat locations"
      - "Environmental storytelling opportunities"
      - "NPC placement options"
    receive: "Story beats and narrative content"

  - trigger: "audio|sound|music|ambience|sfx|sound effects"
    delegate_to: audio-design
    pattern: parallel
    context: "Level needs audio design pass"
    handoff_data:
      - "Level layout and zones"
      - "Mood and atmosphere per area"
      - "Key gameplay moments"
      - "Environmental sound opportunities"
      - "Music transition points"
    receive: "Audio implementation for level"

  - trigger: "UI|HUD|minimap|compass|waypoints|objective markers"
    delegate_to: ui-design
    pattern: parallel
    context: "Level navigation needs UI support"
    handoff_data:
      - "Level layout and landmarks"
      - "Critical path information"
      - "Objective locations"
      - "Collectible and secret locations"
      - "Fast travel points"
    receive: "Navigation UI design"

  - trigger: "AI|enemy behavior|pathfinding|NPC movement"
    delegate_to: ai-programming
    pattern: sequential
    context: "Level needs AI navigation and behavior"
    handoff_data:
      - "Navmesh requirements"
      - "Patrol routes"
      - "Cover positions"
      - "Engagement zones"
      - "Stealth areas"
    receive: "AI implementation for level"

  - trigger: "performance|optimization|frame rate|draw calls|LOD"
    delegate_to: performance-optimization
    pattern: sequential
    context: "Level needs performance pass"
    handoff_data:
      - "Current level layout"
      - "Problem areas identified"
      - "Target hardware specs"
      - "Performance budget"
    receive: "Optimized level"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: qa-engineering
      signal: "Playtesting feedback and bug reports"
      action: "Iterate on level layout and flow"

    - skill: game-design
      signal: "Mechanic changes affecting level metrics"
      action: "Update level geometry to match new metrics"

    - skill: narrative-design
      signal: "Story changes affecting level structure"
      action: "Adapt level to new narrative requirements"

    - skill: environment-art
      signal: "Art pipeline constraints"
      action: "Adjust layout for asset reuse and production"

    - skill: performance-optimization
      signal: "Performance issues in level"
      action: "Optimize geometry and sightlines"

  sends_feedback_to:
    - skill: game-design
      signal: "Mechanic doesn't work in practice"
      action: "Suggest mechanic adjustments"

    - skill: environment-art
      signal: "Asset requirements and priorities"
      action: "Guide art production focus"

    - skill: lighting-design
      signal: "Lighting not supporting gameplay"
      action: "Request lighting adjustments"

    - skill: narrative-design
      signal: "Story beats don't fit level flow"
      action: "Suggest narrative pacing changes"

    - skill: ui-design
      signal: "Players getting lost despite design"
      action: "Request navigation UI support"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Architecture
    insight: |
      Architects know spatial experience:
      - Circulation paths define user flow
      - Scale creates emotional response
      - Light is a building material
      - Threshold moments mark transitions
      - Form follows function, but beauty matters
      Level design is digital architecture.
    applies_when: "Designing spatial flow and atmosphere"

  - domain: Theme Park Design (Imagineering)
    insight: |
      Disney Imagineers know immersion:
      - Weenies draw guests forward
      - Transition zones shift expectations
      - Forced perspective creates scale
      - Story is told through every detail
      - Queue experiences are part of the ride
      Games are interactive theme parks.
    applies_when: "Designing open worlds and hub areas"

  - domain: Cinematography
    insight: |
      Cinematographers know composition:
      - Rule of thirds guides framing
      - Leading lines draw the eye
      - Depth creates dimension
      - Lighting tells the story
      - Every frame is intentional
      Game cameras are virtual cinematographers.
    applies_when: "Framing vistas and key moments"

  - domain: Theatrical Stage Design
    insight: |
      Stage designers know focus:
      - The stage directs attention
      - Blocking guides understanding
      - Lighting reveals and conceals
      - Set changes mark act breaks
      - Audience position affects experience
      Levels are stages for player performance.
    applies_when: "Designing combat arenas and boss rooms"

  - domain: Urban Planning
    insight: |
      Urban planners know navigation:
      - Landmarks enable wayfinding
      - Districts have identity
      - Paths connect destinations
      - Nodes are decision points
      - Edges define boundaries
      Open world design is city planning.
    applies_when: "Designing cities and large open spaces"

  - domain: Cognitive Psychology
    insight: |
      Cognitive psychologists know learning:
      - Scaffolding builds understanding
      - Chunking manages complexity
      - Spaced repetition cements skills
      - Immediate feedback accelerates learning
      - Zone of proximal development defines challenge
      Good level design applies learning science.
    applies_when: "Designing tutorials and teaching through play"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Linear Campaign Level
    skills:
      - level-design
      - game-design
      - narrative-design
      - environment-art
      - lighting-design
      - audio-design
    workflow: |
      1. Game design provides mechanics and metrics
      2. Narrative design provides story beats
      3. Level design creates blockout
      4. Playtest and iterate blockout
      5. GEOMETRY LOCK
      6. Environment art creates assets
      7. Lighting design does light pass
      8. Audio design adds soundscape
      9. Final polish and ship

  - name: Multiplayer Map
    skills:
      - level-design
      - game-design
      - environment-art
      - qa-engineering
    workflow: |
      1. Game design provides mode requirements
      2. Level design creates blockout with metrics
      3. Extensive playtesting for balance
      4. Iterate based on playtest data
      5. GEOMETRY LOCK
      6. Art pass with callout-friendly landmarks
      7. QA testing for exploits and balance
      8. Ship with monitoring for post-launch balance

  - name: Open World Region
    skills:
      - level-design
      - game-design
      - narrative-design
      - environment-art
      - ui-design
    workflow: |
      1. Game design provides content types
      2. Narrative design provides region story
      3. Level design creates macro layout
      4. Content placement and density planning
      5. Landmark and navigation design
      6. UI integration for map and waypoints
      7. Environment art for visual distinction
      8. Iterate based on open world testing

  - name: Boss Arena
    skills:
      - level-design
      - game-design
      - lighting-design
      - audio-design
    workflow: |
      1. Game design provides boss mechanics
      2. Level design creates arena supporting fight phases
      3. Lighting design creates dramatic atmosphere
      4. Audio design amplifies intensity
      5. Extensive playtesting and iteration
      6. Polish for memorable encounter

# ============================================================================
# HANDOFF ARTIFACTS
# ============================================================================
handoff_artifacts:
  produces:
    - name: Level Blockout
      format: "Engine scene file (Unity/Unreal/Godot)"
      contains:
        - "Graybox geometry"
        - "Player path markers"
        - "Spawn points"
        - "Placeholder props"

    - name: Level Design Document
      format: "Markdown or GDD section"
      contains:
        - "Level overview and goals"
        - "Top-down layout map"
        - "Pacing graph"
        - "Encounter list"
        - "Key metrics"

    - name: Metrics Document
      format: "Spreadsheet or config file"
      contains:
        - "Character controller values"
        - "Derived level metrics"
        - "Jump gap standards"
        - "Corridor width standards"

    - name: Playtest Report
      format: "Document with heatmaps"
      contains:
        - "Playtester observations"
        - "Death location heatmap"
        - "Navigation confusion points"
        - "Time-to-complete data"
        - "Feedback summary"

  consumes:
    - name: Character Controller Spec
      from: game-design
      requires:
        - "Movement speeds"
        - "Jump height and distance"
        - "Character dimensions"
        - "Special movement abilities"

    - name: Narrative Outline
      from: narrative-design
      requires:
        - "Story beats for level"
        - "Key narrative moments"
        - "Environmental storytelling notes"

    - name: Art Style Guide
      from: environment-art
      requires:
        - "Visual reference"
        - "Material palette"
        - "Architectural style"
        - "Prop kit components"
