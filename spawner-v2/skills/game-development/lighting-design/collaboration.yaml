# Lighting Design Collaboration
# How this skill works with other specialists

id: lighting-design-collaboration
skill: lighting-design
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: game-design
    context: "Game needs lighting to support gameplay and visual identity"
    receives:
      - "Target mood and atmosphere"
      - "Key gameplay moments requiring visual focus"
      - "Time-of-day requirements"
      - "Art style/visual direction"
      - "Target platforms and performance constraints"
    provides: "Complete lighting setup supporting gameplay goals"

  - skill: unity-development
    context: "Unity project needs lighting implementation"
    receives:
      - "Render pipeline (URP/HDRP/Built-in)"
      - "Scene structure and scale"
      - "Existing material setup"
      - "Performance budget"
      - "Quality tier requirements"
    provides: "Optimized Unity lighting configuration"

  - skill: unreal-engine
    context: "Unreal project needs lighting setup"
    receives:
      - "Lumen/baked mode decision"
      - "Level streaming requirements"
      - "Nanite integration needs"
      - "Target hardware specs"
    provides: "Optimized Unreal lighting with proper Lightmass/Lumen config"

  - skill: godot-development
    context: "Godot project needs lighting implementation"
    receives:
      - "Godot version (3.x/4.x)"
      - "SDFGI or baked requirements"
      - "VoxelGI considerations"
      - "Performance targets"
    provides: "Godot-optimized lighting setup"

  - skill: threejs-3d-graphics
    context: "Web 3D project needs lighting"
    receives:
      - "WebGL version constraints"
      - "Performance budget (mobile web?)"
      - "Shadow requirements"
      - "Post-processing needs"
    provides: "Web-optimized Three.js lighting"

  - skill: worldbuilding
    context: "Environment art needs lighting pass"
    receives:
      - "Environment art assets"
      - "Intended mood per area"
      - "Narrative lighting moments"
      - "Material setup"
    provides: "Lighting that enhances environment storytelling"

  - skill: vr-ar-development
    context: "VR/AR project needs lighting"
    receives:
      - "Target headset specs"
      - "Foveated rendering considerations"
      - "Latency requirements"
      - "Comfort considerations (brightness)"
    provides: "VR-optimized lighting maintaining frame rate"

  - skill: mobile-game-dev
    context: "Mobile game needs lighting optimization"
    receives:
      - "Target device tiers"
      - "Battery life concerns"
      - "Thermal throttling limits"
      - "Memory constraints"
    provides: "Mobile-appropriate lighting pipeline"

  - skill: shader-programming
    context: "Custom lighting model needed"
    receives:
      - "Non-standard lighting requirements"
      - "NPR/stylized rendering needs"
      - "Custom material models"
    provides: "Integration with custom shaders"

  - skill: performance-hunter
    context: "Lighting identified as performance issue"
    receives:
      - "Profiling data showing lighting bottleneck"
      - "GPU frame analysis"
      - "Target frame time budget"
    provides: "Optimized lighting meeting performance targets"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "Unity|URP|HDRP|Built-in|ShaderGraph"
    delegate_to: unity-development
    pattern: sequential
    context: "Lighting implementation specific to Unity pipeline"
    handoff_data:
      - "Lighting concept and requirements"
      - "Recommended settings per pipeline"
      - "Quality tier configurations"
    receive: "Unity-specific implementation guidance"

  - trigger: "Unreal|UE5|UE4|Lumen|Lightmass|Nanite"
    delegate_to: unreal-engine
    pattern: sequential
    context: "Lighting implementation in Unreal"
    handoff_data:
      - "Lighting strategy (baked/Lumen/hybrid)"
      - "Lightmass settings if baked"
      - "Lumen configuration if realtime"
    receive: "Unreal-specific implementation"

  - trigger: "Godot|GDScript|SDFGI|VoxelGI"
    delegate_to: godot-development
    pattern: sequential
    context: "Lighting implementation in Godot"
    handoff_data:
      - "GI approach recommendation"
      - "Light/probe setup"
      - "Performance considerations"
    receive: "Godot-specific implementation"

  - trigger: "Three.js|WebGL|JavaScript 3D|web rendering"
    delegate_to: threejs-3d-graphics
    pattern: sequential
    context: "Web-based lighting implementation"
    handoff_data:
      - "Light setup recommendations"
      - "Shadow configuration"
      - "Performance optimization"
    receive: "Three.js implementation details"

  - trigger: "shader|custom lighting|BRDF|stylized|toon|NPR"
    delegate_to: shader-programming
    pattern: sequential
    context: "Custom lighting shader needed"
    handoff_data:
      - "Lighting model requirements"
      - "Reference materials"
      - "Performance constraints"
    receive: "Custom shader implementation"

  - trigger: "environment art|level art|world building|scene dressing"
    delegate_to: worldbuilding
    pattern: parallel
    context: "Lighting works with environment art"
    handoff_data:
      - "Lighting considerations for assets"
      - "Material requirements"
      - "Light placement zones"
    receive: "Environment assets ready for lighting"

  - trigger: "VR|AR|XR|Oculus|Meta Quest|SteamVR"
    delegate_to: vr-ar-development
    pattern: sequential
    context: "VR/AR lighting requirements"
    handoff_data:
      - "Optimized lighting approach"
      - "Foveated rendering compatibility"
      - "Performance target"
    receive: "VR/AR specific requirements"

  - trigger: "mobile|iOS|Android|phone|tablet"
    delegate_to: mobile-game-dev
    pattern: sequential
    context: "Mobile platform lighting"
    handoff_data:
      - "Simplified lighting approach"
      - "Quality tier settings"
      - "Memory budget"
    receive: "Mobile platform constraints"

  - trigger: "performance|optimize|framerate|profile|GPU bound"
    delegate_to: performance-hunter
    pattern: parallel
    context: "Lighting performance optimization"
    handoff_data:
      - "Current lighting setup"
      - "Performance metrics"
      - "Optimization constraints"
    receive: "Performance analysis and recommendations"

  - trigger: "game design|gameplay|player guidance|narrative"
    delegate_to: game-design
    pattern: sequential
    context: "Lighting for gameplay purposes"
    handoff_data:
      - "Lighting capabilities"
      - "Performance constraints"
      - "Technical limitations"
    receive: "Gameplay requirements for lighting"

  - trigger: "animation|character|cutscene|cinematic"
    delegate_to: animation-systems
    pattern: parallel
    context: "Lighting for animated content"
    handoff_data:
      - "Lighting setup for characters"
      - "Dynamic lighting constraints"
      - "Probe placement for animation"
    receive: "Animation timing and requirements"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: performance-hunter
      signal: "Lighting is the performance bottleneck"
      action: "Reduce quality, switch to baked, optimize shadow cascades"

    - skill: unity-development
      signal: "Lighting breaks with render pipeline changes"
      action: "Adjust for specific pipeline requirements"

    - skill: unreal-engine
      signal: "Lumen artifacts or performance issues"
      action: "Tune Lumen settings or switch to baked"

    - skill: mobile-game-dev
      signal: "Mobile can't handle current lighting"
      action: "Create simplified mobile lighting tier"

    - skill: vr-ar-development
      signal: "Lighting causing VR performance issues"
      action: "Simplify to meet VR frame rate requirements"

    - skill: worldbuilding
      signal: "Environment art doesn't work with current lighting"
      action: "Adjust lighting to match art direction"

    - skill: qa-engineering
      signal: "Lighting bugs on specific hardware"
      action: "Add fallbacks, adjust for hardware compatibility"

  sends_feedback_to:
    - skill: game-design
      signal: "Lighting limitations affect gameplay"
      action: "Adjust level design for lighting constraints"

    - skill: worldbuilding
      signal: "Materials need adjustment for lighting"
      action: "Modify material properties for better light response"

    - skill: shader-programming
      signal: "Standard lighting insufficient, custom needed"
      action: "Develop custom lighting model"

    - skill: performance-hunter
      signal: "Lighting optimized but other bottlenecks exist"
      action: "Investigate non-lighting performance issues"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Cinematography
    insight: |
      Film DPs have mastered light for over a century:
      - Three-point lighting creates depth and dimension
      - Color temperature tells emotional story
      - Practical lights motivate light placement
      - Negative fill (removing light) is as important as adding
      - Silhouettes and rim light create iconic moments
      Games can learn much, but must adapt for interactivity.
    applies_when: "Setting up dramatic lighting, cutscenes, or establishing mood"

  - domain: Stage Lighting Design
    insight: |
      Theater lighting works in real-time like games:
      - Front light for visibility, side light for dimension
      - Color washes establish mood quickly
      - Follow spots draw attention (like player highlights)
      - Gobos create texture and shadow interest
      - Light cues are scripted transitions (like time-of-day)
      Stage lighting is the original realtime lighting system.
    applies_when: "Designing gameplay lighting that guides the player"

  - domain: Architectural Lighting
    insight: |
      Architects understand functional lighting:
      - Ambient, task, and accent layers
      - Light placement affects behavior and mood
      - Energy efficiency matters (like performance budgets)
      - Daylight integration requires careful planning
      - Materials and light work together
      Interior game spaces benefit from architectural thinking.
    applies_when: "Lighting interior spaces or architectural environments"

  - domain: Photography
    insight: |
      Photographers understand exposure and dynamic range:
      - HDR capture reveals what eyes see, screens can't show
      - Exposure compensation for bright/dark scenes
      - White balance affects emotional response
      - Soft vs hard light changes mood dramatically
      - Post-processing is part of the final image
      HDR pipelines are digital photography applied to games.
    applies_when: "Setting up HDR, tonemapping, or exposure systems"

  - domain: Color Science
    insight: |
      Color scientists understand perception:
      - Simultaneous contrast affects perceived color
      - Color constancy affects material appearance
      - Metamerism causes color matching problems
      - Gamut limitations affect final output
      - Perceptual uniformity matters for gradients
      Color management prevents "it looked different on my monitor."
    applies_when: "Color grading, material appearance, or cross-platform consistency"

  - domain: Physics (Optics)
    insight: |
      Physicists understand light transport:
      - Inverse square falloff is fundamental
      - Scattering in media creates atmosphere
      - Fresnel effect explains rim lighting
      - Energy conservation in PBR
      - Diffraction and interference for special effects
      Physically-based rendering is applied optics.
    applies_when: "Implementing PBR, volumetrics, or realistic light behavior"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Open World Day/Night Cycle
    skills:
      - lighting-design
      - game-design
      - worldbuilding
      - shader-programming
      - performance-hunter
    workflow: |
      1. Define time-of-day requirements (game-design)
      2. Create environment art with material response (worldbuilding)
      3. Build time-of-day system architecture (lighting-design)
      4. Implement custom sky/atmosphere shader (shader-programming)
      5. Optimize for target platforms (performance-hunter)
      6. Integrate probe blending (lighting-design)
      7. Performance validation (performance-hunter)

  - name: Interior/Exterior Game Environment
    skills:
      - lighting-design
      - worldbuilding
      - unity-development
      - performance-hunter
    workflow: |
      1. Plan exposure zones (lighting-design)
      2. Create transition spaces in level (worldbuilding)
      3. Set up baked + mixed lighting (lighting-design + unity-development)
      4. Place probes with special attention to transitions
      5. Profile and optimize (performance-hunter)
      6. Quality tier adjustments

  - name: Stylized/NPR Game Lighting
    skills:
      - lighting-design
      - shader-programming
      - game-design
    workflow: |
      1. Define visual style (game-design)
      2. Design custom lighting model (lighting-design + shader-programming)
      3. Implement shader (shader-programming)
      4. Integrate with lighting system (lighting-design)
      5. Art direction validation

  - name: VR Optimized Lighting
    skills:
      - lighting-design
      - vr-ar-development
      - performance-hunter
    workflow: |
      1. Establish VR performance budget (vr-ar-development)
      2. Design minimal lighting approach (lighting-design)
      3. Implement fully baked lighting
      4. Optimize probe counts (performance-hunter)
      5. Validate on target headset
      6. Iterate for comfort and quality

  - name: Mobile Game Lighting
    skills:
      - lighting-design
      - mobile-game-dev
      - performance-hunter
    workflow: |
      1. Establish device tier targets (mobile-game-dev)
      2. Design mobile-first lighting (lighting-design)
      3. Create quality tiers
      4. Profile on target devices (performance-hunter)
      5. Optimize lightmap size and compression
      6. Validate thermal performance

# ============================================================================
# HANDOFF PROTOCOLS
# ============================================================================
handoff_protocols:
  to_engine_skills:
    required_context:
      - "Target engine and version"
      - "Render pipeline / configuration"
      - "Target platforms"
      - "Performance budget"
      - "Lighting approach (baked/realtime/mixed)"
    deliverables:
      - "Lighting concept document"
      - "Recommended settings"
      - "Quality tier specifications"
      - "Known limitations and workarounds"

  to_shader_programming:
    required_context:
      - "Non-standard lighting requirement description"
      - "Reference images/examples"
      - "Performance constraints"
      - "Integration requirements"
    deliverables:
      - "Lighting model specification"
      - "Parameter requirements"
      - "Expected inputs/outputs"

  to_worldbuilding:
    required_context:
      - "Lighting zones and mood"
      - "Material requirements for lighting"
      - "Light placement guidelines"
      - "Probe placement requirements"
    deliverables:
      - "Lighting reference per area"
      - "Material setup recommendations"
      - "Light placement zones"

  from_game_design:
    expected_data:
      - "Gameplay requirements"
      - "Player guidance needs"
      - "Mood/atmosphere goals"
      - "Time-of-day requirements"
    response:
      - "Lighting design supporting gameplay"
      - "Technical feasibility assessment"
      - "Performance implications"

  from_performance_hunter:
    expected_data:
      - "Profiling data"
      - "Identified bottlenecks"
      - "Target metrics"
      - "Platform constraints"
    response:
      - "Optimized lighting setup"
      - "Quality tradeoff options"
      - "Performance validation data"

# ============================================================================
# INTEGRATION POINTS
# ============================================================================
integration_points:
  with_animation:
    description: "Lighting for animated characters and cutscenes"
    considerations:
      - "Character lighting consistency across scenes"
      - "Cutscene-specific lighting rigs"
      - "Dynamic light animation"
      - "Probe placement for animation paths"

  with_vfx:
    description: "Lighting interaction with visual effects"
    considerations:
      - "VFX as light sources (explosions, magic)"
      - "Lighting affecting particles"
      - "HDR intensity for VFX"
      - "Performance budget sharing"

  with_audio:
    description: "Audio-reactive lighting"
    considerations:
      - "Music-driven lighting changes"
      - "Sound-triggered light events"
      - "Diegetic light sources"
      - "Mood alignment between audio and light"

  with_ai:
    description: "AI awareness of lighting conditions"
    considerations:
      - "Enemy detection affected by light levels"
      - "AI pathfinding to shadows"
      - "Dynamic light as gameplay element"
      - "Performance cost of light queries"
