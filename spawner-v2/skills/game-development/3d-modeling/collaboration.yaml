# Collaboration - 3D Modeling
# How this skill works with other specialists in the pipeline

id: 3d-modeling
version: 1.0.0

# ============================================
# INBOUND HANDOFFS - Receiving work from others
# ============================================

receives_context_from:
  - skill: concept-art
    relationship: receives_from
    description: |
      Receives concept art, reference sheets, and design specifications
      to translate into 3D models.
    receives:
      - "Character turnarounds (front, side, back, 3/4 views)"
      - "Prop orthographic views with measurements"
      - "Color callouts and material specifications"
      - "Scale reference (human figure for comparison)"
      - "Detail callouts for complex areas"
      - "Silhouette requirements"
    expected_format:
      - "PNG/PSD files at minimum 2048px resolution"
      - "Orthographic views aligned to axis"
      - "Clear labeling of materials and parts"
    validation_checklist:
      - "All required views present?"
      - "Scale reference included?"
      - "Material callouts clear?"
      - "Any asymmetric details noted?"

  - skill: game-design
    relationship: receives_from
    description: |
      Receives technical requirements and constraints from game designers.
    receives:
      - "Polygon budget (triangle count limit)"
      - "Texture resolution budget"
      - "Required LOD levels"
      - "Collision requirements (simple/complex)"
      - "Animation requirements (if rigged)"
      - "Modular piece specifications"
      - "Scale and unit requirements"
    expected_format:
      - "Technical spec document"
      - "Reference to similar approved assets"
      - "Priority ranking for visual vs performance"
    validation_checklist:
      - "Poly budget clearly defined?"
      - "LOD requirements specified?"
      - "Collision type determined?"
      - "Scale units confirmed?"

  - skill: 3d-scanning
    relationship: receives_from
    description: |
      Receives raw 3D scan data that needs cleanup and optimization.
    receives:
      - "Raw scan mesh (high poly, unoptimized)"
      - "Scan texture/color data"
      - "Reference photos from scan session"
      - "Scale calibration data"
      - "Target poly count for final mesh"
    expected_format:
      - "OBJ or PLY format (mesh only)"
      - "Separate texture files"
      - "Metadata about scan quality"
    validation_checklist:
      - "Scan is complete (no missing areas)?"
      - "Scale is accurate?"
      - "Texture alignment is correct?"
      - "No major artifacts or noise?"

  - skill: procedural-generation
    relationship: receives_from
    description: |
      Receives procedurally generated base meshes for refinement.
    receives:
      - "Base mesh from procedural system"
      - "Generation parameters used"
      - "Target use case"
      - "Areas requiring manual refinement"
    validation_checklist:
      - "Topology is usable or needs full retopo?"
      - "Scale matches project standards?"
      - "Which areas need artistic touch?"

# ============================================
# OUTBOUND HANDOFFS - Sending work to others
# ============================================

provides_context_to:
  - skill: texture-art
    relationship: provides_to
    description: |
      Provides completed 3D models ready for texturing with properly
      unwrapped UVs and clean topology.
    provides:
      - "Final mesh with clean topology"
      - "UV layout (unwrapped, properly padded)"
      - "Baked maps (normal, AO, curvature, ID)"
      - "Material zone documentation"
      - "Texel density specifications"
      - "High poly source (if available)"
    delivery_format:
      - "FBX with embedded UVs"
      - "Texture bakes as 16-bit PNG"
      - "Documentation PDF/MD"
    delivery_checklist:
      - "UVs have no overlapping (or documented mirroring)"
      - "Texel density is consistent"
      - "All bakes are artifact-free"
      - "Material IDs are assigned and documented"
      - "UV layout image exported"

  - skill: rigging-animation
    relationship: provides_to
    description: |
      Provides animation-ready meshes with proper topology for deformation.
    provides:
      - "Clean mesh with animation-ready topology"
      - "Edge loops at all joint locations"
      - "Pole positions documented"
      - "Blend shape targets (if applicable)"
      - "Symmetry verification"
      - "Origin point placement"
      - "Bone influence zone suggestions"
    delivery_format:
      - "FBX or native DCC format"
      - "Topology documentation"
      - "Joint location reference"
    delivery_checklist:
      - "3+ edge loops at every major joint"
      - "No poles at deformation areas"
      - "Mesh is symmetrical (if character)"
      - "Origin is at expected location (feet, hips)"
      - "All transforms applied"

  - skill: game-engine-integration
    relationship: provides_to
    description: |
      Provides game-ready assets with LODs and optimized for real-time rendering.
    provides:
      - "LOD chain (LOD0 through LOD3+)"
      - "Collision meshes (UCX_ prefixed for Unreal)"
      - "Optimized mesh (triangulated, no n-gons)"
      - "Correct axis orientation for engine"
      - "Proper scale for engine units"
      - "Socket/attachment point positions"
    delivery_format:
      - "FBX with LODs as separate objects"
      - "Collision meshes as separate files or embedded"
      - "Import settings documentation"
    delivery_checklist:
      - "All LODs present and named correctly"
      - "Collision mesh is simplified"
      - "Transforms applied"
      - "Normals correct"
      - "Scale matches engine (1 unit = 1 meter typically)"

  - skill: vfx-creation
    relationship: provides_to
    description: |
      Provides meshes optimized for VFX integration and simulation.
    provides:
      - "Low-poly proxy mesh for simulation"
      - "UV layout for effect textures"
      - "Vertex groups for effect spawn points"
      - "Mesh with clean normals for motion blur"
    delivery_checklist:
      - "Mesh is closed (watertight) for simulations"
      - "No non-manifold geometry"
      - "Vertex density appropriate for effect resolution"

  - skill: lighting-rendering
    relationship: provides_to
    description: |
      Provides models ready for final rendering and lookdev.
    provides:
      - "High-quality mesh (no compression artifacts)"
      - "Clean normals (no shading errors)"
      - "UVs ready for final textures"
      - "Separate meshes for different materials"
    delivery_checklist:
      - "Subdivision-ready if needed"
      - "All geometry is renderclean"
      - "Material assignments are correct"

# ============================================
# BIDIRECTIONAL COLLABORATION
# ============================================

collaborates_with:
  - skill: texture-art
    relationship: bidirectional
    description: |
      Iterative collaboration for resolving UV/mesh issues discovered during texturing.
    collaboration_points:
      - "UV seam placement adjustments"
      - "Additional geometry for baking detail"
      - "Material zone boundary clarification"
      - "Texel density rebalancing"
    when_to_escalate:
      - "Textures reveal topology issues"
      - "UV layout needs major revision"
      - "Additional detail geometry needed"

  - skill: rigging-animation
    relationship: bidirectional
    description: |
      Iterative collaboration for topology adjustments discovered during rigging.
    collaboration_points:
      - "Additional edge loops for problem deformations"
      - "Topology changes for better weight painting"
      - "Blend shape target adjustments"
      - "Mesh density rebalancing"
    when_to_escalate:
      - "Deformation reveals insufficient edge loops"
      - "Weight painting can't achieve desired results"
      - "Blend shapes cause geometry artifacts"

  - skill: game-engine-integration
    relationship: bidirectional
    description: |
      Iterative collaboration for fixing import/performance issues.
    collaboration_points:
      - "LOD distance adjustments"
      - "Collision mesh refinement"
      - "Performance optimization needs"
      - "Import setting debugging"
    when_to_escalate:
      - "Asset causes engine performance issues"
      - "Collision doesn't match visual mesh"
      - "Import produces unexpected results"

# ============================================
# SKILL BOUNDARIES
# ============================================

boundaries:
  owns:
    - "Mesh creation and topology"
    - "UV unwrapping and layout"
    - "LOD creation"
    - "Mesh export and format conversion"
    - "Retopology from sculpts"
    - "Collision mesh creation"
    - "Basic material zone assignment"

  does_not_own:
    - "Texture painting (→ texture-art)"
    - "Material/shader creation (→ texture-art, technical-art)"
    - "Rigging and skinning (→ rigging-animation)"
    - "Animation (→ rigging-animation)"
    - "Engine-specific setup (→ game-engine-integration)"
    - "VFX and particles (→ vfx-creation)"
    - "Lighting and rendering (→ lighting-rendering)"
    - "Concept design (→ concept-art)"

  gray_areas:
    - area: "High-to-low baking"
      resolution: "Owned by 3d-modeling, but texture-art may need to rebake specific maps"
    - area: "Material ID assignment"
      resolution: "Basic assignment by 3d-modeling, complex multi-material by texture-art"
    - area: "Blend shape creation"
      resolution: "Mesh targets by 3d-modeling, in-engine setup by rigging-animation"

# ============================================
# HANDOFF TRIGGERS
# ============================================

handoff_triggers:
  to_texture_art:
    triggers:
      - "mesh is complete"
      - "UVs are done"
      - "ready for texturing"
      - "need materials"
      - "bakes are ready"
    required_deliverables:
      - final_mesh_fbx
      - uv_layout_png
      - baked_maps_folder
      - material_zones_doc

  to_rigging:
    triggers:
      - "ready for rigging"
      - "needs skeleton"
      - "animation ready"
      - "need to rig this"
    required_deliverables:
      - final_mesh_fbx
      - topology_doc
      - edge_loop_reference
      - origin_placement_confirmed

  to_engine:
    triggers:
      - "ready for engine"
      - "export to unity"
      - "export to unreal"
      - "export to godot"
      - "game ready"
    required_deliverables:
      - lod_chain_fbx
      - collision_mesh
      - import_settings_doc

# ============================================
# COMMUNICATION PROTOCOLS
# ============================================

communication:
  status_updates:
    - milestone: "Blockout complete"
      notify: ["game-design", "concept-art"]
      include: ["Screenshot of blockout", "Poly count", "Questions about design"]

    - milestone: "High poly complete"
      notify: ["concept-art"]
      include: ["Turnaround renders", "Detail shots", "Deviation notes"]

    - milestone: "Retopology complete"
      notify: ["rigging-animation"]
      include: ["Wireframe renders", "Poly count", "Edge loop documentation"]

    - milestone: "UVs complete"
      notify: ["texture-art"]
      include: ["UV layout", "Texel density info", "Seam placement notes"]

    - milestone: "Export ready"
      notify: ["game-engine-integration"]
      include: ["File list", "Import settings", "Known issues"]

  blocking_issues:
    - type: "Concept unclear"
      escalate_to: "concept-art"
      required_info: ["Specific question", "Reference to unclear area", "Proposed solution"]

    - type: "Budget impossible"
      escalate_to: "game-design"
      required_info: ["Current vs target count", "Visual impact of reduction", "Alternatives"]

    - type: "Topology request"
      escalate_to: "rigging-animation"
      required_info: ["Specific requirement", "Current topology screenshot", "Proposed change"]

# ============================================
# PIPELINE INTEGRATION
# ============================================

pipeline_position:
  upstream:
    - concept-art
    - game-design
    - 3d-scanning

  downstream:
    - texture-art
    - rigging-animation
    - game-engine-integration
    - vfx-creation
    - lighting-rendering

  parallel:
    - audio-design  # Can work in parallel, no dependencies
    - level-design  # Can receive WIP for blockout purposes

pipeline_timing:
  typical_duration:
    simple_prop: "2-4 hours"
    complex_prop: "1-2 days"
    character_base: "3-5 days"
    character_full: "1-2 weeks"
    environment_modular_set: "1-2 weeks"

  dependencies:
    blocking:
      - "Concept art approval before detail work"
      - "Poly budget confirmation before optimization"
      - "Rig requirements before final topology"
    non_blocking:
      - "Texture work can start with WIP UVs"
      - "Engine testing can start with WIP mesh"
