# Board Game Design Validations
# Automated checks for game design documents, rulebooks, and component specifications

validations:
  # =============================================================================
  # RULEBOOK VALIDATIONS
  # =============================================================================

  - id: bgd-ambiguous-may-vs-must
    name: Ambiguous Modal Verbs in Rules
    severity: warning
    type: regex
    pattern:
      - '\b(can|could|might|should)\b(?!.*\b(must|cannot|may not)\b)'
    message: "Ambiguous modal verb detected. 'Can' implies ability, 'may' implies permission, 'must' implies requirement. Be explicit."
    fix_action: "Replace 'can' with 'may' for permission or 'must' for requirements. Avoid 'should' - rules are not suggestions."
    applies_to:
      - "*.md"
      - "*.txt"
      - "*rulebook*"
      - "*rules*"

  - id: bgd-passive-voice-rules
    name: Passive Voice in Critical Rules
    severity: warning
    type: regex
    pattern:
      - '\b(is|are|was|were|been|being)\s+(moved|placed|taken|drawn|discarded|removed|added|gained|lost)\b'
    message: "Passive voice makes rules ambiguous. Who performs the action?"
    fix_action: "Use active voice: 'The active player draws' not 'Cards are drawn'"
    applies_to:
      - "*.md"
      - "*.txt"
      - "*rulebook*"
      - "*rules*"

  - id: bgd-undefined-game-term
    name: Undefined Game Term Reference
    severity: error
    type: regex
    pattern:
      - '\b(the\s+(?:token|marker|tile|card|die|dice|meeple|resource))\b(?!.*(?:glossary|definition|see))'
    message: "Generic component term without definition. Which specific token/marker/card?"
    fix_action: "Use specific named terms defined in component list (e.g., 'Victory Point token', 'Action card')"
    applies_to:
      - "*rulebook*"
      - "*rules*"

  - id: bgd-missing-exception-handling
    name: Missing Exception or Edge Case Handling
    severity: warning
    type: regex
    pattern:
      - '\b(always|never|every|all)\s+(?:player|card|token|action)'
    message: "Absolute terms often have exceptions. What happens in edge cases?"
    fix_action: "Add explicit exception handling: 'All players EXCEPT the active player...' or 'Every action UNLESS...'"
    applies_to:
      - "*rulebook*"
      - "*rules*"

  - id: bgd-circular-reference
    name: Circular Rule Reference
    severity: error
    type: regex
    pattern:
      - '\(see\s+(?:section|rule|page)\s+\d+\).*\(see\s+(?:section|rule|page)\s+\d+\)'
    message: "Multiple cross-references may create circular navigation. Player should not need to flip constantly."
    fix_action: "Inline simple rules. Use appendix for complex interactions. Minimize cross-references."
    applies_to:
      - "*rulebook*"
      - "*rules*"

  - id: bgd-inconsistent-terminology
    name: Inconsistent Terminology Usage
    severity: error
    type: regex
    pattern:
      - '\b(victory\s*point|VP|point|score)\b.*\b(victory\s*point|VP|point|score)\b'
    message: "Multiple terms for same concept detected. Use consistent terminology throughout."
    fix_action: "Choose one term (e.g., 'Victory Points' or 'VP') and use it exclusively. Define on first use."
    applies_to:
      - "*rulebook*"
      - "*rules*"

  - id: bgd-missing-turn-structure
    name: Missing Turn Structure Section
    severity: error
    type: regex
    pattern:
      - '^(?!.*(?:turn|round|phase|action)\s+(?:structure|sequence|order|overview))'
    message: "No clear turn structure section found. Players need explicit turn sequence."
    fix_action: "Add 'Turn Structure' or 'Round Sequence' section early in rulebook with numbered steps."
    applies_to:
      - "*rulebook*"
      - "*rules*"

  # =============================================================================
  # GAME DESIGN DOCUMENT VALIDATIONS
  # =============================================================================

  - id: bgd-missing-player-count
    name: Missing Player Count Specification
    severity: error
    type: regex
    pattern:
      - '^(?!.*(?:player|players)\s*(?:count|number)?:?\s*\d)'
    message: "Player count not specified. Every design document needs explicit player count range."
    fix_action: "Add player count specification: 'Players: 2-4' or 'Player Count: 3-5 (best at 4)'"
    applies_to:
      - "*design*"
      - "*gdd*"
      - "*concept*"

  - id: bgd-missing-play-time
    name: Missing Play Time Estimate
    severity: warning
    type: regex
    pattern:
      - '^(?!.*(?:play\s*time|duration|length|minutes))'
    message: "Play time not specified. Include estimated duration."
    fix_action: "Add play time estimate: 'Play Time: 60-90 minutes' or 'Duration: 30 min/player'"
    applies_to:
      - "*design*"
      - "*gdd*"
      - "*concept*"

  - id: bgd-missing-core-loop
    name: Missing Core Loop Description
    severity: error
    type: regex
    pattern:
      - '^(?!.*(?:core\s*loop|main\s*mechanic|primary\s*mechanic|central\s*mechanic))'
    message: "No core loop described. What do players DO on each turn?"
    fix_action: "Add 'Core Loop' section: 'On your turn: 1. Draw cards 2. Play actions 3. Score points'"
    applies_to:
      - "*design*"
      - "*gdd*"
      - "*concept*"

  - id: bgd-missing-victory-condition
    name: Missing Victory Condition
    severity: error
    type: regex
    pattern:
      - '^(?!.*(?:win|victory|winning|end\s*game|game\s*end|score|scoring))'
    message: "No victory condition described. How does the game end? How is the winner determined?"
    fix_action: "Add clear victory condition: 'The game ends when X. The player with most points wins.'"
    applies_to:
      - "*design*"
      - "*gdd*"
      - "*concept*"

  - id: bgd-uncosted-component
    name: Component Without Cost Estimate
    severity: warning
    type: regex
    pattern:
      - '\b(miniature|custom\s*dice|custom\s*meeple|insert|metal\s*coin)\b(?!.*\$)'
    message: "Custom component mentioned without cost consideration. These are expensive!"
    fix_action: "Add cost estimate or alternative: 'Custom meeples (~$0.30/ea) or standard cubes ($0.03/ea)'"
    applies_to:
      - "*design*"
      - "*gdd*"
      - "*component*"

  # =============================================================================
  # BALANCE AND TESTING VALIDATIONS
  # =============================================================================

  - id: bgd-untested-claim
    name: Balance Claim Without Testing Evidence
    severity: warning
    type: regex
    pattern:
      - '\b(balanced|fair|equal|even)\b(?!.*(?:playtest|tested|test\s*result|game\s*\d+))'
    message: "Balance claim without testing evidence. How do you know it's balanced?"
    fix_action: "Add testing data: 'Balanced across 20 playtests - win rate: Player 1 (48%), Player 2 (52%)'"
    applies_to:
      - "*design*"
      - "*balance*"
      - "*notes*"

  - id: bgd-missing-playtest-tracking
    name: Missing Playtest Tracking
    severity: warning
    type: regex
    pattern:
      - '\bplaytest\b(?!.*(?:date|player|count|version|result|note))'
    message: "Playtest mentioned without structured tracking. Document systematically."
    fix_action: "Use playtest log: Date, Version, Players, Count, Duration, Issues Found, Changes Made"
    applies_to:
      - "*playtest*"
      - "*notes*"
      - "*log*"

  - id: bgd-asymmetric-untested
    name: Asymmetric Elements Without Balance Testing
    severity: error
    type: regex
    pattern:
      - '\b(faction|asymmetric|unique\s*power|variable\s*power)\b(?!.*(?:win\s*rate|balance|tested|playtest\s*\d+))'
    message: "Asymmetric element without documented balance testing. Each faction needs win rate data."
    fix_action: "Track win rates per faction: 'Faction A: 47% (23 games), Faction B: 51% (23 games)...'"
    applies_to:
      - "*design*"
      - "*balance*"
      - "*faction*"

  # =============================================================================
  # COMPONENT SPECIFICATION VALIDATIONS
  # =============================================================================

  - id: bgd-component-missing-dimensions
    name: Component Missing Dimensions
    severity: warning
    type: regex
    pattern:
      - '\b(board|card|token|tile|box)\b(?!.*(?:mm|cm|inch|"|x\s*\d))'
    message: "Component mentioned without dimensions. Manufacturers need exact sizes."
    fix_action: "Add dimensions: 'Cards: 63mm x 88mm (poker size)' or 'Board: 18\" x 18\" (folded 9x18)'"
    applies_to:
      - "*component*"
      - "*spec*"
      - "*manufacturing*"

  - id: bgd-component-missing-quantity
    name: Component Missing Quantity
    severity: error
    type: regex
    pattern:
      - '\b(card|token|die|dice|meeple|tile|cube|disc)\b(?!.*(?:\d+\s*(?:x|each|per|total)|quantity))'
    message: "Component type without quantity. How many of each?"
    fix_action: "Specify quantities: 'Resource cubes: 50 (10 each in 5 colors)'"
    applies_to:
      - "*component*"
      - "*spec*"
      - "*manufacturing*"

  - id: bgd-component-missing-material
    name: Component Missing Material Specification
    severity: warning
    type: regex
    pattern:
      - '\b(token|meeple|cube|disc|marker)\b(?!.*(?:wood|plastic|cardboard|metal|acrylic))'
    message: "Component without material specification. Wood? Plastic? Cardboard?"
    fix_action: "Specify material: 'Worker meeples: wood, natural finish, 16mm'"
    applies_to:
      - "*component*"
      - "*spec*"
      - "*manufacturing*"

  # =============================================================================
  # CROWDFUNDING VALIDATIONS
  # =============================================================================

  - id: bgd-kickstarter-missing-risks
    name: Kickstarter Missing Risks Section
    severity: error
    type: regex
    pattern:
      - '\b(kickstarter|crowdfunding|campaign)\b(?!.*(?:risk|challenge|delay|contingency))'
    message: "Crowdfunding content without risks acknowledgment. Backers expect transparency."
    fix_action: "Add risks section: manufacturing delays, shipping challenges, currency fluctuation, etc."
    applies_to:
      - "*kickstarter*"
      - "*campaign*"

  - id: bgd-stretch-goal-uncasted
    name: Stretch Goal Without Cost Analysis
    severity: error
    type: regex
    pattern:
      - '\b(stretch\s*goal|unlock)\b(?!.*\$)'
    message: "Stretch goal without cost analysis. Each unlock increases production cost."
    fix_action: "Add cost impact: 'Metal coins ($2.50/unit increase, unlocks at $X when margin covers)'"
    applies_to:
      - "*kickstarter*"
      - "*campaign*"
      - "*stretch*"

  - id: bgd-timeline-unrealistic
    name: Potentially Unrealistic Timeline
    severity: warning
    type: regex
    pattern:
      - 'deliver.*(?:2|3)\s*months?(?:\s*after|from)'
    message: "Timeline appears aggressive. Manufacturing + shipping typically takes 4-6 months minimum."
    fix_action: "Verify timeline: Manufacturing (90-120 days) + Shipping (45-90 days) + Fulfillment (2-4 weeks)"
    applies_to:
      - "*kickstarter*"
      - "*campaign*"
      - "*timeline*"

  # =============================================================================
  # ACCESSIBILITY VALIDATIONS
  # =============================================================================

  - id: bgd-color-only-differentiation
    name: Color-Only Component Differentiation
    severity: error
    type: regex
    pattern:
      - '\b(red|blue|green|yellow|purple|orange)\s+(player|token|cube|meeple|piece)\b(?!.*(?:symbol|shape|pattern|icon))'
    message: "Components differentiated only by color. Colorblind players cannot distinguish."
    fix_action: "Add shape/symbol/pattern differentiation. Use colorblind-friendly palette testing."
    applies_to:
      - "*component*"
      - "*design*"
      - "*rulebook*"

  - id: bgd-small-text-warning
    name: Small Text Size Warning
    severity: warning
    type: regex
    pattern:
      - '\b(8\s*pt|9\s*pt|7\s*pt|6\s*pt)\b'
    message: "Text size below 10pt is difficult to read for many players."
    fix_action: "Use minimum 10pt font on cards, 9pt for minor flavor text only"
    applies_to:
      - "*component*"
      - "*spec*"
      - "*layout*"

  - id: bgd-dexterity-assumption
    name: Assumed Fine Motor Dexterity
    severity: warning
    type: regex
    pattern:
      - '\b(stack|flick|balance|precision|careful)\b(?!.*(?:optional|alternative))'
    message: "Mechanic may require fine motor skills. Consider accessibility alternatives."
    fix_action: "Provide alternatives for dexterity elements or note in player guidance"
    applies_to:
      - "*design*"
      - "*rulebook*"
