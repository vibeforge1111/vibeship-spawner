id: streamer-bait-design
skill: Streamer-Bait Game Design
version: "1.0"

validations:
  - id: small-font-size
    pattern: 'font-?size\s*[=:]\s*(?:[0-9]|1[0-9]|2[0-5])(?:px|pt)?[^0-9]'
    severity: warning
    message: "Font size below 26px may be unreadable at streaming compression"
    fix: "Increase font-size to at least 26px for streaming readability"
    applies_to:
      - "*.css"
      - "*.scss"
      - "*.less"
    test_cases:
      should_match:
        - "font-size: 14px"
        - "fontSize = 12"
        - "font-size: 20pt"
      should_not_match:
        - "font-size: 26px"
        - "fontSize = 32"
        - "font-size: 48px"

  - id: no-volume-control
    pattern: 'audio|music|sound(?!.*volume|.*slider|.*setting|.*control)'
    severity: info
    message: "Audio implementation without volume controls - streamers need adjustable levels"
    fix: "Add separate volume sliders for music, SFX, and voice"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - "playAudio('bgm.mp3')"
        - "this.music.play()"
      should_not_match:
        - "playAudio('bgm.mp3', volume: musicVolume)"
        - "this.music.setVolume(settings.musicVolume)"

  - id: hardcoded-session-length
    pattern: 'session.*(?:length|duration|time).*=.*(?:60|90|120)'
    severity: warning
    message: "Session length >45 minutes may not fit stream format"
    fix: "Consider shorter 15-20 minute sessions with natural break points"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
      - "*.gd"
    test_cases:
      should_match:
        - "sessionLength = 60"
        - "match_duration: 90"
      should_not_match:
        - "sessionLength = 15"
        - "match_duration: 20"

  - id: no-streamer-mode
    pattern: 'settings|config|options(?!.*streamer|.*broadcast|.*stream)'
    severity: info
    message: "Settings without Streamer Mode - consider adding streaming-specific options"
    fix: "Add Streamer Mode toggle with DMCA-safe audio and anti-snipe features"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - "const settings = {"
        - "class GameOptions {"
      should_not_match:
        - "settings.streamerMode"
        - "isStreaming: false"

  - id: unskippable-cutscene
    pattern: 'cutscene|intro|cinematic(?!.*skip|.*cancel)'
    severity: warning
    message: "Cutscene without skip option kills stream momentum on restarts"
    fix: "Add skip option, especially for content seen before"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
      - "*.gd"
    test_cases:
      should_match:
        - "playCutscene('intro')"
        - "showIntro()"
      should_not_match:
        - "playCutscene('intro', skippable: true)"
        - "if (!seenIntro) showIntro()"

  - id: public-lobby-code
    pattern: 'lobby.*code|room.*code(?!.*hidden|.*private|.*delay)'
    severity: warning
    message: "Visible lobby code enables stream sniping"
    fix: "Hide lobby code until game starts or use invite-only"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - "displayLobbyCode(code)"
        - "show_room_code()"
      should_not_match:
        - "displayLobbyCode(code, hidden: true)"
        - "if (gameStarted) show_room_code()"

  - id: no-death-message-variety
    pattern: 'death.*message|you.*died|game.*over(?!.*random|.*array|.*list)'
    severity: info
    message: "Static death message - variety creates shareable moments"
    fix: "Add randomized humorous death messages for clip potential"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - 'showMessage("You died")'
        - "displayGameOver()"
      should_not_match:
        - "showMessage(randomDeathMessage())"
        - "deathMessages[Math.random()]"

  - id: long-loading-screen
    pattern: 'loading.*screen|load.*time(?!.*async|.*progress|.*quick)'
    severity: info
    message: "Loading screens create dead air in streams"
    fix: "Minimize loading times or add engaging loading content"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - "showLoadingScreen()"
        - "displayLoadTime()"
      should_not_match:
        - "showLoadingScreen({ tips: true })"
        - "asyncLoad()"

  - id: no-quick-restart
    pattern: 'restart|retry|respawn(?!.*quick|.*instant|.*fast)'
    severity: warning
    message: "Restart without quick option - streamers need minimal downtime"
    fix: "Add instant restart keybind that skips menus/cutscenes"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
      - "*.gd"
    test_cases:
      should_match:
        - "handleRestart()"
        - "onPlayerRetry()"
      should_not_match:
        - "quickRestart()"
        - "instantRespawn()"

  - id: fixed-audio-no-ducking
    pattern: 'audio.*volume|master.*volume(?!.*duck|.*dynamic|.*adjust)'
    severity: info
    message: "Fixed audio volume - consider dynamic ducking for commentary"
    fix: "Implement voice-activated audio ducking or commentary mode"
    applies_to:
      - "*.js"
      - "*.ts"
      - "*.cs"
    test_cases:
      should_match:
        - "setMasterVolume(0.8)"
        - "audioVolume = 1.0"
      should_not_match:
        - "setDuckingVolume(0.3)"
        - "enableAudioDucking()"

validation_groups:
  - name: streaming-readability
    description: Checks for content readable at stream compression
    validations:
      - small-font-size
      - long-loading-screen

  - name: audio-compliance
    description: Checks for streaming-compatible audio
    validations:
      - no-volume-control
      - fixed-audio-no-ducking

  - name: flow-preservation
    description: Checks for smooth stream experience
    validations:
      - unskippable-cutscene
      - no-quick-restart
      - hardcoded-session-length

  - name: anti-snipe
    description: Checks for stream sniping protection
    validations:
      - public-lobby-code
      - no-streamer-mode

  - name: content-moments
    description: Checks for clip-worthy content
    validations:
      - no-death-message-variety

auto_fix_rules:
  - id: increase-font-size
    pattern: 'font-size:\s*(\d+)px'
    replacement: 'font-size: 26px'
    condition: 'match[1] < 26'
    description: "Increases font size to streaming-readable 26px"

  - id: add-skip-option
    pattern: '(playCutscene\([^)]+)\)'
    replacement: '$1, { skippable: true })'
    description: "Adds skip option to cutscene calls"
