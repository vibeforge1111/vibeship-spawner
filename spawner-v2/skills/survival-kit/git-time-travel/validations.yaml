# Git Time Travel Validations

validations:
  - id: force-push-main
    name: Force Push to Main
    severity: high
    type: conceptual
    check: "Should not force push to main/master"
    indicators:
      - "git push --force origin main"
      - "git push -f main"
      - "Force pushing to master"
    message: "Attempting force push to main branch."
    fix_action: "Use regular push or coordinate if absolutely necessary"

  - id: no-backup-rebase
    name: Rebase Without Backup
    severity: medium
    type: conceptual
    check: "Should backup before risky operations"
    indicators:
      - "Rebase without backup branch"
      - "No safety tag"
      - "Interactive rebase on shared branch"
    message: "Risky operation without backup."
    fix_action: "Create backup branch before rebasing"

  - id: force-without-lease
    name: Force Push Without Lease
    severity: medium
    type: conceptual
    check: "Should use --force-with-lease"
    indicators:
      - "git push --force"
      - "git push -f"
      - "Not using --force-with-lease"
    message: "Force push without safety check."
    fix_action: "Use --force-with-lease instead of --force"

  - id: giant-commits
    name: Commits Too Large for Bisect
    severity: low
    type: conceptual
    check: "Commits should be atomic for bisectability"
    indicators:
      - "Many files in one commit"
      - "Multiple features per commit"
      - "Days of work in one commit"
    message: "Commits may be too large for effective bisect."
    fix_action: "Split into smaller, atomic commits"

  - id: no-commit-context
    name: Changing Code Without Checking History
    severity: low
    type: conceptual
    check: "Should check git blame before significant changes"
    indicators:
      - "No git blame check"
      - "Removing code without understanding"
      - "No commit message reference"
    message: "Changing code without checking history for context."
    fix_action: "Run git blame, read commit message before changing"

  - id: reflog-not-checked
    name: Recovery Without Checking Reflog
    severity: low
    type: conceptual
    check: "Should check reflog when looking for lost work"
    indicators:
      - "Lost commit"
      - "No reflog check"
      - "Assuming work is gone"
    message: "Check reflog before assuming work is lost."
    fix_action: "Run git reflog to find lost commits"
