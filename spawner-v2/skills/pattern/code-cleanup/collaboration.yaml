id: code-cleanup-collaboration
skill: code-cleanup
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: backend
    context: "Backend needs cleanup"
    receives:
      - "Code to clean"
      - "Problem areas"
      - "Refactoring scope"
    provides: "Clean code"

  - skill: frontend
    context: "Frontend needs cleanup"
    receives:
      - "Components to clean"
      - "Import organization"
      - "Type improvements"
    provides: "Clean components"

  - skill: code-architecture-review
    context: "Architecture identified cleanup"
    receives:
      - "Problem areas"
      - "Target structure"
      - "Priority modules"
    provides: "Cleaned modules"

  - skill: technical-debt-strategy
    context: "Debt prioritized cleanup"
    receives:
      - "Debt items"
      - "Priority order"
      - "Scope limits"
    provides: "Reduced debt"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "test|coverage|verify"
    delegate_to: qa-engineering
    pattern: sequential
    context: "Cleanup needs verification"
    handoff_data:
      - "Changed files"
      - "Test needs"
      - "Verification scope"
    receive: "Test coverage"

  - trigger: "review|pr|approve"
    delegate_to: code-review
    pattern: sequential
    context: "Cleanup needs review"
    handoff_data:
      - "Changes made"
      - "Rationale"
      - "Risk assessment"
    receive: "Review approval"

  - trigger: "type|typescript|safety"
    delegate_to: typescript-strict
    pattern: parallel
    context: "Cleanup includes types"
    handoff_data:
      - "Type improvements"
      - "Any removal"
      - "Interface updates"
    receive: "Type guidance"

  - trigger: "architecture|structure|design"
    delegate_to: code-architecture-review
    pattern: parallel
    context: "Cleanup reveals architecture"
    handoff_data:
      - "Discovered issues"
      - "Structural concerns"
      - "Improvement ideas"
    receive: "Architecture review"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: qa-engineering
      signal: "Test failures"
      action: "Fix regressions"

    - skill: code-review
      signal: "Review feedback"
      action: "Address concerns"

    - skill: code-architecture-review
      signal: "Architecture patterns"
      action: "Align cleanup"

  sends_feedback_to:
    - skill: code-review
      signal: "Clean code"
      action: "Review process"

    - skill: technical-debt-strategy
      signal: "Debt reduction"
      action: "Update backlog"

    - skill: backend
      signal: "Code improvements"
      action: "Adopt patterns"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Housekeeping
    insight: |
      Housekeepers know organization:
      - Regular cleaning prevents buildup
      - Everything has a place
      - Declutter before organizing
      - Small efforts compound
      Code cleanup follows housekeeping.
    applies_when: "Regular maintenance"

  - domain: Gardening
    insight: |
      Gardeners know pruning:
      - Remove dead growth
      - Shape for health
      - Timing matters
      - Don't over-prune
      Code cleanup follows pruning principles.
    applies_when: "Removing dead code"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Cleanup Sprint
    skills:
      - code-cleanup
      - code-architecture-review
      - qa-engineering
      - code-review
    workflow: |
      1. Architecture review (code-architecture-review)
      2. Cleanup execution (code-cleanup)
      3. Test verification (qa-engineering)
      4. PR review (code-review)

  - name: Debt Paydown
    skills:
      - code-cleanup
      - technical-debt-strategy
      - backend
    workflow: |
      1. Debt prioritization (technical-debt-strategy)
      2. Cleanup work (code-cleanup)
      3. Integration (backend)
