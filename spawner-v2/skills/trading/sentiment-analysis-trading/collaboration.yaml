id: sentiment-analysis-trading
skill: Sentiment Analysis for Trading
version: "1.0"

receives_from:
  - skill: quantitative-research
    receives:
      - Statistical validation requirements
      - Backtest framework
      - IC calculation methods
    provides:
      - Processed sentiment time series
      - Signal hypotheses
      - Preliminary IC estimates

  - skill: technical-analysis
    receives:
      - Price structure context
      - Support/resistance levels
      - Trend direction
    provides:
      - Sentiment confirmation
      - Divergence detection
      - Crowd positioning analysis

  - skill: risk-management-trading
    receives:
      - Position sizing rules
      - Risk limits
      - Drawdown thresholds
    provides:
      - Signal confidence levels
      - Recommended position sizing
      - Risk event warnings

  - skill: execution-algorithms
    receives:
      - Execution timing requirements
      - Urgency parameters
      - Slippage tolerance
    provides:
      - News event timing
      - Volatility expectations
      - Urgency signals

delegation_triggers:
  - pattern: "backtest|validate|ic|statistical"
    delegate_to: quantitative-research
    context: "Need statistical validation of sentiment signal"

  - pattern: "risk|position.*size|drawdown"
    delegate_to: risk-management-trading
    context: "Apply risk management to sentiment trade"

  - pattern: "execute|timing|order"
    delegate_to: execution-algorithms
    context: "Execute on sentiment signal"

  - pattern: "chart|technical|level|support|resistance"
    delegate_to: technical-analysis
    context: "Combine sentiment with technical analysis"

  - pattern: "psychology|emotion|crowd"
    delegate_to: trading-psychology
    context: "Understand crowd psychology behind sentiment"

common_combinations:
  - name: Sentiment-Technical Confluence
    skills:
      - sentiment-analysis-trading
      - technical-analysis
      - risk-management-trading
    workflow: |
      1. Identify sentiment extreme (sentiment-analysis-trading)
      2. Wait for technical confirmation (technical-analysis)
      3. Size and execute (risk-management-trading)

  - name: Alternative Data Alpha Pipeline
    skills:
      - sentiment-analysis-trading
      - quantitative-research
      - execution-algorithms
    workflow: |
      1. Process alternative data (sentiment-analysis-trading)
      2. Validate alpha statistically (quantitative-research)
      3. Execute with optimal timing (execution-algorithms)

  - name: News-Aware Trading
    skills:
      - sentiment-analysis-trading
      - execution-algorithms
      - risk-management-trading
    workflow: |
      1. Monitor news flow (sentiment-analysis-trading)
      2. Adjust execution timing (execution-algorithms)
      3. Manage event risk (risk-management-trading)

cross_domain_insights:
  - domain: Natural Language Processing
    insight: Sentiment analysis is a solved-ish NLP problem
    application: Use transformer models (FinBERT) for financial text

  - domain: Social Network Analysis
    insight: Information spreads through networks with predictable patterns
    application: Weight signals by network centrality and reach

  - domain: Behavioral Economics
    insight: Crowds exhibit predictable biases and herding
    application: Trade against extreme consensus, with crowd at extremes

  - domain: Signal Processing
    insight: Separate signal from noise using filtering techniques
    application: Apply smoothing and aggregation to reduce noise

  - domain: Epidemiology
    insight: Ideas and sentiment spread like diseases
    application: Model sentiment contagion and saturation points

ecosystem_alternatives:
  sentiment_providers:
    - name: Santiment
      when: Crypto, on-chain + social combined
      tradeoff: Crypto-focused only
    - name: The TIE
      when: Crypto social sentiment
      tradeoff: Limited to crypto
    - name: RavenPack
      when: News sentiment, institutional
      tradeoff: Expensive
    - name: StockTwits
      when: Equities social sentiment
      tradeoff: Lower quality data

  nlp_models:
    - name: FinBERT
      when: Financial sentiment analysis
      tradeoff: English only
    - name: GPT-4
      when: Complex interpretation
      tradeoff: Expensive, slower
    - name: VADER
      when: Simple, fast sentiment
      tradeoff: Not financial-specific

  on_chain_providers:
    - name: Glassnode
      when: Comprehensive on-chain
      tradeoff: Expensive
    - name: Nansen
      when: Wallet labeling, money flow
      tradeoff: Moderate cost
    - name: Dune Analytics
      when: Custom queries, free tier
      tradeoff: Requires SQL knowledge

feedback_loops:
  - from: quantitative-research
    incorporates:
      - Statistical validation results
      - IC measurements over time
      - Signal decay analysis
    into: Signal weighting and selection

  - from: execution-algorithms
    incorporates:
      - News timing effectiveness
      - Urgency signal accuracy
      - Volatility predictions
    into: Urgency calibration

  - from: technical-analysis
    incorporates:
      - Confluence trade outcomes
      - Divergence signal accuracy
      - Level reaction analysis
    into: Technical confirmation requirements

prerequisites:
  required_knowledge:
    - Basic NLP concepts
    - Python programming
    - API usage (Twitter, Reddit, etc.)
    - Statistics (correlation, significance)

  recommended_tools:
    - Python 3.8+ with pandas, numpy
    - Transformers library (Hugging Face)
    - API clients (tweepy, praw)
    - Sentiment data providers

  environment_setup: |
    # Python sentiment analysis setup
    pip install pandas numpy scipy
    pip install transformers torch
    pip install tweepy praw  # Twitter, Reddit APIs
    pip install textblob nltk  # Basic NLP

    # FinBERT for financial sentiment
    from transformers import pipeline

    sentiment = pipeline(
        "sentiment-analysis",
        model="ProsusAI/finbert"
    )

    # Example usage
    result = sentiment("The company beat earnings expectations")[0]
    print(f"Sentiment: {result['label']}, Score: {result['score']:.2f}")

    # Basic aggregation
    import pandas as pd
    import numpy as np

    def aggregate_sentiment(sentiments: list) -> dict:
        scores = []
        for s in sentiments:
            if s['label'] == 'positive':
                scores.append(s['score'])
            elif s['label'] == 'negative':
                scores.append(-s['score'])
            else:
                scores.append(0)

        return {
            'mean': np.mean(scores),
            'std': np.std(scores),
            'count': len(scores),
            'bullish_pct': sum(1 for s in scores if s > 0) / len(scores)
        }
