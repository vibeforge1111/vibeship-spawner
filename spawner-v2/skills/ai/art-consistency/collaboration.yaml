id: art-consistency-collaboration
skill: art-consistency
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: ai-image-generation
    context: "Need to verify generated image matches character/style"
    receives:
      - "Generated image URL"
      - "Original prompt used"
      - "Character name/reference"
      - "Expected style"
    provides: "QA verdict (approved/regenerate) with specific issues"

  - skill: ai-video-generation
    context: "Need to verify video frames maintain consistency"
    receives:
      - "Generated video or keyframes"
      - "Character references"
      - "Style references"
    provides: "Frame-by-frame QA with drift detection"

  - skill: ai-creative-director
    context: "New character or series needs visual standards"
    receives:
      - "Character concept description"
      - "Art style requirements"
      - "Series context"
    provides: "Complete character bible and turnaround sheet"

  - skill: branding
    context: "Brand needs consistent visual representation"
    receives:
      - "Brand guidelines"
      - "Color palette"
      - "Typography standards"
    provides: "Generation prompts that enforce brand consistency"

  - skill: product-management
    context: "Product needs consistent visual assets"
    receives:
      - "Asset requirements"
      - "Character/mascot specs"
      - "Style direction"
    provides: "Consistent visual asset pipeline"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "generate|create image|make image"
    delegate_to: ai-image-generation
    pattern: sequential
    context: "Ready to generate after consistency preparation"
    handoff_data:
      - "Validated prompt with all identity anchors"
      - "Reference images"
      - "Model recommendations"
      - "Seed if continuing series"
    receive: "Generated image for QA review"
    post_action: "Run post-generation QA checklist"

  - trigger: "generate video|animate|motion"
    delegate_to: ai-video-generation
    pattern: sequential
    context: "Ready to generate video after consistency preparation"
    handoff_data:
      - "Validated prompt"
      - "Character/style references"
      - "Keyframe consistency requirements"
    receive: "Generated video for QA review"
    post_action: "Run frame-by-frame consistency check"

  - trigger: "train lora|fine-tune|custom model"
    delegate_to: llm-architect
    pattern: sequential
    context: "Character needs dedicated LoRA training"
    handoff_data:
      - "Character bible"
      - "Curated reference images (15-30)"
      - "Trigger word specification"
      - "Training parameters"
    receive: "Trained LoRA model"
    post_action: "Validate LoRA output against references"

  - trigger: "brand|logo|identity system"
    delegate_to: branding
    pattern: parallel
    context: "Brand-level consistency beyond character"
    handoff_data:
      - "Visual standards established"
      - "Color palette"
      - "Style guidelines"
    receive: "Brand guidelines for enforcement"

# ============================================================================
# WORKFLOW INTEGRATION POINTS
# ============================================================================
workflow_integration:
  before_generation:
    required_checks:
      - "Character bible exists or created"
      - "Reference images available"
      - "Prompt includes all identity anchors"
      - "Style descriptors specified"
    blocks_generation_if_failed: true
    message: "Cannot generate without consistency preparation"

  after_generation:
    required_checks:
      - "Face matches reference"
      - "Hair matches reference"
      - "Outfit matches reference"
      - "Style matches series"
      - "Quality acceptable"
    verdict_options:
      - "APPROVED - proceed to delivery"
      - "REGENERATE - specific issues noted"
      - "ADJUST_PROMPT - systematic issue needs prompt fix"
    blocks_delivery_if_failed: true

  series_workflow:
    - step: "Initialize character bible"
      skill: art-consistency
    - step: "Generate turnaround sheet"
      skill: ai-image-generation
      qa_by: art-consistency
    - step: "Approve reference sheet"
      skill: art-consistency
    - step: "Generate series images"
      skill: ai-image-generation
      qa_by: art-consistency
      loop: true
    - step: "Final series QA"
      skill: art-consistency

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: ai-image-generation
      signal: "Model struggles with certain features consistently"
      action: "Adjust prompt patterns or recommend different model"

    - skill: ai-video-generation
      signal: "Character drifts mid-video"
      action: "Strengthen keyframe anchoring or recommend IP-Adapter"

    - skill: user
      signal: "Approved image doesn't match user's mental model"
      action: "Update character bible to match user intent"

  sends_feedback_to:
    - skill: ai-image-generation
      signal: "Consistent failures on specific features"
      action: "Recommend model change or prompt restructure"

    - skill: ai-creative-director
      signal: "Style direction causes consistency issues"
      action: "Suggest more specific style parameters"

    - skill: prompt-engineering-creative
      signal: "Prompts need restructuring for consistency"
      action: "Provide identity anchor templates"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Anime Production
    insight: |
      Anime studios maintain character sheets (settei) that document every detail.
      - Model sheets show character from 8+ angles
      - Color guides specify exact RGB values for different lighting
      - Expression sheets show range of emotions
      - Size comparison charts show relative heights
      Apply this rigor to AI generation reference materials.
    applies_when: "Creating character documentation or turnaround sheets"

  - domain: Game Development
    insight: |
      Game artists use texture atlases and style guides to ensure consistency
      across thousands of assets made by different artists.
      - Define color palettes as exact hex codes
      - Specify line weights in pixels
      - Document shading rules (hard shadow vs soft gradient)
      - Create "consistency checkpoints" at regular intervals
    applies_when: "Establishing style guidelines for a series"

  - domain: Brand Design
    insight: |
      Brand guidelines obsess over consistency because inconsistency destroys trust.
      - Logo must be pixel-perfect every time
      - Colors have specific values for different mediums
      - Typography is never improvised
      Apply brand-level rigor to character visual identity.
    applies_when: "Managing character as a brand asset"

  - domain: Quality Assurance
    insight: |
      QA engineers know that "works on my machine" is not acceptable.
      - Checklists catch what memory misses
      - Screenshots document everything
      - Regression testing catches drift
      - Automate what can be automated
      Visual QA needs the same discipline as code QA.
    applies_when: "Reviewing generated content"

  - domain: Film Continuity
    insight: |
      Film continuity supervisors track every detail between takes and scenes.
      - Script supervisors note exact clothing, props, hair
      - Polaroids document every setup
      - Errors caught on set cost nothing; errors caught in editing cost reshoots
      Catch visual inconsistency before delivery, not after.
    applies_when: "Managing multi-image or video series"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Character Creation Pipeline
    skills:
      - art-consistency
      - ai-image-generation
      - ai-creative-director
    workflow: |
      1. Creative brief (ai-creative-director)
      2. Character bible creation (art-consistency)
      3. Turnaround sheet generation (ai-image-generation + art-consistency QA)
      4. Reference approval (art-consistency)
      5. Production images (ai-image-generation + art-consistency QA per image)

  - name: Anime Series Production
    skills:
      - art-consistency
      - ai-image-generation
      - ai-video-generation
    workflow: |
      1. Establish character bibles for all characters (art-consistency)
      2. Generate reference sheets for each character (art-consistency)
      3. Generate episode illustrations (ai-image-generation)
      4. QA each illustration (art-consistency)
      5. Generate animated sequences (ai-video-generation)
      6. Frame-by-frame QA (art-consistency)

  - name: Brand Mascot Development
    skills:
      - art-consistency
      - branding
      - ai-image-generation
    workflow: |
      1. Brand guidelines review (branding)
      2. Mascot character bible (art-consistency)
      3. Mascot in brand contexts (ai-image-generation)
      4. Consistency verification (art-consistency)
      5. Brand integration approval (branding)

  - name: Game Asset Production
    skills:
      - art-consistency
      - ai-image-generation
      - ui-design
    workflow: |
      1. Establish game art style guide (art-consistency)
      2. Character designs with references (art-consistency)
      3. Asset generation (ai-image-generation)
      4. QA against style guide (art-consistency)
      5. UI integration (ui-design)
      6. Final visual consistency pass (art-consistency)

# ============================================================================
# IRON LAW
# ============================================================================
iron_law: |
  NO GENERATION WITHOUT REFERENCE
  NO DELIVERY WITHOUT QA

  This is not negotiable:
  - Every character needs a bible before generation
  - Every generation needs reference images loaded
  - Every output needs QA against references
  - Every approval needs checklist completion

  Shortcuts today = chaos tomorrow.
  One "close enough" becomes ten inconsistent images.
  The discipline is the skill.
