validations:

  - id: ofat-pattern
    name: One-Factor-At-A-Time Pattern
    severity: warning
    type: regex
    pattern:
      - "for.*in.*values:\\s*\\n.*test.*single"
      - "vary.*one.*at.*time"
    message: "Consider factorial design instead of OFAT for interaction effects."
    applies_to:
      - "**/*.py"

  - id: no-randomization
    name: Missing Run Order Randomization
    severity: warning
    type: regex
    pattern:
      - "for.*treatment.*in.*order(?![\\s\\S]{0,200}shuffle|random)"
    message: "Randomize run order to prevent time-based confounds."
    fix_action: "np.random.shuffle(run_order)"
    applies_to:
      - "**/*.py"

  - id: no-power-analysis
    name: Design Without Power Analysis
    severity: warning
    type: regex
    pattern:
      - "n.*=.*[1-9]\\d?(?!\\d).*experiment"
    message: "Calculate required sample size with power analysis before running."
    applies_to:
      - "**/*.py"

  - id: no-replication
    name: Factorial Without Replication
    severity: info
    type: regex
    pattern:
      - "factorial.*n_rep.*=.*1|fullfact(?![\\s\\S]{0,200}replicate)"
    message: "Include replicates to estimate pure error."
    applies_to:
      - "**/*.py"

  - id: missing-blocking
    name: Potential Nuisance Variable Not Blocked
    severity: info
    type: regex
    pattern:
      - "day|batch|operator(?![\\s\\S]{0,300}block)"
    message: "Consider blocking on known nuisance variables (day, batch, etc.)."
    applies_to:
      - "**/*.py"
