id: tokenomics-design
skill: Tokenomics Design
version: "1.0"

validations:
  - id: check-total-allocation
    name: Allocation Totals 100%
    description: Verify all allocations sum to 100%
    pattern: "allocation|distribution"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: present
    message: "Verify all token allocations sum to exactly 100%"
    severity: error
    autofix: false

  - id: check-vesting-schedule
    name: Vesting Schedule Defined
    description: All allocations should have vesting terms
    pattern: "vest|cliff|unlock|TGE"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: absent_in_context
    context_pattern: "team|investor|advisor"
    message: "Define vesting schedule for insider allocations"
    severity: error
    autofix: false

  - id: check-cliff-duration
    name: Minimum Cliff Duration
    description: Insider allocations should have meaningful cliff
    pattern: "cliff.*[0-3]\\s*month|no.*cliff"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: present
    message: "Consider longer cliff (6-12 months) for better alignment"
    severity: warning
    autofix: false

  - id: check-tge-percentage
    name: TGE Unlock Percentage
    description: Check TGE unlock isn't too high for insiders
    pattern: "TGE.*[2-5][0-9]%|unlock.*[2-5][0-9]%.*TGE"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: present
    message: "TGE unlock above 20% for insiders may cause dump pressure"
    severity: warning
    autofix: false

  - id: check-emission-schedule
    name: Emission Schedule Defined
    description: Token emissions should have clear schedule
    pattern: "emission|inflation|reward.*rate"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: absent_in_context
    context_pattern: "schedule|rate|yearly|monthly"
    message: "Define clear emission schedule with rates and duration"
    severity: warning
    autofix: false

  - id: check-utility-defined
    name: Token Utility Specified
    description: Token should have clear utility
    pattern: "utility|use.*case|purpose"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: absent
    message: "Define clear token utility beyond speculation"
    severity: warning
    autofix: false

  - id: check-value-accrual
    name: Value Accrual Mechanism
    description: Token should capture protocol value
    pattern: "fee.*shar|buyback|burn|revenue"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: absent
    message: "Consider value accrual mechanism (fees, burns, etc.)"
    severity: info
    autofix: false

  - id: check-governance-safeguards
    name: Governance Security
    description: Governance tokens need safeguards
    pattern: "governance|voting|proposal"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: present
    context_pattern: "timelock|delay|quorum|veto"
    message: "Add governance safeguards (timelock, quorum, etc.)"
    severity: warning
    autofix: false

  - id: check-supply-cap
    name: Supply Cap or Emission End
    description: Token should have supply cap or decreasing emissions
    pattern: "uncapped|unlimited|infinite"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: present
    message: "Consider supply cap or decreasing emission schedule"
    severity: warning
    autofix: false

  - id: check-liquidity-plan
    name: Liquidity Provision Plan
    description: Define how liquidity will be provided
    pattern: "liquidity|lp|amm|trading"
    file_glob: "**/tokenomics*.{md,yaml,json}"
    match: absent
    message: "Define liquidity provision strategy"
    severity: info
    autofix: false

pre_commit:
  - id: allocation-sum
    name: Allocation Sum Check
    command: "node scripts/check-allocations.js"
    description: Verify allocations sum to 100%

  - id: vesting-simulation
    name: Vesting Simulation
    command: "python scripts/simulate_vesting.py"
    description: Simulate vesting schedule

ci_checks:
  - id: tokenomics-model
    name: Tokenomics Model Validation
    command: "python scripts/validate_tokenomics.py"
    description: Run tokenomics model validation
    required: true

  - id: emission-sustainability
    name: Emission Sustainability Check
    command: "python scripts/check_emissions.py"
    description: Verify emissions are sustainable

  - id: distribution-analysis
    name: Distribution Analysis
    command: "python scripts/analyze_distribution.py"
    description: Analyze token distribution fairness
