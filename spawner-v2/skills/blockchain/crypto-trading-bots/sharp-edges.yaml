# Sharp Edges - Crypto Trading Bots
version: 1.0.0
skill_id: crypto-trading-bots

sharp_edges:
  - id: sandwich-victim
    summary: Your bot gets sandwiched by MEV bots
    severity: high
    situation: |
      You submit trade to public mempool. MEV bot sees it, front-runs
      your buy, and back-runs your sell. You get worse price.
    solution: |
      // Use private mempool (Flashbots)
      const flashbots = await FlashbotsBundleProvider.create(provider, wallet);
      await flashbots.sendPrivateTransaction(signedTx);

      // Or use MEV-protected RPC
      // - Flashbots Protect
      // - MEV Blocker
      // - Private RPCs

  - id: revert-on-tax
    summary: Transaction reverts due to token transfer tax
    severity: medium
    situation: |
      You use swapExactTokensForTokens. Token has 5% tax. Expected
      output doesn't match, transaction reverts.
    solution: |
      // Use fee-on-transfer variant
      router.swapExactETHForTokensSupportingFeeOnTransferTokens(
          minOut,
          path,
          recipient,
          deadline
      );
      // This tolerates tokens with transfer taxes

  - id: frontrun-own-bot
    summary: Running multiple bots that compete with each other
    severity: medium
    situation: |
      You run multiple sniper instances. They detect same opportunity
      and compete, driving up gas costs and reducing profit.
    solution: |
      // Coordinate via shared state or leader election
      // Use nonce management to prevent conflicts
      const nonce = await nonceManager.getNextNonce(wallet.address);
