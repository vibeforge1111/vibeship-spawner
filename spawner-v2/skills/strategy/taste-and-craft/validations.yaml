# Taste and Craft Validations
# Automated checks to catch quality and craft anti-patterns in code and design

validations:
  - id: tc-inconsistent-naming
    name: Inconsistent Naming Convention
    severity: warning
    type: regex
    pattern:
      - 'get[A-Z]\w+.*fetch[A-Z]\w+'
      - 'is[A-Z]\w+.*has[A-Z]\w+'
      - 'handle[A-Z]\w+.*on[A-Z]\w+'
    message: "Inconsistent naming patterns. Craft means consistency. Pick conventions and stick to them."
    fix_action: "Standardize: all fetchers use fetch*, all boolean getters use is*, all handlers use handle*"
    applies_to:
      - "*.ts"
      - "*.tsx"
      - "*.js"
      - "*.jsx"

  - id: tc-magic-values
    name: Magic Values Without Context
    severity: warning
    type: regex
    pattern:
      - '(?<!const\s\w+\s=\s)(?:0\.5|0\.8|1\.5|2\.0|10|100|500|1000)(?!\d)'
      - 'margin:\s*\d+px|padding:\s*\d+px|gap:\s*\d+px'
    message: "Magic numbers in code. Craft means intentional, documented choices."
    fix_action: "Extract to named constants or design tokens: 16 → SPACING_MD or --spacing-md"
    applies_to:
      - "*.ts"
      - "*.tsx"
      - "*.js"
      - "*.jsx"
      - "*.css"

  - id: tc-copy-paste-code
    name: Duplicate Code Blocks
    severity: warning
    type: regex
    pattern:
      - '(\n\s*\w+\([^)]*\)\s*\{[^}]{50,}\}).*\1'
    message: "Repeated code pattern detected. Craft means DRY. Duplication is a design smell."
    fix_action: "Extract to shared function or component. One source of truth."
    applies_to:
      - "*.ts"
      - "*.tsx"
      - "*.js"
      - "*.jsx"

  - id: tc-generic-error
    name: Generic Error Messages
    severity: warning
    type: regex
    pattern:
      - 'something.?went.?wrong|error.?occurred|an.?error|oops|failed'
    message: "Generic error message. Craft means helpful errors that guide users to resolution."
    fix_action: "Specific error: 'Something went wrong' → 'Could not save. Check your connection and try again.'"
    applies_to:
      - "*.ts"
      - "*.tsx"
      - "*.js"
      - "*.jsx"
      - "*.json"

  - id: tc-z-index-chaos
    name: Arbitrary Z-Index Values
    severity: warning
    type: regex
    pattern:
      - 'z-index:\s*(?:9999|99999|100000|\d{4,})'
      - 'zIndex:\s*(?:9999|99999|100000|\d{4,})'
    message: "Z-index arms race detected. Arbitrary high values indicate missing stacking strategy."
    fix_action: "Create z-index scale: base(0), dropdown(10), modal(20), toast(30). Use system, not random numbers."
    applies_to:
      - "*.css"
      - "*.scss"
      - "*.ts"
      - "*.tsx"

  - id: tc-truncation-no-tooltip
    name: Text Truncation Without Tooltip
    severity: warning
    type: regex
    pattern:
      - 'text-overflow:\s*ellipsis'
      - 'truncate'
      - 'line-clamp'
    message: "Text truncation without showing full content. User cannot access hidden information."
    fix_action: "Add title attribute or tooltip to reveal full content on hover"
    applies_to:
      - "*.css"
      - "*.scss"
      - "*.tsx"
      - "*.jsx"

  - id: tc-loading-no-skeleton
    name: Loading State Without Skeleton
    severity: info
    type: regex
    pattern:
      - 'loading|isLoading|pending'
    message: "Loading state detected. Spinners feel slower than skeletons. Show shape of incoming content."
    fix_action: "Replace spinner with skeleton that matches content shape. Perceived performance matters."
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tc-hardcoded-color
    name: Hardcoded Color Values
    severity: warning
    type: regex
    pattern:
      - '#[0-9A-Fa-f]{3,8}(?![^{]*var\()'
      - 'rgb\([^)]+\)(?![^{]*var\()'
      - 'hsl\([^)]+\)(?![^{]*var\()'
    message: "Hardcoded colors detected. Craft means systematic design tokens, not ad-hoc values."
    fix_action: "Use design tokens: #3B82F6 → var(--color-primary) or theme.colors.primary"
    applies_to:
      - "*.css"
      - "*.scss"
      - "*.tsx"
      - "*.jsx"

  - id: tc-animation-no-reduced-motion
    name: Animation Without Reduced Motion Check
    severity: warning
    type: regex
    pattern:
      - 'animation:|transition:'
      - '@keyframes'
    message: "Animation without reduced motion consideration. Some users get motion sick."
    fix_action: "Add @media (prefers-reduced-motion: reduce) check to disable or simplify animations"
    applies_to:
      - "*.css"
      - "*.scss"

  - id: tc-button-no-disabled-style
    name: Button Without Disabled State
    severity: warning
    type: regex
    pattern:
      - '<button(?!.*disabled)'
      - 'Button(?!.*disabled)'
    message: "Button without disabled state handling. Users need feedback when actions are unavailable."
    fix_action: "Add disabled prop with visual indication: lower opacity, no hover effect, cursor: not-allowed"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tc-form-no-validation-feedback
    name: Form Without Validation Feedback
    severity: warning
    type: regex
    pattern:
      - '<form|<input|<textarea'
    message: "Form elements detected. Craft means clear validation feedback before, during, and after submit."
    fix_action: "Add inline validation, clear error messages, and success confirmation"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tc-inconsistent-spacing
    name: Inconsistent Spacing Values
    severity: info
    type: regex
    pattern:
      - 'margin:\s*(?:3|5|7|9|11|13|15|17|19|21|23)px'
      - 'padding:\s*(?:3|5|7|9|11|13|15|17|19|21|23)px'
    message: "Non-standard spacing values. Craft means systematic spacing scale (4, 8, 12, 16, 24, 32...)."
    fix_action: "Use spacing scale: 5px → 4px or 8px. Consistency creates visual harmony."
    applies_to:
      - "*.css"
      - "*.scss"
      - "*.tsx"
      - "*.jsx"
