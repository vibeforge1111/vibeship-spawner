# Worldbuilding Collaboration Protocol
# How this skill interacts with other specialists in a game/narrative pipeline

id: worldbuilding-collaboration
skill: worldbuilding
version: "2.0"

# ==========================================================================
# RECEIVES FROM (Skills that delegate TO worldbuilding)
# ==========================================================================
receives_from:
  - skill: game-design
    context: "Game needs a world to exist in"
    receives:
      - Gameplay genre and mechanics requirements
      - Balance constraints (magic system must be gameable)
      - Player interaction patterns expected
      - Target audience and tone
    provides:
      - Lore that supports and explains gameplay
      - Magic systems with clear game mechanics integration
      - Factions and cultures for game content
      - Economy design that works with game systems
    example_handoff: |
      "We're making a survival game. Need a world where resource scarcity
      makes sense and magic doesn't trivialize survival challenges."

  - skill: narrative-design
    context: "Story needs a world to take place in"
    receives:
      - Narrative themes and motifs
      - Character concepts needing cultural context
      - Plot requirements (conflicts, stakes)
      - Emotional beats the world should enable
    provides:
      - World that supports the story themes
      - Cultures that create the needed conflicts
      - History that informs character motivations
      - Magic system that enables plot without breaking it
    example_handoff: |
      "Story is about cycles of oppression. Need cultures with complex
      power dynamics and a history of conflict with lasting consequences."

  - skill: procedural-generation
    context: "Generated content needs lore context"
    receives:
      - Generation algorithms and constraints
      - Terrain and dungeon structure systems
      - Variation parameters
    provides:
      - Lore explanations for generated features
      - Naming conventions for procedural naming
      - Cultural distribution rules (who lives where)
      - Variation guidelines (what can/can't be random)
    example_handoff: |
      "Procedural dungeons need names and lore reasons to exist.
      Need naming system and 'why are there so many dungeons?' explanation."

  - skill: level-design
    context: "Levels need lore context and cultural identity"
    receives:
      - Level layout requirements
      - Environmental storytelling needs
      - Player path and pacing
    provides:
      - Cultural context for environments
      - Historical events that explain ruins/battlefields
      - Environmental storytelling elements
      - Artifact and item lore
    example_handoff: |
      "This level is an ancient temple. Need to know whose temple,
      what religion, why it's ruined, and what artifacts might be there."

  - skill: character-design
    context: "Characters need cultural background"
    receives:
      - Character roles and functions
      - Personality requirements
      - Relationship needs
    provides:
      - Cultural backgrounds for characters
      - Naming that fits their culture
      - Motivations derived from world history
      - Relationships informed by cultural context
    example_handoff: |
      "Need a rebel leader character. What culture are they from?
      What are they rebelling against? Why do followers believe in them?"

  - skill: environment-art
    context: "Art needs cultural and environmental direction"
    receives:
      - Technical constraints
      - Art style direction
      - Asset requirements
    provides:
      - Cultural visual language (architecture, clothing, symbols)
      - Environmental logic (climate, biomes, geography)
      - Color palette guidance per culture
      - Reference material and mood boards
    example_handoff: |
      "Starting environment art for the desert culture. Need their
      architectural style, clothing aesthetic, and key visual symbols."

# ==========================================================================
# DELEGATION TRIGGERS (When worldbuilding hands off to others)
# ==========================================================================
delegation_triggers:
  - trigger: "story structure|narrative arc|character arc|plot|dialogue|cutscene"
    delegate_to: narrative-design
    pattern: sequential
    context: "World established, need story implementation"
    handoff_data:
      - World bible summary
      - Relevant cultural details
      - Historical events that inform plot
      - Magic system rules for story consistency
    receive: "Story that works within world rules"
    example: |
      "World is built. Here's the summary: [world bible].
      Now we need the actual story that takes place here."

  - trigger: "level layout|environment flow|game space|playable area|map layout"
    delegate_to: level-design
    pattern: sequential
    context: "World lore established, need level implementation"
    handoff_data:
      - Relevant cultural/historical context
      - Environmental constraints
      - Narrative beats the level should enable
      - Key lore elements to include
    receive: "Level design that respects lore"
    example: |
      "The dwarven ruins have this history: [brief]. The level should
      reflect that they were attacked from within, not invaded."

  - trigger: "character personality|backstory|NPC design|protagonist|antagonist"
    delegate_to: character-design
    pattern: parallel
    context: "Culture built, need characters within it"
    handoff_data:
      - Cultural background relevant to character
      - Historical events that shape them
      - Naming conventions for their culture
      - Social position and constraints
    receive: "Character that fits world"
    example: |
      "This character is from the Northern Clans. Here's their culture:
      [summary]. Names should follow [naming rules]. Key cultural tensions: [list]."

  - trigger: "environment visuals|biome art|architecture style|visual design"
    delegate_to: environment-art
    pattern: parallel
    context: "World designed, need visual implementation"
    handoff_data:
      - Cultural visual language document
      - Climate and geography details
      - Key symbols and motifs
      - Reference images and mood
    receive: "Art that matches lore"
    example: |
      "The Ashborn Isles culture should look like [visual guide].
      Key elements: volcanic stone architecture, ash motifs, fire symbolism."

  - trigger: "game mechanics|balance|systems design|gameplay loop"
    delegate_to: game-design
    pattern: parallel
    context: "Magic/economy designed, need game system integration"
    handoff_data:
      - Magic system rules and costs
      - Economic constraints
      - Resource scarcity logic
      - Combat/conflict frameworks
    receive: "Game systems that work with lore"
    example: |
      "Magic system uses Soul Points with these costs: [list].
      Need game mechanics that reflect the lore costs and limits."

  - trigger: "procedural|random generation|infinite|roguelike"
    delegate_to: procedural-generation
    pattern: parallel
    context: "World rules established, need procedural implementation"
    handoff_data:
      - Naming language rules per culture
      - Cultural distribution logic
      - Geographic constraints
      - What can/can't be randomized
    receive: "Generated content that fits lore"
    example: |
      "Northern names follow these rules: [phonemes, structure].
      These biomes can appear together: [list]. These can't: [list]."

# ==========================================================================
# COMMON SKILL COMBINATIONS (Full Workflows)
# ==========================================================================
common_combinations:
  - name: Story-Driven Game World
    skills:
      - worldbuilding
      - narrative-design
      - character-design
      - level-design
    workflow: |
      1. Establish world foundation (worldbuilding)
         - Core themes and tone
         - Magic system with limits
         - 2-3 major cultures
         - Key historical conflicts
      2. Design story within world (narrative-design)
         - Plot that uses world's conflicts
         - Characters shaped by cultures
         - Story beats that reveal lore
      3. Create characters (character-design)
         - Protagonists from established cultures
         - Antagonists with understandable motivations
         - Supporting cast with cultural variety
      4. Design levels (level-design)
         - Environments that tell world's story
         - Spaces that enable narrative beats
         - Lore integrated into exploration

  - name: Procedural World
    skills:
      - worldbuilding
      - procedural-generation
      - game-design
    workflow: |
      1. Define world rules (worldbuilding)
         - What can be generated vs fixed
         - Naming languages for each culture
         - Geographic logic constraints
         - Lore explanations for repeated elements
      2. Create generation systems (procedural-generation)
         - Naming generators per culture
         - Biome placement rules
         - Dungeon/structure variety
         - Event/encounter pools
      3. Balance for gameplay (game-design)
         - Difficulty progression
         - Resource distribution
         - Challenge variety
         - Player progression systems

  - name: MMO/Large World
    skills:
      - worldbuilding
      - narrative-design
      - environment-art
      - game-design
    workflow: |
      1. Build comprehensive world bible (worldbuilding)
         - Multiple cultures with depth
         - Long historical timeline
         - Economy that supports player activities
         - Scalable conflict for updates
      2. Design content zones (narrative-design + level-design)
         - Each zone has story purpose
         - Quests that reveal lore
         - Faction conflicts players engage with
      3. Create visual identity (environment-art)
         - Distinct visual language per culture
         - Recognizable biomes
         - Environmental storytelling
      4. Balance economy (game-design)
         - Player-driven economy
         - Lore-appropriate scarcity
         - Meaningful progression

  - name: TTRPG Campaign Setting
    skills:
      - worldbuilding
      - game-design
      - narrative-design
    workflow: |
      1. Build flexible world (worldbuilding)
         - Detailed core region, sketched periphery
         - Open conflicts players can affect
         - Factions with clear motivations
         - Magic system GM can adjudicate
      2. Design for play (game-design)
         - Hooks for various playstyles
         - Scalable challenges
         - Clear session-level content
      3. Prepare narrative seeds (narrative-design)
         - Ongoing conflicts
         - NPC relationships
         - Potential storylines (not predetermined)
         - Consequences for player choices

# ==========================================================================
# CROSS-DOMAIN INSIGHTS
# ==========================================================================
cross_domain_insights:
  - domain: Anthropology
    insight: |
      Anthropologists understand how cultures actually form and function.
      Key insights:
      - Environment shapes culture (geography → economy → values)
      - Cultures are internally diverse (no monocultures)
      - Traditions have origins (ask "why does this custom exist?")
      - Contact creates change (isolation preserves, trade transforms)
    applies_when: "Designing cultures and societies"
    recommended_reading:
      - "Guns, Germs, and Steel by Jared Diamond"
      - "The Art of Not Being Governed by James C. Scott"

  - domain: History
    insight: |
      Historians know how real civilizations rise and fall.
      Key insights:
      - Empires have lifecycles (rise, peak, decline, fall)
      - Change is constant (10,000 years of stasis needs explanation)
      - Causation matters (events have causes and consequences)
      - Perspective varies (history is written by the writers)
    applies_when: "Creating historical timelines and political systems"
    recommended_reading:
      - "The History of the Decline and Fall of the Roman Empire"
      - "A People's History of the United States"

  - domain: Economics
    insight: |
      Economists understand how resources drive behavior.
      Key insights:
      - Scarcity creates value (unlimited magic breaks economy)
      - Trade follows advantage (surplus → trade → specialization)
      - Incentives matter (people optimize for their benefit)
      - Disruption cascades (new tech changes everything)
    applies_when: "Designing economies and trade systems"
    recommended_reading:
      - "Basic Economics by Thomas Sowell"
      - "Why Nations Fail by Acemoglu & Robinson"

  - domain: Geology/Geography
    insight: |
      Geologists and geographers understand how planets work.
      Key insights:
      - Biomes follow logic (latitude, altitude, moisture)
      - Rivers flow downhill (always to the sea)
      - Mountains form in ranges (plate tectonics)
      - Climate creates culture (environment shapes survival)
    applies_when: "Designing maps and environments"
    recommended_reading:
      - "How to Build a Planet (Universe Factory series)"
      - "Worldbuilding from Map to Script"

  - domain: Linguistics
    insight: |
      Linguists understand how languages work and change.
      Key insights:
      - Languages have patterns (phonemes, structures)
      - Names follow conventions (cultural naming rules)
      - Languages drift (500 years = unintelligible without writing)
      - Sound symbolism exists (some sounds feel harsh/soft)
    applies_when: "Creating naming languages and cultural identities"
    recommended_reading:
      - "The Language Construction Kit by Mark Rosenfelder"
      - "Naming in Fiction (Author Vivian Sayan)"

  - domain: Religion/Mythology
    insight: |
      Religious studies scholars understand belief systems.
      Key insights:
      - Religions serve needs (existential, moral, social, practical)
      - Rituals reinforce belief (practice creates community)
      - Myths explain reality (stories answer questions)
      - Syncretism happens (religions mix and evolve)
    applies_when: "Designing religions and mythologies"
    recommended_reading:
      - "The Power of Myth by Joseph Campbell"
      - "The Golden Bough by James Frazer"

# ==========================================================================
# ECOSYSTEM ALTERNATIVES (Tools, not skills)
# ==========================================================================
ecosystem_alternatives:
  lore_documentation_tools:
    - name: World Anvil
      when: "Need extensive documentation, public sharing"
      tradeoff: "Monthly cost, learning curve"
      url: "https://www.worldanvil.com/"

    - name: Notion / Obsidian
      when: "Personal use, flexible structure"
      tradeoff: "Less specialized features"
      url: "https://notion.so / https://obsidian.md"

    - name: Campfire
      when: "Novel writing focus"
      tradeoff: "Less game-focused features"
      url: "https://www.campfirewriting.com/"

    - name: LegendKeeper
      when: "Wiki-style collaborative worldbuilding"
      tradeoff: "Subscription model"
      url: "https://www.legendkeeper.com/"

  map_making_tools:
    - name: Wonderdraft
      when: "Fantasy maps, professional appearance"
      tradeoff: "One-time purchase, learning curve"
      url: "https://www.wonderdraft.net/"

    - name: Inkarnate
      when: "Quick maps, browser-based"
      tradeoff: "Subscription, style limitations"
      url: "https://inkarnate.com/"

    - name: Azgaar's Fantasy Map Generator
      when: "Procedural starting point, free"
      tradeoff: "Less artistic control"
      url: "https://azgaar.github.io/Fantasy-Map-Generator/"

  name_generation_tools:
    - name: Fantasy Name Generators
      when: "Quick inspiration, many categories"
      tradeoff: "May not match your world's feel"
      url: "https://www.fantasynamegenerators.com/"

    - name: Lexicon (Conlang tool)
      when: "Creating consistent naming language"
      tradeoff: "More complex setup"
      url: "https://www.frathwiki.com/Lexicon"

# ==========================================================================
# FEEDBACK LOOPS
# ==========================================================================
feedback_loops:
  receives_feedback_from:
    - skill: playtesting / qa-engineering
      signal: "Players confused by lore, find inconsistencies"
      action: "Clarify or fix lore issues"

    - skill: narrative-design
      signal: "Story needs clash with world rules"
      action: "Adjust world to enable story, or collaborate on alternatives"

    - skill: game-design
      signal: "Magic system breaks gameplay balance"
      action: "Add constraints or modify abilities"

    - skill: environment-art
      signal: "Cultural visual language unclear or contradictory"
      action: "Provide clearer references and guidelines"

  sends_feedback_to:
    - skill: narrative-design
      signal: "Story contradicts established world rules"
      action: "Suggest story alternatives that fit world"

    - skill: game-design
      signal: "Game mechanics don't respect world logic"
      action: "Propose mechanics that fit lore"

    - skill: level-design
      signal: "Level environment doesn't match cultural context"
      action: "Provide cultural corrections"

# ==========================================================================
# PREREQUISITES AND SETUP
# ==========================================================================
prerequisites:
  required_knowledge:
    - "Basic storytelling concepts"
    - "Understanding of genre conventions (fantasy, sci-fi, etc.)"
    - "Logical thinking (cause and effect)"
    - "Basic history and geography concepts"

  recommended_tools:
    - "Note-taking app (Obsidian, Notion, World Anvil)"
    - "Timeline tool (Aeon Timeline, spreadsheet)"
    - "Mind mapping tool (for brainstorming)"
    - "Map tool (Wonderdraft, Inkarnate, or pen/paper)"

  environment_setup: |
    # Worldbuilding project structure
    mkdir -p worldbuilding/{cultures,magic,history,geography,economy,religion}

    # Create starter templates
    cat > worldbuilding/WORLD_BIBLE.md << 'EOF'
    # World Bible: [World Name]

    ## Overview
    - **Genre:** Fantasy / Sci-Fi / Other
    - **Tone:** Dark / Heroic / Gritty / Whimsical
    - **Inspirations:**

    ## The Big Lie
    What ONE major departure from reality defines this world?

    ## Magic/Technology System
    - **Source:**
    - **Cost:**
    - **Hard Limits:**
    - **Soft Limits:**

    ## Major Cultures
    See /cultures/ folder for details.

    ## Historical Timeline
    See /history/ folder for details.

    ## Economic System
    - **Scarce Resources:**
    - **Trade Basics:**
    - **Magic Impact:**

    ## Quick Reference
    | Culture | Location | Key Trait | Naming Style |
    |---------|----------|-----------|--------------|
    |         |          |           |              |

    EOF

    echo "Worldbuilding project initialized!"
    echo "Start with WORLD_BIBLE.md, then expand into folders."
