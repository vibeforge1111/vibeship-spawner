id: puzzle-design-collaboration
skill: puzzle-design
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: game-design
    context: "Core game needs puzzle content"
    receives:
      - "Core mechanics to build puzzles around"
      - "Difficulty parameters and target audience"
      - "Pacing requirements for game flow"
      - "Available puzzle mechanics from engine"
    provides: "Puzzle designs that fit game mechanics and flow"

  - skill: level-design
    context: "Level needs integrated puzzles"
    receives:
      - "Physical space constraints"
      - "Player path through environment"
      - "Environmental elements available"
      - "Gate requirements (what locks what)"
    provides: "Puzzle designs that work within physical space"

  - skill: narrative-design
    context: "Story needs puzzle integration"
    receives:
      - "Narrative context for puzzle"
      - "Character knowledge/abilities"
      - "Thematic requirements"
      - "Story pacing constraints"
    provides: "Puzzles that reinforce narrative and theme"

  - skill: qa-engineering
    context: "Need puzzle testing approach"
    receives:
      - "Bug reports on puzzle behavior"
      - "Player frustration data"
      - "Solve time analytics"
      - "Softlock reports"
    provides: "Puzzle fixes and balancing adjustments"

  - skill: ux-design
    context: "Need accessible puzzle interfaces"
    receives:
      - "UI/UX guidelines"
      - "Accessibility requirements"
      - "Input method constraints"
      - "Platform-specific UX patterns"
    provides: "Puzzle designs that work within UX framework"

  - skill: product-management
    context: "Feature requires puzzle content"
    receives:
      - "Player skill assumptions"
      - "Session length targets"
      - "Monetization requirements (if any)"
      - "Accessibility mandates"
    provides: "Puzzle content meeting product requirements"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "level layout|physical space|room design"
    delegate_to: level-design
    pattern: sequential
    context: "Puzzle needs physical environment design"
    handoff_data:
      - "Puzzle space requirements"
      - "Visibility needs (player sees goal from start)"
      - "Interactive element placement"
      - "Environmental constraints"
    receive: "Level layout with puzzle space"

  - trigger: "story integration|character|narrative"
    delegate_to: narrative-design
    pattern: parallel
    context: "Puzzle needs story connection"
    handoff_data:
      - "Puzzle theme and mechanics"
      - "Solve experience (what player learns)"
      - "Potential story beats at solve"
      - "Character abilities used"
    receive: "Narrative context and dialogue"

  - trigger: "core mechanic|game system|ability"
    delegate_to: game-design
    pattern: sequential
    context: "New mechanic needed for puzzle"
    handoff_data:
      - "Mechanic requirements"
      - "How puzzle would use mechanic"
      - "Balance considerations"
      - "Player ability assumptions"
    receive: "Implemented game mechanic"

  - trigger: "playtest|QA|bug|testing"
    delegate_to: qa-engineering
    pattern: parallel
    context: "Puzzle needs systematic testing"
    handoff_data:
      - "Puzzle design document"
      - "Expected solve paths"
      - "Known edge cases"
      - "Target solve time"
    receive: "Test results and player feedback"

  - trigger: "hint UI|accessibility|interface"
    delegate_to: ux-design
    pattern: parallel
    context: "Puzzle needs accessible interface"
    handoff_data:
      - "Hint system requirements"
      - "Feedback mechanisms needed"
      - "Accessibility features required"
      - "Input method support"
    receive: "UI implementation specifications"

  - trigger: "animation|visual feedback|particle"
    delegate_to: vfx-realtime
    pattern: parallel
    context: "Puzzle needs visual polish"
    handoff_data:
      - "Feedback moments (success, partial, fail)"
      - "Interactive element highlighting"
      - "State change visualizations"
      - "Reward celebration effects"
    receive: "VFX implementation"

  - trigger: "audio|sound|music puzzle"
    delegate_to: game-audio
    pattern: parallel
    context: "Puzzle needs audio design"
    handoff_data:
      - "Audio feedback requirements"
      - "Music-based puzzle elements"
      - "Audio accessibility alternatives"
      - "Emotional audio cues"
    receive: "Audio implementation"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: qa-engineering
      signal: "Players stuck on specific puzzle"
      action: "Redesign puzzle or add hints"

    - skill: qa-engineering
      signal: "Softlock discovered"
      action: "Add reset mechanism or fix state"

    - skill: qa-engineering
      signal: "Solve times outside target range"
      action: "Adjust difficulty or add/remove clues"

    - skill: level-design
      signal: "Puzzle doesn't fit space"
      action: "Redesign for available space"

    - skill: narrative-design
      signal: "Puzzle breaks story pacing"
      action: "Adjust puzzle complexity or placement"

    - skill: ux-design
      signal: "Interface confusing players"
      action: "Simplify puzzle inputs or feedback"

  sends_feedback_to:
    - skill: game-design
      signal: "Mechanic limitations discovered"
      action: "Request mechanic extension or new mechanic"

    - skill: level-design
      signal: "Space needs modification for puzzle"
      action: "Request layout changes"

    - skill: qa-engineering
      signal: "New puzzle ready for testing"
      action: "Add to test queue"

    - skill: ux-design
      signal: "Hint system needs improvement"
      action: "Request UI modifications"

    - skill: narrative-design
      signal: "Puzzle completion moment"
      action: "Add story beat opportunity"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Escape Rooms
    insight: |
      The escape room industry has solved puzzle design at industrial scale:
      - 60-minute sessions, 3-8 puzzles, 80%+ success rate target
      - Game masters observe every session, adjust in real-time
      - "The 3 C's": Confirm (you're right), Clue (look here), Complete (here's answer)
      - Parallel puzzle design prevents single-point failure
      - Physical intuition guides digital puzzle design
    applies_when: "Designing puzzle flow, hint systems, or multi-puzzle sequences"

  - domain: Cognitive Psychology
    insight: |
      The "aha moment" is a dopamine hit:
      - Insight problems vs. analytic problems (different brain activation)
      - Incubation period: Stepping away helps (design parallel paths)
      - Cognitive load: Working memory is ~4 items (don't overload)
      - Transfer: Learning in one puzzle should apply to next
      - Flow state requires challenge matching skill level
    applies_when: "Designing for player satisfaction and learning"

  - domain: Educational Design
    insight: |
      Instructional design knows scaffolding:
      - Zone of Proximal Development: Just beyond current ability
      - Worked examples → Partial support → Independent practice
      - Immediate feedback accelerates learning
      - Spaced repetition: Revisit concepts with variation
      - Formative assessment: Check understanding, not grade it
    applies_when: "Designing puzzle progression and teaching new mechanics"

  - domain: Magic & Illusion
    insight: |
      Magicians understand misdirection:
      - The solution hidden in plain sight
      - Attention is finite: Guide it deliberately
      - The reveal is the payoff: Build to it
      - Familiar objects used unexpectedly
      - The "force": Leading to conclusion that feels chosen
    applies_when: "Designing puzzle solutions and player discovery moments"

  - domain: Improv Comedy
    insight: |
      "Yes, And" applies to puzzle feedback:
      - Accept player's attempts, build on them
      - "Wrong" should still provide information
      - Every action should advance understanding
      - Dead ends should reveal something useful
      - The player should feel heard, not blocked
    applies_when: "Designing puzzle feedback and failure states"

  - domain: Crossword Construction
    insight: |
      Crossword constructors know constraint satisfaction:
      - Start with theme entries, fill around them
      - Every crossing must be fair (deducible both ways)
      - Difficulty from wordplay, not obscurity
      - Clues should be clever, not cryptic
      - The "revealer" reframes previous answers
    applies_when: "Designing interconnected puzzles or wordplay mechanics"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Puzzle Game Development
    skills:
      - puzzle-design
      - game-design
      - level-design
      - qa-engineering
    workflow: |
      1. Core mechanic design (game-design)
      2. Puzzle design using mechanic (puzzle-design)
      3. Space/environment for puzzle (level-design)
      4. Playtest and iterate (qa-engineering → puzzle-design)
      5. Polish and ship (all skills)

  - name: Narrative Puzzle Integration
    skills:
      - puzzle-design
      - narrative-design
      - level-design
    workflow: |
      1. Story requirements and themes (narrative-design)
      2. Puzzle design fitting narrative (puzzle-design)
      3. Environment that tells story and hosts puzzle (level-design)
      4. Story beats at puzzle solve points (narrative-design)
      5. Integration polish (all skills)

  - name: Escape Room Style Game
    skills:
      - puzzle-design
      - level-design
      - ux-design
      - game-audio
    workflow: |
      1. Room/area design (level-design)
      2. Puzzle set design with dependencies (puzzle-design)
      3. Hint system UI (ux-design)
      4. Audio feedback and atmosphere (game-audio)
      5. Playtest full room flow (puzzle-design + qa-engineering)

  - name: Puzzle Accessibility Pass
    skills:
      - puzzle-design
      - ux-design
      - qa-engineering
    workflow: |
      1. Accessibility audit of puzzles (ux-design)
      2. Alternative solutions for accessibility (puzzle-design)
      3. Test with accessibility testers (qa-engineering)
      4. Iterate on feedback (puzzle-design + ux-design)

  - name: Tutorial/Teaching Sequence
    skills:
      - puzzle-design
      - game-design
      - ux-design
    workflow: |
      1. Mechanic to teach (game-design)
      2. Teaching puzzle sequence (puzzle-design)
      3. Tutorial UI/guidance (ux-design)
      4. Test with new players (qa-engineering)
      5. Refine based on confusion points (all skills)

# ============================================================================
# SKILL PAIRING BENEFITS
# ============================================================================
pairing_benefits:
  level-design:
    synergy: "Critical"
    benefit: "Physical space guides puzzle flow; environmental storytelling enhances puzzle themes"
    integration_points:
      - "Puzzle visibility from entry point"
      - "Interactive element placement"
      - "Environmental hints and foreshadowing"
      - "Player path through puzzle space"

  narrative-design:
    synergy: "High"
    benefit: "Story context makes puzzles meaningful; puzzle solutions can reveal story"
    integration_points:
      - "Puzzles that teach world lore"
      - "Character-specific puzzle abilities"
      - "Story beats at solve moments"
      - "Thematic puzzle metaphors"

  game-design:
    synergy: "Critical"
    benefit: "Core mechanics enable puzzle variety; puzzle feedback shapes mechanic polish"
    integration_points:
      - "New mechanics for puzzle variety"
      - "Puzzle teaching game systems"
      - "Balance between puzzle and action"
      - "Mechanic mastery through puzzles"

  ux-design:
    synergy: "High"
    benefit: "Clear interfaces reduce frustration; accessibility expands audience"
    integration_points:
      - "Hint system interface"
      - "Puzzle input methods"
      - "Accessibility features"
      - "Feedback visualizations"

  qa-engineering:
    synergy: "Critical"
    benefit: "Playtesting reveals blind spots; systematic testing ensures solvability"
    integration_points:
      - "Fresh player observations"
      - "Softlock detection"
      - "Difficulty curve verification"
      - "Solve time metrics"
