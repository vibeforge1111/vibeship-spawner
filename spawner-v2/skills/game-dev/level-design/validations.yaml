# Level Design Validations
# Automated and manual checks for level design quality

validations:
  # ============================================================================
  # BLOCKOUT PHASE CHECKLIST
  # ============================================================================
  - id: blockout-metrics-defined
    name: Level Metrics Document Exists
    severity: critical
    type: checklist
    items:
      - "Character height documented"
      - "Jump height and distance documented"
      - "Walk and run speeds documented"
      - "Corridor minimum widths defined"
      - "Door dimensions defined"
      - "Comfortable vs challenging jump gaps defined"
      - "Combat engagement ranges defined"
    message: "Level metrics must be documented before blocking out. Derive all values from character controller."
    fix_action: "Create a metrics document from character controller values before any blockout work."
    applies_to:
      - "level-design"
      - "blockout"

  - id: blockout-before-art
    name: Blockout Playtested Before Art Pass
    severity: critical
    type: checklist
    items:
      - "Level playable with placeholder art"
      - "Minimum 3 external playtests completed"
      - "Core gameplay loop validated"
      - "Major layout issues addressed"
      - "Combat encounters timed and tuned"
      - "Pacing reviewed and adjusted"
      - "Geometry locked for art pass"
    message: "Never begin art pass before blockout is proven fun through playtesting."
    fix_action: "Complete blockout iteration with playtests before any final art investment."
    applies_to:
      - "level-design"
      - "production"

  # ============================================================================
  # PLAYER FLOW VALIDATIONS
  # ============================================================================
  - id: golden-path-clarity
    name: Critical Path Clearly Readable
    severity: critical
    type: checklist
    items:
      - "Main path distinguishable from optional paths"
      - "Next objective visible or clearly signposted"
      - "Lighting guides toward objectives"
      - "No required backtracking through cleared areas"
      - "Fresh playtesters find path within 30 seconds of entering new area"
    message: "Players should never be lost on the critical path. Test with fresh eyes."
    fix_action: "Apply breadcrumbing techniques: lighting, composition, environmental hints."
    applies_to:
      - "level-design"
      - "player-flow"

  - id: orientation-landmarks
    name: Navigation Landmarks Present
    severity: high
    type: checklist
    items:
      - "Global landmark visible from 70%+ of map (for open/hub areas)"
      - "Each area has distinctive visual identity"
      - "Local landmarks provide sub-area orientation"
      - "Players can describe their location verbally"
      - "No identical-looking corridors or rooms"
    message: "Players must always know where they are and how to get where they're going."
    fix_action: "Add distinctive landmarks, color coding, or architectural variation."
    applies_to:
      - "level-design"
      - "open-world"
      - "hub-areas"

  - id: dead-end-rewards
    name: All Dead Ends Have Purpose
    severity: warning
    type: checklist
    items:
      - "Every non-main path leads to a reward, lore, or vista"
      - "Dead ends are short (sub-30 seconds to traverse)"
      - "Player can recognize dead end before full commitment"
      - "Optional paths clearly read as optional"
    message: "Dead ends without rewards punish exploration and erode player trust."
    fix_action: "Add pickup, lore item, vista, or shortcut unlock. Or remove the path entirely."
    applies_to:
      - "level-design"
      - "exploration"

  # ============================================================================
  # PACING VALIDATIONS
  # ============================================================================
  - id: push-pull-rhythm
    name: Intensity Variation in Level
    severity: high
    type: checklist
    items:
      - "Level has identifiable high-intensity sections"
      - "Level has breathing room between intense moments"
      - "No more than 2 combat encounters back-to-back without breather"
      - "Safe spaces exist for resource management"
      - "Pacing graph shows variation, not flat line"
    message: "Unrelenting intensity causes fatigue. Constant calm causes boredom."
    fix_action: "Add breathing rooms after intense sequences. Vary encounter density."
    applies_to:
      - "level-design"
      - "pacing"

  - id: three-beat-structure
    name: Level Has Clear Structure
    severity: warning
    type: checklist
    items:
      - "Setup phase introduces space and rules"
      - "Confrontation phase escalates challenge"
      - "Resolution phase provides climax and payoff"
      - "Each phase has distinct feel"
      - "Transitions between phases are clear"
    message: "Well-structured levels are more memorable and satisfying."
    fix_action: "Map level to three-beat structure. Identify and strengthen phase transitions."
    applies_to:
      - "level-design"
      - "linear"
      - "mission"

  # ============================================================================
  # COMBAT ARENA VALIDATIONS
  # ============================================================================
  - id: combat-arena-design
    name: Combat Arenas Properly Designed
    severity: high
    type: checklist
    items:
      - "Cover elements distributed throughout arena"
      - "No invincible camping positions"
      - "Entry gives player overview before engagement"
      - "Exit clearly different from entry"
      - "Arena size matches enemy count and type"
      - "Vertical elements if ranged combat expected"
      - "Post-combat reward present (loot, vista, story)"
    message: "Combat arenas need intentional design for tactical depth and flow."
    fix_action: "Review arena against cover, flow, and sight line requirements."
    applies_to:
      - "level-design"
      - "combat"
      - "arena"

  - id: encounter-escalation
    name: Combat Encounters Properly Escalated
    severity: warning
    type: checklist
    items:
      - "First encounter in level is easiest"
      - "New enemies introduced in controlled setting first"
      - "Enemy combinations build on player knowledge"
      - "No difficulty cliffs without warning"
      - "Final encounter is climax, not afterthought"
    message: "Encounter design should teach then test, building throughout level."
    fix_action: "Map encounter difficulty curve. Ensure steady escalation with new elements isolated first."
    applies_to:
      - "level-design"
      - "combat"
      - "encounter-design"

  # ============================================================================
  # MULTIPLAYER MAP VALIDATIONS
  # ============================================================================
  - id: multiplayer-spawn-safety
    name: Spawn Points Are Safe
    severity: critical
    type: checklist
    items:
      - "No enemy sightlines to spawn points"
      - "Each spawn has 3+ exit routes"
      - "Immediate cover available at spawn"
      - "No spawn point within grenade range of common positions"
      - "Spawn camping tested and mitigated"
    message: "Spawn deaths destroy the multiplayer experience. Design spawns to be safe."
    fix_action: "Block sightlines to spawns. Add cover and multiple exits. Test with skilled players."
    applies_to:
      - "level-design"
      - "multiplayer"
      - "spawn-design"

  - id: multiplayer-map-balance
    name: Multiplayer Map Fairly Balanced
    severity: critical
    type: checklist
    items:
      - "Both teams have equal access to power positions"
      - "Objective routes balanced in distance and cover"
      - "Power weapons/pickups equidistant from spawns"
      - "High ground positions contestable from multiple angles"
      - "No side has inherent advantage"
      - "Map tested with team swaps showing similar results"
    message: "Unfair maps aren't fun for either team."
    fix_action: "Audit distances, sightlines, and advantages for each team. Playtest with team swaps."
    applies_to:
      - "level-design"
      - "multiplayer"
      - "competitive"

  - id: multiplayer-callout-clarity
    name: Map Locations Are Communicable
    severity: warning
    type: checklist
    items:
      - "Each area has distinctive visual identity"
      - "Areas can be given clear, memorable names"
      - "No two areas look identical"
      - "Compass directions work (clear north/south/east/west)"
      - "Callouts tested with new players"
    message: "Team communication requires unique, identifiable locations."
    fix_action: "Add visual distinction to similar areas. Test callout clarity with new players."
    applies_to:
      - "level-design"
      - "multiplayer"
      - "team-based"

  # ============================================================================
  # TEACHING & ONBOARDING VALIDATIONS
  # ============================================================================
  - id: mechanic-introduction
    name: New Mechanics Properly Introduced
    severity: high
    type: checklist
    items:
      - "New mechanic introduced in isolation"
      - "First use has low/no failure penalty"
      - "Player can observe solution before attempting"
      - "Complexity added after base mechanic understood"
      - "No tutorial text unless absolutely necessary"
    message: "Teach through design, not text. Safe spaces to learn before stakes."
    fix_action: "Apply Nintendo teaching method: safe introduction, guided challenge, twist, mastery test."
    applies_to:
      - "level-design"
      - "tutorial"
      - "onboarding"

  - id: no-softlocks
    name: No Soft Lock Conditions
    severity: critical
    type: checklist
    items:
      - "Every one-way transition audited"
      - "Required items obtainable after any one-way"
      - "Pits have escape routes or quick death"
      - "Consumable soft locks impossible"
      - "Sequence breaks don't break story"
    message: "Soft locks waste player time and break trust. Never ship one."
    fix_action: "Audit every one-way transition. Add escape routes or move required items."
    applies_to:
      - "level-design"
      - "progression"
      - "qa"

  # ============================================================================
  # METRICS VALIDATIONS
  # ============================================================================
  - id: jump-gap-consistency
    name: Jump Gaps Match Controller Metrics
    severity: critical
    type: checklist
    items:
      - "All gaps tested against documented jump distance"
      - "Comfortable gaps at 80% of max jump"
      - "Challenging gaps at 95% of max jump"
      - "No gaps exceed 100% of max jump on critical path"
      - "Coyote time and jump buffer accounted for"
      - "All gaps tested at lowest supported framerate"
    message: "Jumps that don't match controller feel unfair and frustrating."
    fix_action: "Measure all gaps against character controller. Adjust geometry to match metrics."
    applies_to:
      - "level-design"
      - "platforming"
      - "metrics"

  - id: corridor-combat-width
    name: Combat Corridors Wide Enough
    severity: high
    type: checklist
    items:
      - "Combat corridors at minimum 4x character width"
      - "Dodge/roll space available in combat zones"
      - "Cover positions accessible without getting stuck"
      - "Multiple players can pass (if multiplayer)"
      - "AI can navigate without clustering"
    message: "Narrow combat spaces feel cramped and frustrating."
    fix_action: "Widen combat areas to at least 4x character width. Test with combat playthrough."
    applies_to:
      - "level-design"
      - "combat"
      - "metrics"

  # ============================================================================
  # POLISH PHASE VALIDATIONS
  # ============================================================================
  - id: visual-path-hierarchy
    name: Visual Hierarchy Guides Player
    severity: warning
    type: checklist
    items:
      - "Critical paths are brightest or most saturated"
      - "Interactive elements have consistent visual language"
      - "Doors readable as doors"
      - "Composition leads eye to objectives"
      - "Blur test: direction clear when screenshot blurred"
    message: "Players should know where to go without UI markers."
    fix_action: "Apply lighting, color, and composition to guide attention."
    applies_to:
      - "level-design"
      - "polish"
      - "art-pass"

  - id: performance-budget
    name: Level Within Performance Budget
    severity: critical
    type: checklist
    items:
      - "Draw calls within target"
      - "Poly count within budget"
      - "Occlusion culling functioning"
      - "LODs implemented for distant objects"
      - "Lightmaps within memory budget"
      - "Tested on minimum spec hardware"
    message: "Beautiful levels that don't run are useless."
    fix_action: "Profile and optimize. Cut detail in non-focal areas."
    applies_to:
      - "level-design"
      - "optimization"
      - "production"

  # ============================================================================
  # OPEN WORLD SPECIFIC VALIDATIONS
  # ============================================================================
  - id: open-world-density
    name: Content Density Balanced
    severity: warning
    type: checklist
    items:
      - "Points of interest distributed evenly"
      - "No large empty zones without purpose"
      - "High-traffic routes have most content"
      - "Optional areas less dense but rewarding"
      - "Map icons not overwhelming"
      - "Discovery balanced with marking"
    message: "Open worlds need intentional content distribution."
    fix_action: "Map content density. Fill dead zones or make emptiness intentional."
    applies_to:
      - "level-design"
      - "open-world"

  - id: open-world-fast-travel
    name: Fast Travel System Supports Exploration
    severity: warning
    type: checklist
    items:
      - "Fast travel points discovered through play"
      - "Manual exploration still rewarded"
      - "Fast travel doesn't skip critical content"
      - "Fast travel available after initial exploration"
      - "Destination preview shows what's there"
    message: "Fast travel should enhance exploration, not replace it."
    fix_action: "Gate fast travel behind discovery. Ensure content between points is worth walking."
    applies_to:
      - "level-design"
      - "open-world"
      - "traversal"
