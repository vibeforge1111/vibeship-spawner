id: code-review-collaboration
skill: code-review
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: frontend
    context: "Frontend code needs review"
    receives:
      - "Pull request"
      - "Component changes"
      - "State management updates"
    provides: "Review feedback and approval"

  - skill: backend
    context: "Backend code needs review"
    receives:
      - "Pull request"
      - "API changes"
      - "Database migrations"
    provides: "Review feedback and approval"

  - skill: devops
    context: "Infrastructure code needs review"
    receives:
      - "Terraform/IaC changes"
      - "Pipeline updates"
      - "Configuration changes"
    provides: "Review feedback and approval"

  - skill: cybersecurity
    context: "Security-sensitive code needs review"
    receives:
      - "Auth implementation"
      - "Crypto usage"
      - "Input validation"
    provides: "Security-focused review"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "security vulnerability|penetration|exploit"
    delegate_to: cybersecurity
    pattern: sequential
    context: "Code review found security issue"
    handoff_data:
      - "Vulnerable code location"
      - "Attack vector"
      - "Severity assessment"
    receive: "Security remediation guidance"

  - trigger: "test coverage|testing strategy"
    delegate_to: qa-engineering
    pattern: parallel
    context: "Code review found testing gaps"
    handoff_data:
      - "Untested code paths"
      - "Missing edge cases"
      - "Test recommendations"
    receive: "Testing guidance"

  - trigger: "performance|optimization|refactor"
    delegate_to: codebase-optimization
    pattern: sequential
    context: "Code review found optimization opportunity"
    handoff_data:
      - "Performance concerns"
      - "Code complexity"
      - "Refactoring scope"
    receive: "Optimization plan"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: qa-engineering
      signal: "Test failures from reviewed code"
      action: "Request additional changes"

    - skill: cybersecurity
      signal: "Security issues found post-merge"
      action: "Update review checklist"

    - skill: codebase-optimization
      signal: "Technical debt from approved code"
      action: "Raise standards for future reviews"

  sends_feedback_to:
    - skill: frontend
      signal: "Common frontend issues"
      action: "Improve coding standards"

    - skill: backend
      signal: "Common backend issues"
      action: "Improve coding standards"

    - skill: devops
      signal: "Infrastructure anti-patterns"
      action: "Update IaC templates"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Technical Writing
    insight: |
      Technical writers know clarity:
      - Audience awareness matters
      - Constructive tone enables action
      - Specificity prevents confusion
      - Examples clarify abstract feedback
      Good review comments are good technical writing.
    applies_when: "Writing any review feedback"

  - domain: Teaching
    insight: |
      Teachers know learning:
      - Questions prompt understanding
      - Explain the why, not just what
      - Meet learners where they are
      - Celebrate progress
      Every review is a teaching opportunity.
    applies_when: "Reviewing code from junior developers"

  - domain: Psychology
    insight: |
      Psychologists know feedback:
      - Separate behavior from identity
      - Timing affects reception
      - Safety enables honesty
      - Growth mindset beats fixed mindset
      Code review is human interaction first.
    applies_when: "Giving any critical feedback"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Feature Review Cycle
    skills:
      - code-review
      - qa-engineering
      - cybersecurity
    workflow: |
      1. Initial code review (code-review)
      2. Security review for sensitive changes (cybersecurity)
      3. Test coverage review (qa-engineering)
      4. Final approval (code-review)

  - name: Architecture Review
    skills:
      - code-review
      - codebase-optimization
      - backend
      - frontend
    workflow: |
      1. Design review (code-review)
      2. Architecture assessment (codebase-optimization)
      3. Domain-specific review (backend/frontend)
      4. Final approval (code-review)
