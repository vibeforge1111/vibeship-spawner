id: generative-art
skill: Generative Art
version: "1.0"

validations:
  - id: check-seeded-random
    name: Seeded Random for Reproducibility
    description: Use seeded random for reproducible generative art
    pattern: "random\\(\\)|Math\\.random\\(\\)"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "randomSeed|noiseSeed|seed|createRNG"
    message: "Use seeded random for reproducible output"
    severity: warning
    autofix: false

  - id: check-save-function
    name: Export/Save Functionality
    description: Generative sketches should have export capability
    pattern: "createCanvas|canvas"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "save|export|download|toDataURL"
    message: "Add save/export functionality for high-resolution output"
    severity: info
    autofix: false

  - id: check-color-palette
    name: Intentional Color Palette
    description: Avoid default colors, use intentional palettes
    pattern: "fill\\(255\\)|stroke\\(0\\)|color\\(255,\\s*255,\\s*255\\)"
    file_glob: "**/*.{js,ts}"
    match: present
    message: "Avoid default colors - use intentional color palettes"
    severity: info
    autofix: false

  - id: check-resolution-independence
    name: Resolution Independence
    description: Use relative units for resolution-independent art
    pattern: "\\d{3,}[^%]"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "width|height|unit|ratio"
    message: "Consider using relative units (% of width/height) for resolution independence"
    severity: info
    autofix: false

  - id: check-metadata-format
    name: NFT Metadata Format
    description: NFT metadata should follow standards
    pattern: "metadata|attributes|trait"
    file_glob: "**/*.{js,ts,json}"
    match: present
    context_pattern: "trait_type|value|name|description|image"
    message: "Ensure metadata follows ERC-721/OpenSea standards"
    severity: warning
    autofix: false

  - id: check-noise-seed
    name: Noise Seeding
    description: Noise functions should be seeded for reproducibility
    pattern: "noise\\(|perlin|simplex"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "noiseSeed|seed"
    message: "Seed noise functions for reproducible output"
    severity: warning
    autofix: false

  - id: check-frame-rate
    name: Animation Frame Rate
    description: Consider frame rate for animated pieces
    pattern: "draw\\(\\)|requestAnimationFrame|animate"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "frameRate|fps|performance"
    message: "Consider frame rate for animated generative art"
    severity: info
    autofix: false

  - id: check-edge-cases
    name: Edge Case Handling
    description: Handle edge cases in generative systems
    pattern: "weightedChoice|random.*select|pick"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "fallback|default|constrain|clamp"
    message: "Handle edge cases to prevent broken outputs"
    severity: warning
    autofix: false

  - id: check-gradient-dithering
    name: Gradient Dithering
    description: Add dithering to prevent gradient banding
    pattern: "gradient|lerp.*color|lerpColor"
    file_glob: "**/*.{js,ts}"
    match: present
    context_pattern: "noise|dither|random"
    message: "Consider adding noise/dithering to prevent gradient banding"
    severity: info
    autofix: false

pre_commit:
  - id: seed-test
    name: Seed Reproducibility Test
    command: "npm run test:seeds"
    description: Verify same seed produces identical output

  - id: metadata-validate
    name: Metadata Validation
    command: "npm run validate:metadata"
    description: Validate NFT metadata format

ci_checks:
  - id: distribution-test
    name: Trait Distribution Test
    command: "npm run test:distribution"
    description: Verify trait rarity distribution
    required: false

  - id: resolution-test
    name: Multi-Resolution Test
    command: "npm run test:resolutions"
    description: Test output at multiple resolutions
    required: false

  - id: determinism-test
    name: Cross-Platform Determinism
    command: "npm run test:determinism"
    description: Verify identical output across platforms
    required: true
