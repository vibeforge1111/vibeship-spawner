id: backend-collaboration
skill: backend
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: frontend
    context: "Frontend needs API endpoints"
    receives:
      - "Data requirements"
      - "API contract expectations"
      - "Performance needs"
    provides: "API endpoints and documentation"

  - skill: product-management
    context: "Feature requires backend work"
    receives:
      - "Feature requirements"
      - "Business logic rules"
      - "Data model needs"
    provides: "Backend implementation"

  - skill: devops
    context: "Infrastructure needs application changes"
    receives:
      - "Deployment constraints"
      - "Scaling requirements"
      - "Environment configuration"
    provides: "Application ready for deployment"

  - skill: data-analytics
    context: "Analytics needs data pipeline"
    receives:
      - "Data requirements"
      - "Event tracking needs"
      - "Reporting requirements"
    provides: "Data endpoints and events"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "ui|component|react|frontend"
    delegate_to: frontend
    pattern: parallel
    context: "Backend provides API for frontend"
    handoff_data:
      - "API documentation"
      - "Data schemas"
      - "Authentication flow"
    receive: "Frontend integration"

  - trigger: "deploy|kubernetes|infrastructure"
    delegate_to: devops
    pattern: sequential
    context: "Backend needs deployment"
    handoff_data:
      - "Resource requirements"
      - "Environment variables"
      - "Health check endpoints"
    receive: "Deployment configuration"

  - trigger: "security audit|penetration|vulnerability"
    delegate_to: cybersecurity
    pattern: sequential
    context: "Backend needs security review"
    handoff_data:
      - "Auth implementation"
      - "API surface"
      - "Data handling"
    receive: "Security assessment"

  - trigger: "test|integration|e2e"
    delegate_to: qa-engineering
    pattern: parallel
    context: "Backend needs testing strategy"
    handoff_data:
      - "API endpoints"
      - "Business logic"
      - "Edge cases"
    receive: "Test plan"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: frontend
      signal: "API usability issues"
      action: "Improve API ergonomics"

    - skill: devops
      signal: "Performance or scaling issues"
      action: "Optimize queries and caching"

    - skill: cybersecurity
      signal: "Security vulnerabilities"
      action: "Patch and harden"

  sends_feedback_to:
    - skill: frontend
      signal: "API changes or deprecations"
      action: "Update client code"

    - skill: devops
      signal: "Resource requirement changes"
      action: "Adjust infrastructure"

    - skill: product-management
      signal: "Technical constraints"
      action: "Adjust requirements"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Distributed Systems
    insight: |
      Distributed systems engineers know failure:
      - Network is unreliable
      - Clocks lie
      - Partial failures are the norm
      - Idempotency saves lives
      Every backend is distributed eventually.
    applies_when: "Designing any multi-service architecture"

  - domain: Database Administration
    insight: |
      DBAs know data:
      - Indexes solve 80% of problems
      - N+1 queries are silent killers
      - Connection pools need tuning
      - Backups are only good if tested
      Database is the bottleneck until proven otherwise.
    applies_when: "Any database-heavy operation"

  - domain: Security Engineering
    insight: |
      Security engineers know trust:
      - Never trust user input
      - Defense in depth
      - Principle of least privilege
      - Secrets management is critical
      Security is not a feature, it's a foundation.
    applies_when: "Handling authentication, authorization, or sensitive data"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Full-Stack Feature
    skills:
      - backend
      - frontend
      - qa-engineering
    workflow: |
      1. API design (backend)
      2. Implementation (backend)
      3. Frontend integration (frontend)
      4. End-to-end testing (qa-engineering)

  - name: Data Pipeline
    skills:
      - backend
      - data-analytics
      - devops
    workflow: |
      1. Event schema design (backend)
      2. Pipeline implementation (backend)
      3. Analytics integration (data-analytics)
      4. Monitoring setup (devops)
