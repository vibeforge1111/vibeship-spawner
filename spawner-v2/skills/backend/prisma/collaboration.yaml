id: prisma-collaboration
skill: prisma
version: 1.0.0

receives_from:
  - skill: nextjs-app-router
    context: "Database layer for Next.js app"
    receives:
      - "Data requirements"
      - "API route needs"
    provides: "Type-safe database queries"

  - skill: supabase-backend
    context: "Using Prisma with Supabase"
    receives:
      - "Database connection"
      - "Schema requirements"
    provides: "Type-safe ORM layer over Supabase Postgres"

  - skill: graphql-schema
    context: "Database for GraphQL API"
    receives:
      - "Schema types"
      - "Resolver requirements"
    provides: "Database operations for resolvers"

delegation_triggers:
  - trigger: "next.js|api routes|app router"
    delegate_to: nextjs-app-router
    pattern: sequential
    context: "Need Next.js integration for Prisma"

  - trigger: "supabase|auth"
    delegate_to: supabase-backend
    pattern: sequential
    context: "Using Supabase with Prisma"

  - trigger: "graphql|api"
    delegate_to: graphql-schema
    pattern: sequential
    context: "Building GraphQL with Prisma"

  - trigger: "testing|test"
    delegate_to: integration-testing
    pattern: sequential
    context: "Testing Prisma database operations"

feedback_loops:
  receives_feedback_from:
    - skill: performance-profiling
      signal: "Query performance issues"
      action: "Add indexes and optimize queries"

    - skill: integration-testing
      signal: "Test database patterns"
      action: "Improve testing setup"

  sends_feedback_to:
    - skill: nextjs-app-router
      signal: "Data fetching patterns"
      action: "Inform server component data loading"

    - skill: typescript
      signal: "Type generation patterns"
      action: "Share Prisma type usage"

cross_domain_insights:
  from_domains:
    - domain: database-design
      insight: "Normalize but know when to denormalize"
      application: "Design Prisma schemas for query patterns"

    - domain: performance
      insight: "Measure before optimizing"
      application: "Use Prisma query logging to find slow queries"

    - domain: security
      insight: "Parameterize all queries"
      application: "Use Prisma's built-in parameterization, avoid raw string concat"

common_combinations:
  - name: Next.js Full Stack
    skills:
      - prisma
      - nextjs-app-router
      - typescript
    workflow: |
      1. Set up Prisma with database
      2. Design schema with models
      3. Create Prisma client singleton
      4. Use in Server Components and API routes
      5. Deploy with connection pooling

  - name: Supabase with Type Safety
    skills:
      - prisma
      - supabase-backend
    workflow: |
      1. Connect Prisma to Supabase Postgres
      2. Configure pooled and direct URLs
      3. Design schema in Prisma
      4. Use Prisma for queries, Supabase for auth/storage
      5. Migrate with Prisma

  - name: GraphQL API
    skills:
      - prisma
      - graphql-schema
    workflow: |
      1. Design Prisma schema
      2. Generate GraphQL types from schema
      3. Use Prisma in resolvers
      4. Add DataLoader for batching
      5. Deploy with Prisma Accelerate
