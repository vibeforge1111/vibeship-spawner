# Collaboration - Monorepo Management
version: 1.0.0
skill_id: monorepo-management

prerequisites:
  recommended:
    - skill: cicd-pipelines
      reason: "CI optimization"
      what_to_know:
        - "GitHub Actions"
        - "Caching strategies"

delegation_triggers:
  - trigger: "CI/CD for monorepo"
    delegate_to: cicd-pipelines
    context: "Pipeline optimization"

  - trigger: "shared UI components"
    delegate_to: react-patterns
    context: "UI package design"

  - trigger: "TypeScript config"
    delegate_to: typescript-strict
    context: "Shared tsconfig"

receives_context_from:
  - skill: cicd-pipelines
    receives:
      - "Pipeline structure"
      - "Caching setup"

provides_context_to:
  - skill: cicd-pipelines
    provides:
      - "Task dependencies"
      - "Caching outputs"

collaboration_patterns:
  with_nextjs:
    when: "Next.js in monorepo"
    approach: |
      ## Next.js Monorepo Setup

      // apps/web/next.config.js
      module.exports = {
        transpilePackages: ["@repo/ui", "@repo/utils"],
      };

      // turbo.json
      {
        "tasks": {
          "build": {
            "dependsOn": ["^build"],
            "outputs": [".next/**", "!.next/cache/**"]
          },
          "dev": {
            "cache": false,
            "persistent": true
          }
        }
      }

  with_shared_config:
    when: "Sharing configs across packages"
    approach: |
      ## Shared ESLint Config

      // packages/config-eslint/package.json
      {
        "name": "@repo/eslint-config",
        "main": "index.js"
      }

      // packages/config-eslint/index.js
      module.exports = {
        extends: ["next/core-web-vitals", "prettier"],
        rules: {}
      };

      // apps/web/.eslintrc.js
      module.exports = {
        extends: ["@repo/eslint-config"]
      };

ecosystem:
  build_tools:
    - name: "turborepo"
      use_when: "Fast, simple monorepo builds"
    - name: "nx"
      use_when: "Large monorepos, advanced features"

  package_managers:
    - name: "pnpm"
      use_when: "Recommended - fast, strict"
    - name: "npm workspaces"
      use_when: "Simple needs"
    - name: "yarn workspaces"
      use_when: "Existing yarn setup"
