id: vercel-deployment-collaboration
skill: vercel-deployment
version: 1.0.0

# ============================================================================
# RECEIVES FROM (Who delegates TO this skill)
# ============================================================================
receives_from:
  - skill: nextjs-app-router
    context: "Next.js app needs deployment"
    receives:
      - "App configuration"
      - "Route handlers"
      - "Build requirements"
    provides: "Deployment configuration"

  - skill: devops
    context: "DevOps needs Vercel setup"
    receives:
      - "CI/CD requirements"
      - "Environment strategy"
      - "Monitoring needs"
    provides: "Vercel platform config"

  - skill: frontend
    context: "Frontend needs hosting"
    receives:
      - "Build output"
      - "Asset requirements"
      - "Performance targets"
    provides: "Edge deployment"

  - skill: backend
    context: "Backend needs serverless"
    receives:
      - "API routes"
      - "Edge functions"
      - "Serverless functions"
    provides: "Function deployment"

# ============================================================================
# DELEGATION TRIGGERS
# ============================================================================
delegation_triggers:
  - trigger: "next.js|app router|pages|server components"
    delegate_to: nextjs-app-router
    pattern: parallel
    context: "Deployment needs Next.js patterns"
    handoff_data:
      - "Build config"
      - "Runtime requirements"
      - "Edge compatibility"
    receive: "Next.js configuration"

  - trigger: "database|supabase|backend"
    delegate_to: supabase-backend
    pattern: parallel
    context: "Deployment needs database"
    handoff_data:
      - "Connection strings"
      - "Environment config"
      - "Edge compatibility"
    receive: "Database configuration"

  - trigger: "auth|authentication|session"
    delegate_to: nextjs-supabase-auth
    pattern: parallel
    context: "Deployment needs auth config"
    handoff_data:
      - "OAuth URLs"
      - "Cookie domains"
      - "Callback routes"
    receive: "Auth configuration"

  - trigger: "monitoring|logs|errors|analytics"
    delegate_to: analytics-architecture
    pattern: parallel
    context: "Deployment needs monitoring"
    handoff_data:
      - "Error tracking"
      - "Performance metrics"
      - "Log aggregation"
    receive: "Monitoring setup"

# ============================================================================
# FEEDBACK LOOPS
# ============================================================================
feedback_loops:
  receives_feedback_from:
    - skill: devops
      signal: "Infrastructure requirements"
      action: "Adjust deployment config"

    - skill: frontend
      signal: "Performance issues"
      action: "Optimize build"

    - skill: backend
      signal: "Function timeout issues"
      action: "Adjust runtime config"

  sends_feedback_to:
    - skill: nextjs-app-router
      signal: "Build constraints"
      action: "Optimize for Vercel"

    - skill: frontend
      signal: "Edge capabilities"
      action: "Leverage edge caching"

    - skill: devops
      signal: "Deployment health"
      action: "Monitor production"

# ============================================================================
# CROSS-DOMAIN INSIGHTS
# ============================================================================
cross_domain_insights:
  - domain: Platform Engineering
    insight: |
      Platform engineers know hosting:
      - Edge is faster than origin
      - Environment separation matters
      - Preview deploys save bugs
      - Build optimization compounds
      Deployment follows platform engineering.
    applies_when: "Configuring Vercel"

  - domain: CDN Architecture
    insight: |
      CDN architects know distribution:
      - Cache at the edge
      - Invalidation is hard
      - Headers control caching
      - Cold starts cost latency
      Vercel leverages CDN principles.
    applies_when: "Optimizing performance"

# ============================================================================
# COMMON COMBINATIONS
# ============================================================================
common_combinations:
  - name: Production Launch
    skills:
      - vercel-deployment
      - nextjs-app-router
      - supabase-backend
      - nextjs-supabase-auth
    workflow: |
      1. App configuration (nextjs-app-router)
      2. Database setup (supabase-backend)
      3. Auth config (nextjs-supabase-auth)
      4. Deploy (vercel-deployment)

  - name: CI/CD Pipeline
    skills:
      - vercel-deployment
      - devops
      - qa-engineering
    workflow: |
      1. Test automation (qa-engineering)
      2. Pipeline config (devops)
      3. Deploy strategy (vercel-deployment)
