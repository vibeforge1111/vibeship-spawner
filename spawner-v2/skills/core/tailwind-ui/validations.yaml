# Tailwind CSS UI Validations
# Checks that run on code to catch issues

validations:
  - id: tailwind-dynamic-class
    name: Dynamic Class Name Construction
    severity: warning
    type: regex
    pattern:
      - 'className.*`[^`]*\$\{[^}]+\}[^`]*`'
      - 'className.*\+.*(?:bg|text|border|p|m)-'
    message: "Dynamic class construction may cause classes to be purged in production."
    fix_action: "Use a mapping object with complete class names or add to safelist"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tailwind-empty-content
    name: Empty Content Array
    severity: error
    type: regex
    pattern:
      - 'content:\s*\[\s*\]'
    message: "Empty content array means no Tailwind classes will be generated."
    fix_action: "Add file patterns to content array matching your source files"
    applies_to:
      - "tailwind.config.js"
      - "tailwind.config.ts"

  - id: tailwind-deprecated-purge
    name: Deprecated Purge Option
    severity: warning
    type: regex
    pattern:
      - 'purge:\s*\['
      - "mode:\\s*['\"]jit['\"]"
    message: "Using deprecated Tailwind v2 options. Use 'content' instead of 'purge'."
    fix_action: "Rename 'purge' to 'content' and remove 'mode: jit'"
    applies_to:
      - "tailwind.config.js"
      - "tailwind.config.ts"

  - id: tailwind-important-abuse
    name: Excessive Important Modifier
    severity: warning
    type: regex
    pattern:
      - '!\w+-\w+.*!\w+-\w+'
      - 'className="[^"]*![^"]*![^"]*![^"]*"'
    message: "Multiple !important modifiers suggest specificity issues."
    fix_action: "Fix the cascade or use tailwind-merge instead of !important"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tailwind-arbitrary-overuse
    name: Excessive Arbitrary Values
    severity: warning
    type: regex
    pattern:
      - '\[\d+px\].*\[\d+px\].*\[\d+px\]'
      - 'w-\[\d+px\]|h-\[\d+px\]|p-\[\d+px\]|m-\[\d+px\]'
    message: "Many arbitrary values break design consistency. Consider extending theme."
    fix_action: "Use theme values or extend theme in tailwind.config.js"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tailwind-inline-style-mix
    name: Mixing Inline Styles with Tailwind
    severity: warning
    type: regex
    pattern:
      - 'className="[^"]+"\s*style=\{'
      - 'style=\{[^}]+\}\s*className='
    message: "Mixing inline styles with Tailwind classes. Consider using Tailwind only."
    fix_action: "Use Tailwind utilities, arbitrary values, or CSS variables instead"
    applies_to:
      - "*.tsx"
      - "*.jsx"

  - id: tailwind-missing-dark-config
    name: Dark Classes Without Config
    severity: warning
    type: regex
    pattern:
      - 'dark:'
    message: "Using dark: classes. Ensure darkMode is configured in tailwind.config.js"
    fix_action: "Add darkMode: 'class' or 'media' to tailwind.config.js"
    applies_to:
      - "*.tsx"
      - "*.jsx"
    check_config: "darkMode"

  - id: tailwind-apply-outside-layer
    name: "@apply Outside Layer"
    severity: warning
    type: regex
    pattern:
      - '@apply(?![\s\S]{0,50}?@layer)'
    message: "@apply used outside @layer directive may have unexpected specificity."
    fix_action: "Wrap custom CSS in @layer components or @layer utilities"
    applies_to:
      - "*.css"
      - "globals.css"
