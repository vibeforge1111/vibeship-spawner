# Team Communications Validations
# Checks for patterns related to internal team communication systems

validations:
  - id: no-documentation-system
    name: Application Without Documentation Link
    severity: info
    type: regex
    pattern:
      - "README|readme|docs|documentation"
      - "onboarding|setup|getting-started"
    message: "Documentation reference without clear internal docs system."
    fix_action: "Ensure internal documentation is organized and linked from main project"
    applies_to:
      - "**/README.md"
      - "**/*.md"
    exceptions:
      - "notion\\.so|confluence|gitbook|docs\\."

  - id: no-team-channel-reference
    name: Project Without Team Communication Channel
    severity: info
    type: regex
    pattern:
      - "slack|Slack|teams|Teams|discord|Discord"
    message: "Communication tool reference without specific channel guidance."
    fix_action: "Document which channels to use for what purposes"
    applies_to:
      - "**/README.md"
      - "**/CONTRIBUTING.md"
    exceptions:
      - "#team|#project|channel-name|channel-guide"

  - id: no-meeting-notes-structure
    name: Meeting System Without Notes Template
    severity: info
    type: regex
    pattern:
      - "meeting|Meeting|standup|Standup"
      - "agenda|Agenda|sync|Sync"
    message: "Meeting references without notes structure."
    fix_action: "Add meeting notes template with decisions, actions, and attendees"
    applies_to:
      - "**/*.md"
      - "**/*.yaml"
    exceptions:
      - "notes|decisions|action.*items|attendees"

  - id: undocumented-decision
    name: Code Decision Without Documentation
    severity: info
    type: regex
    pattern:
      - "// TODO:|// FIXME:|// HACK:|// XXX:"
      - "# TODO:|# FIXME:|# HACK:"
    message: "Code decision markers without linked documentation."
    fix_action: "Document significant decisions in ADR or decision log"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
      - "**/*.py"
    exceptions:
      - "ADR|decision.*log|documented.*in|see.*docs"

  - id: hardcoded-team-info
    name: Hardcoded Team Contact Information
    severity: warning
    type: regex
    pattern:
      - "@\\w+\\.com|email.*=.*@"
      - "contact.*=.*\\w+@"
    message: "Hardcoded email addresses will become stale."
    fix_action: "Use role-based addresses or links to team directory"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
      - "**/*.md"
    exceptions:
      - "noreply|no-reply|team@|support@|example\\.com"

  - id: no-escalation-path
    name: Error Handling Without Escalation Info
    severity: info
    type: regex
    pattern:
      - "throw new Error|raise|panic"
      - "critical|fatal|emergency"
    message: "Critical error handling without escalation guidance."
    fix_action: "Document who to contact for critical issues"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "oncall|pagerduty|opsgenie|escalate|notify"

  - id: no-changelog
    name: Version Updates Without Changelog
    severity: info
    type: regex
    pattern:
      - "version.*:\\s*['\"]\\d"
      - "\"version\":\\s*\"\\d"
    message: "Version number without changelog for team visibility."
    fix_action: "Maintain CHANGELOG.md for team awareness of changes"
    applies_to:
      - "**/package.json"
      - "**/pyproject.toml"
    exceptions:
      - "CHANGELOG|changelog|HISTORY|release-notes"

  - id: no-onboarding-reference
    name: Setup Instructions Without Onboarding Link
    severity: info
    type: regex
    pattern:
      - "npm install|yarn|pnpm|pip install"
      - "getting started|setup|installation"
    message: "Setup instructions without link to full onboarding."
    fix_action: "Link setup instructions to comprehensive onboarding documentation"
    applies_to:
      - "**/README.md"
    exceptions:
      - "onboarding|new.*hire|getting.*started.*guide"

  - id: slack-link-in-code
    name: Slack Link That Will Expire
    severity: warning
    type: regex
    pattern:
      - "slack\\.com/archives"
      - "app\\.slack\\.com/.*"
    message: "Slack links expire and lose context over time."
    fix_action: "Document information in permanent location, not just Slack"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
      - "**/*.md"
    exceptions:
      - "also.*documented|see.*wiki|captured.*in"

  - id: no-owner-in-docs
    name: Documentation Without Owner
    severity: info
    type: regex
    pattern:
      - "# |## |### "
    message: "Documentation without clear ownership for maintenance."
    fix_action: "Add document owner and last-updated date to all docs"
    applies_to:
      - "**/docs/**/*.md"
      - "**/wiki/**/*.md"
    exceptions:
      - "owner:|maintained.*by:|last.*updated:|updated:"

  - id: outdated-process-reference
    name: Reference to Potentially Outdated Process
    severity: info
    type: regex
    pattern:
      - "our process|the process|current process"
      - "we usually|we typically|we always"
    message: "Process reference may become outdated without versioning."
    fix_action: "Link to authoritative process documentation"
    applies_to:
      - "**/*.md"
    exceptions:
      - "see.*process|process.*doc|link.*to|documented.*at"

  - id: no-async-alternative
    name: Sync Requirement Without Async Option
    severity: info
    type: regex
    pattern:
      - "schedule.*meeting|book.*time|set up.*call"
      - "we need to meet|let's sync"
    message: "Sync-first communication without async alternative."
    fix_action: "Provide async options alongside sync when possible"
    applies_to:
      - "**/*.md"
      - "**/README.md"
    exceptions:
      - "async|loom|video.*message|document.*first"

  - id: no-timezone-consideration
    name: Time Reference Without Timezone
    severity: info
    type: regex
    pattern:
      - "\\d{1,2}:\\d{2}|\\d{1,2}(am|pm|AM|PM)"
      - "at \\d|by \\d"
    message: "Time reference without timezone for distributed teams."
    fix_action: "Include timezone or use relative time for distributed teams"
    applies_to:
      - "**/*.md"
    exceptions:
      - "UTC|PST|EST|timezone|time.*zone|local.*time"

  - id: no-decision-log
    name: ADR/Decision Without Logging System
    severity: info
    type: regex
    pattern:
      - "we decided|decision.*made|chose.*to"
      - "after.*discussion|team.*agreed"
    message: "Decision reference without link to decision log."
    fix_action: "Maintain decision log or ADRs for team reference"
    applies_to:
      - "**/*.md"
    exceptions:
      - "ADR|adr|decision.*log|decision.*record"

