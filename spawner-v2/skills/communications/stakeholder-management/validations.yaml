# Stakeholder Management Validations
# Checks for patterns related to stakeholder communication systems

validations:
  - id: no-metrics-dashboard
    name: Application Without Metrics Dashboard
    severity: info
    type: regex
    pattern:
      - "analytics|Analytics|dashboard|Dashboard"
      - "metrics|Metrics|reporting|Reporting"
    message: "Analytics reference without exportable metrics for stakeholder reporting."
    fix_action: "Ensure key metrics are easily exportable for investor updates"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "export|csv|download|report"

  - id: no-mrr-calculation
    name: Subscription Without MRR Tracking
    severity: warning
    type: regex
    pattern:
      - "subscription|Subscription|recurring"
      - "stripe.*subscription|createSubscription"
    message: "Subscription system without MRR calculation for investor reporting."
    fix_action: "Track and calculate MRR for stakeholder updates"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "mrr|MRR|monthlyRecurring|monthly_recurring"

  - id: hardcoded-metrics
    name: Hardcoded Metrics in Reports
    severity: warning
    type: regex
    pattern:
      - "revenue.*=.*\\d+"
      - "users.*=.*\\d{3,}"
      - "customers.*=.*\\d+"
    message: "Hardcoded metric values. Should be calculated from source data."
    fix_action: "Calculate metrics dynamically from database for accurate stakeholder reporting"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "mock|test|example|placeholder|default"

  - id: no-audit-trail
    name: Data Changes Without Audit Trail
    severity: info
    type: regex
    pattern:
      - "update.*SET|UPDATE|delete|DELETE"
      - "\\.update\\(|\\.delete\\("
    message: "Data modifications without audit trail for stakeholder accountability."
    fix_action: "Add audit logging for board-level data integrity requirements"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "audit|log|history|createdAt|updatedAt|deletedAt"

  - id: no-churn-tracking
    name: Customer Deletion Without Churn Tracking
    severity: warning
    type: regex
    pattern:
      - "deleteCustomer|deleteUser|cancelSubscription"
      - "churn|Churn|cancel|Cancel"
    message: "Customer removal without churn rate tracking."
    fix_action: "Track churn rate and reasons for stakeholder reporting"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "churnRate|churn.*reason|cancelReason"

  - id: no-runway-calculation
    name: Finance Dashboard Without Runway
    severity: info
    type: regex
    pattern:
      - "finance|Finance|budget|Budget"
      - "burn|Burn|expenses|Expenses"
    message: "Financial tracking without runway calculation."
    fix_action: "Add runway calculation (cash / monthly burn) for stakeholder visibility"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "runway|Runway|monthsRemaining|cashRunway"

  - id: no-cohort-analysis
    name: User Tracking Without Cohort Analysis
    severity: info
    type: regex
    pattern:
      - "createdAt|signupDate|registrationDate"
      - "newUser|createUser|signup"
    message: "User tracking without cohort analysis capability."
    fix_action: "Track signup cohorts for retention analysis in stakeholder reporting"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "cohort|Cohort|vintage|retentionCohort"

  - id: no-investor-role
    name: Auth System Without Investor Access
    severity: info
    type: regex
    pattern:
      - "role.*admin|isAdmin|adminRole"
      - "permissions|authorize|checkRole"
    message: "Role system without investor/board member access consideration."
    fix_action: "Consider read-only stakeholder access for transparency"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "investor|board|stakeholder|readonly|viewer"

  - id: no-scheduled-reports
    name: Reporting Without Scheduled Delivery
    severity: info
    type: regex
    pattern:
      - "report|Report|generateReport"
      - "export|Export|download|Download"
    message: "Manual report generation without scheduled delivery."
    fix_action: "Add scheduled/automated report delivery for consistent stakeholder updates"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "schedule|cron|automate|recurring|weekly|monthly"

  - id: no-retention-metrics
    name: User Activity Without Retention Tracking
    severity: info
    type: regex
    pattern:
      - "lastActive|lastLogin|lastSeen"
      - "activeUser|dailyActive|monthlyActive"
    message: "Activity tracking without retention metrics for stakeholder reporting."
    fix_action: "Calculate and track retention metrics (D1, D7, D30)"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "retention|d1|d7|d30|dau|mau|wau"

  - id: no-growth-metrics
    name: Data Without Growth Rate Calculation
    severity: info
    type: regex
    pattern:
      - "count|total|sum"
      - "users|customers|revenue"
    message: "Aggregate metrics without growth rate calculation."
    fix_action: "Add MoM and YoY growth rate calculations for stakeholder updates"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "growth|Growth|rate|percent|yoy|mom|wow"

  - id: inconsistent-metric-definition
    name: Multiple Metric Definitions
    severity: warning
    type: regex
    pattern:
      - "const.*revenue|let.*revenue|var.*revenue"
      - "calculateRevenue|getRevenue|computeRevenue"
    message: "Multiple revenue/metric calculations may cause inconsistent reporting."
    fix_action: "Centralize metric calculations for consistent stakeholder reporting"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "MetricsService|metricsUtils|centralized"

  - id: no-data-export
    name: Dashboard Without Data Export
    severity: info
    type: regex
    pattern:
      - "dashboard|Dashboard|analytics|Analytics"
      - "chart|Chart|graph|Graph"
    message: "Dashboard without data export for stakeholder reporting."
    fix_action: "Add CSV/PDF export capability for stakeholder presentations"
    applies_to:
      - "**/*.tsx"
      - "**/*.jsx"
    exceptions:
      - "export|download|csv|pdf|excel"

  - id: no-historical-data
    name: Metrics Without Historical Tracking
    severity: warning
    type: regex
    pattern:
      - "current.*metric|latest.*count"
      - "getMetric|fetchMetric"
    message: "Current metrics without historical tracking."
    fix_action: "Store historical metric snapshots for trend analysis in updates"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "history|historical|trend|snapshot|timeseries"

  - id: no-partner-tracking
    name: Integration Without Partner Attribution
    severity: info
    type: regex
    pattern:
      - "integration|Integration|partner|Partner"
      - "referral|affiliate|channel"
    message: "Partner integration without attribution tracking."
    fix_action: "Track partner-sourced revenue and users for partnership reporting"
    applies_to:
      - "**/*.ts"
      - "**/*.tsx"
    exceptions:
      - "partnerRevenue|partnerAttribution|channelSource"

