# Personal Tool Builder Validations

validations:
  - id: hardcoded-paths
    name: Hardcoded Absolute Paths
    severity: medium
    type: regex
    pattern: '["'']/Users/|["'']C:\\\\Users\\\\|["'']/home/'
    file_patterns:
      - "*.js"
      - "*.ts"
      - "*.py"
    message: "Hardcoded absolute path - use homedir() or environment variables."
    fix_action: "Use os.homedir() or path.join for portable paths"

  - id: credentials-in-code
    name: Hardcoded Credentials
    severity: critical
    type: regex
    pattern: '(api[_-]?key|secret|token|password)\s*[=:]\s*["\x27][a-zA-Z0-9_\-]{10,}["\x27]'
    file_patterns:
      - "*.js"
      - "*.ts"
      - "*.py"
      - "*.json"
    message: "Potential hardcoded credential - use environment variables or config file."
    fix_action: "Move to process.env.VAR or external config file (gitignored)"

  - id: network-exposed-server
    name: Server Bound to All Interfaces
    severity: high
    type: regex
    pattern: "listen\\([^)]*['\"]0\\.0\\.0\\.0['\"]|listen\\([^)]*,\\s*null"
    file_patterns:
      - "*.js"
      - "*.ts"
    message: "Server exposed to network - bind to localhost for personal tools."
    fix_action: "Use '127.0.0.1' or 'localhost' instead of '0.0.0.0'"

  - id: no-error-handling
    name: Missing Error Handling
    severity: medium
    type: regex
    pattern: "\\.(readFileSync|writeFileSync|execSync)\\([^)]+\\)(?!.*catch)"
    file_patterns:
      - "*.js"
      - "*.ts"
    message: "Sync operation without error handling - wrap in try/catch."
    fix_action: "Add try/catch for graceful error messages"

  - id: no-help-command
    name: CLI Without Help
    severity: low
    type: conceptual
    check: "CLI should have --help option"
    indicators:
      - "No usage instructions"
      - "Unclear how to use"
      - "Missing command documentation"
    message: "CLI has no help - future you will forget how to use it."
    fix_action: "Add .description() and --help to CLI commands"

  - id: no-readme
    name: Tool Without README
    severity: low
    type: conceptual
    check: "Personal tools should have basic README"
    indicators:
      - "No README.md file"
      - "README missing purpose"
      - "No usage examples"
    message: "No README - document for your future self."
    fix_action: "Add README with: what it does, why you built it, how to use it"

  - id: console-log-debugging
    name: Debug Console Logs Left In
    severity: low
    type: regex
    pattern: "console\\.log\\(['\"]debug|console\\.log\\(['\"]TODO|console\\.log\\(['\"]test"
    file_patterns:
      - "*.js"
      - "*.ts"
    message: "Debug logging left in code - remove or use proper logging."
    fix_action: "Remove debug logs or use a proper logger with levels"

  - id: missing-shebang
    name: Script Missing Shebang
    severity: low
    type: conceptual
    check: "Executable scripts need shebang"
    indicators:
      - "Script in bin/ without #!/usr/bin/env"
      - "Python script without shebang"
      - "Script not executable"
    message: "Script missing shebang - won't execute directly."
    fix_action: "Add #!/usr/bin/env node (or python3) at top of file"

  - id: no-version
    name: Tool Without Version
    severity: low
    type: conceptual
    check: "Tools should have version numbers"
    indicators:
      - "No --version flag"
      - "No version in package.json"
      - "Unclear which version is running"
    message: "No version tracking - will cause confusion when updating."
    fix_action: "Add version to package.json and --version flag"
