# Viral Generator Builder Sharp Edges

sharp_edges:
  - id: same-input-different-output
    summary: Random results kill sharing
    severity: high
    situation: Generator gives different results for same input
    why: |
      Pure random = can't share meaningfully.
      "Try it!" but they get different result.
      Breaks the viral loop.
      No "we got the same!" moments.
    solution: |
      ## Deterministic Results

      ### Use Seeded Randomness
      ```javascript
      // Hash the input to create a seed
      function hashString(str) {
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
          hash = ((hash << 5) - hash) + str.charCodeAt(i);
          hash |= 0;
        }
        return Math.abs(hash);
      }

      // Use seed for "random" selection
      function generateResult(name) {
        const seed = hashString(name.toLowerCase().trim());
        const results = ['Type A', 'Type B', 'Type C', 'Type D'];
        return results[seed % results.length];
      }
      ```

      ### Same Name = Same Result
      - Lowercase and trim inputs
      - Remove special characters
      - Consider nickname handling
      - Document the consistency

      ### When Random IS Okay
      - "Generate another" button
      - Daily changing results (with date seed)
      - Explicitly random features
    symptoms:
      - Users complain results changed
      - "I got different result" comments
      - Low share rates
      - Confusion in comments
    detection_pattern: "Math.random|different result|changed|not the same"

  - id: mobile-unfriendly-results
    summary: Results don't work on mobile
    severity: high
    situation: Result page breaks on mobile devices
    why: |
      80%+ traffic is mobile.
      Screenshots are mobile.
      Sharing is mobile.
      Desktop-first = death.
    solution: |
      ## Mobile-First Results

      ### Design Constraints
      | Element | Mobile Rule |
      |---------|-------------|
      | Result text | Max 3 lines visible |
      | Font size | Min 18px for result |
      | Share buttons | Thumb-reachable |
      | Result image | 1:1 or 4:5 ratio |

      ### Screenshot Optimization
      ```css
      .result-card {
        /* Instagram story friendly */
        max-width: 400px;
        aspect-ratio: 9/16; /* or 1:1 for feed */
        padding: 20px;

        /* Ensure sharp screenshots */
        -webkit-font-smoothing: antialiased;
      }
      ```

      ### Test On Real Devices
      - Screenshot on iPhone
      - Screenshot on Android
      - Check in Instagram story
      - Check in Twitter card preview
    symptoms:
      - Low mobile engagement
      - Truncated screenshots
      - Broken layouts in shares
      - High mobile bounce rate
    detection_pattern: "mobile|screenshot|cropped|broken|small"

  - id: no-social-meta-tags
    summary: Shares look terrible on social
    severity: high
    situation: Shared links show generic preview
    why: |
      Bad preview = no clicks.
      Generic image = invisible in feed.
      Wrong title = confusion.
      Killed viral potential.
    solution: |
      ## Social Meta Tags

      ### Dynamic OG Tags
      ```html
      <!-- Each result needs unique meta -->
      <meta property="og:title" content="I'm a Midnight Architect!" />
      <meta property="og:description" content="Take the quiz to find your type" />
      <meta property="og:image" content="https://site.com/results/midnight-architect.png" />
      <meta property="og:url" content="https://site.com/result/midnight-architect" />

      <!-- Twitter specific -->
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:image" content="https://site.com/results/midnight-architect.png" />
      ```

      ### Dynamic Image Generation
      ```javascript
      // Generate result images on-the-fly
      // Options: Puppeteer, Cloudinary, Vercel OG

      // Vercel OG example
      export default function handler(req) {
        const { result, name } = req.query;

        return new ImageResponse(
          <div style={styles}>
            <h1>{name} is a {result}!</h1>
          </div>
        );
      }
      ```

      ### Preview Testing
      - Facebook Sharing Debugger
      - Twitter Card Validator
      - LinkedIn Post Inspector
      - Clear cache after changes
    symptoms:
      - Generic preview images
      - Wrong titles in shares
      - "No preview available"
      - Same image for all results
    detection_pattern: "preview|og:|meta|share.*look|twitter card"

  - id: no-viral-loop
    summary: No mechanism to bring people back
    severity: medium
    situation: People take quiz, share, but new visitors don't convert
    why: |
      One-and-done tools die.
      No loop = no growth.
      Shared but not clicked.
      Traffic doesn't compound.
    solution: |
      ## Building the Viral Loop

      ### The Loop
      ```
      User takes quiz → Shares result → Friend sees →
      Friend curious → Friend takes quiz → Friend shares → ...
      ```

      ### Loop Optimizations
      | Stage | Optimization |
      |-------|--------------|
      | Share | Make result intriguing |
      | See | Clear CTA in preview |
      | Click | Fast landing page |
      | Take | Minimal friction |
      | Result | Shareable outcome |

      ### Curiosity Triggers
      - "I got Midnight Architect - what are you?"
      - "Only 3% get this result..."
      - "Can you beat my score?"
      - "We got the same!"

      ### Re-engagement
      - "Results changed this week!"
      - "New questions added"
      - "See how friends answered"
      - Email capture for updates
    symptoms:
      - High shares, low new users
      - Traffic doesn't grow
      - One-time visitors only
      - No organic growth
    detection_pattern: "not growing|one time|no return|loop"
