# AI Wrapper Product Validations

validations:
  - id: api-key-exposed
    name: AI API Key Exposed
    severity: high
    type: pattern
    check: "API keys should be server-side only"
    pattern: "sk-[a-zA-Z0-9]{20,}|ANTHROPIC_API_KEY.*['\"][^'\"]+['\"]"
    indicators:
      - "API key in frontend code"
      - "Key in client-side bundle"
      - "Key committed to git"
    message: "AI API key may be exposed - security risk!"
    fix_action: "Move API calls to backend, use environment variables"

  - id: no-usage-tracking
    name: No AI Usage Tracking
    severity: high
    type: conceptual
    check: "Should track token usage and costs"
    indicators:
      - "No usage logging"
      - "Can't calculate costs"
      - "No user usage limits"
    message: "Not tracking AI usage - cost control issue."
    fix_action: "Log tokens and costs for every API call"

  - id: no-error-handling
    name: No AI Error Handling
    severity: high
    type: conceptual
    check: "Should handle AI API errors gracefully"
    indicators:
      - "No try/catch on API calls"
      - "No retry logic"
      - "Raw errors shown to users"
    message: "AI errors not handled gracefully."
    fix_action: "Add try/catch, retry logic, and user-friendly error messages"

  - id: no-output-validation
    name: No AI Output Validation
    severity: medium
    type: conceptual
    check: "Should validate AI outputs before using"
    indicators:
      - "Raw AI output displayed"
      - "No parsing/validation"
      - "No format checking"
    message: "Not validating AI outputs."
    fix_action: "Add output parsing, validation, and error handling"

  - id: no-streaming
    name: No Response Streaming
    severity: low
    type: conceptual
    check: "Consider streaming for long responses"
    indicators:
      - "Long wait for full response"
      - "No progressive display"
      - "Poor perceived performance"
    message: "Not using streaming - could improve UX."
    fix_action: "Implement streaming for better perceived performance"
