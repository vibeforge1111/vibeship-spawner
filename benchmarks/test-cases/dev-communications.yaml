# Developer Communications Skill Test Cases
# Tests for: spawner-v2/skills/communications/dev-communications

skill_id: dev-communications
skill_path: communications/dev-communications

tests:
  # Open-ended test - holistic skill application
  - id: dev-comms-open-01
    type: open-ended
    name: Write quickstart guide for API
    prompt: |
      Write a quickstart guide for a fictional REST API called "DataSync API"
      that allows developers to sync data between applications.

      API details:
      - Base URL: https://api.datasync.io/v1
      - Authentication: API key in header (X-API-Key)
      - Key endpoints: POST /sync, GET /sync/{id}, DELETE /sync/{id}
      - Response format: JSON

      The guide should get a developer from zero to their first successful API call
      in under 5 minutes.
    evaluation_criteria:
      - Zero-to-success path clear
      - All prerequisites stated explicitly
      - Working code examples (not broken)
      - Copy-paste ready
      - Error handling mentioned
      - No assumed knowledge

  # Trap test 1 - targets broken-example sharp edge
  - id: dev-comms-trap-01
    type: trap
    name: Review this API documentation
    sharp_edge_targeted: broken-example
    prompt: |
      Review this API documentation and identify any issues:

      ## Authentication

      Add your API key to requests:

      ```javascript
      const response = fetch('https://api.example.com/users', {
        headers: {
          Authorization: `Bearer ${API_KEY}`
        }
      })

      const data = response.json()
      console.log(data.users)
      ```

      ## Creating a User

      ```python
      import requests

      response = request.post(
        'https://api.example.com/users',
        json={'name': 'John', 'email': 'john@example.com'},
        headers={'Authorization': f'Bearer {API_KEY}'}
      )
      ```

      What issues do you see?
    expected_catch: |
      Should identify broken examples:
      1. JavaScript: missing 'await' before fetch AND response.json()
      2. JavaScript: API_KEY not defined/shown where to get it
      3. Python: 'request.post' should be 'requests.post' (missing 's')
      4. Python: API_KEY variable not defined
      5. These will fail when copy-pasted - destroys developer trust
      Not just style suggestions or "looks good."

  # Trap test 2 - targets missing-prereq sharp edge
  - id: dev-comms-trap-02
    type: trap
    name: Review this tutorial
    sharp_edge_targeted: missing-prereq
    prompt: |
      Review this getting started tutorial:

      ## Getting Started with CloudDB

      ### Step 1: Connect to your database

      ```javascript
      import { CloudDB } from 'clouddb-sdk'

      const db = new CloudDB({
        projectId: process.env.CLOUDDB_PROJECT_ID
      })

      const users = await db.collection('users').get()
      console.log(users)
      ```

      ### Step 2: Add data

      ```javascript
      await db.collection('users').add({
        name: 'Jane',
        createdAt: CloudDB.timestamp()
      })
      ```

      That's it! You're now using CloudDB.

      What's wrong with this tutorial?
    expected_catch: |
      Should identify missing prerequisites:
      1. How do I install 'clouddb-sdk'? (npm install command missing)
      2. Where do I get CLOUDDB_PROJECT_ID? (no dashboard/signup link)
      3. How do I set up the environment variable?
      4. What Node.js version is required?
      5. Do I need to create a project first?
      6. New developers will fail at step 1 and abandon
      Not just "add more examples" - need the actual prerequisites.
